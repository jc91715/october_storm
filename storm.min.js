+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.foundation&&(Storm.foundation={}),Storm.foundation._proxyCounter=0;var b=function(){this.proxiedMethods={}};b.prototype.dispose=function(){for(var a in this.proxiedMethods)this.proxiedMethods[a]=null;this.proxiedMethods=null},b.prototype.proxy=function(a){return void 0===a.ocProxyId&&(Storm.foundation._proxyCounter++,a.ocProxyId=Storm.foundation._proxyCounter),void 0!==this.proxiedMethods[a.ocProxyId]?this.proxiedMethods[a.ocProxyId]:(this.proxiedMethods[a.ocProxyId]=a.bind(this),this.proxiedMethods[a.ocProxyId])},Storm.foundation.base=b}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.foundation&&(Storm.foundation={});var b={hasClass:function(a,b){return a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},addClass:function(a,b){for(var c=b.split(" "),d=0,e=c.length;d<e;d++){var f=c[d].trim();if(this.hasClass(a,f))return;a.classList?a.classList.add(f):a.className+=" "+f}},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},toggleClass:function(a,b,c){return void 0===c&&(this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)),c&&!this.hasClass(a,b)?void this.addClass(a,b):void(!c&&this.hasClass(a,b)&&this.removeClass(a,b))},absolutePosition:function(a,b){var c=b===!0?0:document.body.scrollTop,d=0;do c+=a.offsetTop||0,b!==!0&&(c-=a.scrollTop||0),d+=a.offsetLeft||0,a=a.offsetParent;while(a);return{top:c,left:d}},getCaretPosition:function(a){if(document.selection){var b=document.selection.createRange();return b.moveStart("character",-a.value.length),b.text.length}return void 0!==a.selectionStart?a.selectionStart:0},setCaretPosition:function(a,b){if(document.selection){var c=a.createTextRange();setTimeout(function(){c.collapse(!0),c.moveStart("character",b),c.moveEnd("character",0),c.select(),c=null,a=null},0)}void 0!==a.selectionStart&&setTimeout(function(){a.selectionStart=b,a.selectionEnd=b,a=null},0)},elementContainsPoint:function(a,b){var c=Storm.foundation.element.absolutePosition(a),d=c.left+a.offsetWidth,e=c.top+a.offsetHeight;return b.x>=c.left&&b.x<=d&&b.y>=c.top&&b.y<=e}};Storm.foundation.element=b}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.foundation&&(Storm.foundation={});var b={getTarget:function(a,b){var c=a.target?a.target:a.srcElement;if(void 0===b)return c;for(var d=c.tagName;d!=b;){if(c=c.parentNode,!c)return null;d=c.tagName}return c},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1},pageCoordinates:function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:{x:0,y:0}}};Storm.foundation.event=b}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.foundation&&(Storm.foundation={});var b={markDisposable:function(a){a.setAttribute("data-disposable","")},disposeControls:function(b){for(var c=b.querySelectorAll("[data-disposable]"),d=0,e=c.length;d<e;d++)a(c[d]).triggerHandler("dispose-control");b.hasAttribute("data-disposable")&&a(b).triggerHandler("dispose-control")}};Storm.foundation.controlUtils=b,a(document).on("ajaxBeforeReplace",function(a){Storm.foundation.controlUtils.disposeControls(a.target)})}(window.jQuery),+function(a){"use strict";var b=function(c,d){function e(){g.remove()}function f(){window.clearInterval(h),g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one(a.support.transition.end,e).emulateTransitionEnd(500):e()}var c=a.extend({},b.DEFAULTS,c),g=a(d);a("body > p.flash-message").remove(),0==g.length&&(g=a("<p />").addClass(c["class"]).html(c.text)),g.addClass("flash-message fade"),g.attr("data-control",null),g.append('<button type="button" class="close" aria-hidden="true">&times;</button>'),g.on("click","button",f),g.on("click",f),a(document.body).append(g),setTimeout(function(){g.addClass("in")},100);var h=window.setTimeout(f,1e3*c.interval)};b.DEFAULTS={"class":"success",text:"Default text",interval:5},void 0===window.Storm&&(window.Storm={}),Storm.flashMsg=b,a(document).on("render",function(){a("[data-control=flash-message]").each(function(){Storm.flashMsg(a(this).data(),this)})})}(window.jQuery),function(a){a(document).on("keydown","div.custom-checkbox",function(a){32==a.keyCode&&a.preventDefault()}),a(document).on("keyup","div.custom-checkbox",function(b){if(32==b.keyCode){var c=a("input",this);if(c.data("oc-space-timestamp")==b.timeStamp)return;return c.get(0).checked=!c.get(0).checked,c.data("oc-space-timestamp",b.timeStamp),c.trigger("change"),!1}}),a(document).on("render",function(){a("div.custom-checkbox.is-indeterminate > input").each(function(){var b=a(this),c=b.data("checked");switch(c){case 1:b.prop("indeterminate",!0);break;case 2:b.prop("indeterminate",!1),b.prop("checked",!0);break;default:b.prop("indeterminate",!1),b.prop("checked",!1)}})}),a(document).on("click","div.custom-checkbox.is-indeterminate > label",function(){var b=a(this).parent().find("input:first"),c=b.data("checked");switch(void 0===c&&(c=b.is(":checked")?1:0),c){case 0:b.data("checked",1),b.prop("indeterminate",!0);break;case 1:b.data("checked",2),b.prop("indeterminate",!1),b.prop("checked",!0);break;default:b.data("checked",0),b.prop("indeterminate",!1),b.prop("checked",!1)}return b.trigger("change"),!1})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$el=a(b),this.$field=a("input",this.$el),this.options=c||{};var d=this;a("li",this.$el).click(function(){d.$el.hasClass("control-disabled")||(a("li",d.$el).removeClass("active"),a(this).addClass("active"),d.$field.val(a(this).data("value")),d.$el.trigger("change"))})};b.DEFAULTS={};var c=a.fn.balloonSelector;a.fn.balloonSelector=function(c){return this.each(function(){var d=a(this),e=d.data("oc.balloon-selector"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("oc.balloon-selector",e=new b(this,f))})},a.fn.balloonSelector.Constructor=b,a.fn.balloonSelector.noConflict=function(){return a.fn.balloonSelector=c,this},a(document).on("render",function(){a("div[data-control=balloon-selector]").balloonSelector()})}(window.jQuery),+function(a){"use strict";function b(){var b=d.offset();c.css({position:"fixed",top:b.top-1-a(window).scrollTop()+e.outerHeight(),left:b.left})}a(document).on("shown.bs.dropdown",".custom-dropdown",function(b,c){a(document.body).addClass("dropdown-open");var d=(c?c:a(b.relatedTarget)).siblings(".dropdown-menu"),e=a(this).data("dropdown-container");if(0===d.length&&(d=a(".dropdown-menu",this)),0==a(".dropdown-container",d).length){var f=a("[data-toggle=dropdown]",this).text(),g=d.data("dropdown-title");void 0!==g&&(f=g),a("li:first-child",d).addClass("first-item"),a("li:last-child",d).addClass("last-item"),d.prepend(a("<li />").addClass("dropdown-title").text(f));var h=a("<li />").addClass("dropdown-container"),i=a("<ul />");h.prepend(i),i.prepend(d.children()),d.prepend(h),d.on("touchstart",function(){window.setTimeout(function(){d.addClass("scroll")},200)}),d.on("touchend",function(){window.setTimeout(function(){d.removeClass("scroll")},200)}),d.on("click","a",function(){if(d.hasClass("scroll"))return!1})}if(void 0!==e&&"body"==e){a(this).data("oc.dropdown",d),a(document.body).append(d),d.css({visibility:"hidden",left:0,top:0,display:"block"});var j=a(this).offset(),k=a(this).height(),l=a(this).width(),m={x:j.left,y:j.top+k},n=l<30?-16:0,o=(a(document).height(),d.height());o+m.y>a(document).height()?(m.y=j.top-o-12,d.addClass("top")):d.removeClass("top"),d.css({left:m.x+n,top:m.y,visibility:"visible"})}0==a(".dropdown-overlay",document.body).length&&a(document.body).prepend(a("<div/>").addClass("dropdown-overlay"))}),a(document).on("hidden.bs.dropdown",".custom-dropdown",function(){var b=a(this).data("oc.dropdown");void 0!==b&&(b.css("display","none"),a(this).append(b)),a(document.body).removeClass("dropdown-open")});var c,d,e;a(document).on("shown.bs.dropdown",".custom-dropdown.dropdown-fixed",function(f,g){d=a(this),c=a(".dropdown-menu",d),e=a(g.relatedTarget),b(),a(window).on("scroll.oc.dropdown, resize.oc.dropdown",b)}),a(document).on("hidden.bs.dropdown",".custom-dropdown.dropdown-fixed",function(){a(window).off("scroll.oc.dropdown, resize.oc.dropdown",b)})}(window.jQuery),+function(a){"use strict";var b='[data-dismiss="callout"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.oc.callout").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("callout")?d:d.parent()),f.trigger(b=a.Event("close.oc.callout")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(500):c())};var d=a.fn.callout;a.fn.callout=function(b){return this.each(function(){var d=a(this),e=d.data("oc.callout");e||d.data("oc.callout",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.callout.Constructor=c,a.fn.callout.noConflict=function(){return a.fn.callout=d,this},a(document).on("click.oc.callout.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(c,d){this.$el=a(c),this.options=d||{},Storm.foundation.controlUtils.markDisposable(c),b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype.init=function(){var b=this,c=this.$el.closest("form"),d=c.data("oc.changeMonitor");void 0!==d&&d.pause(),this.dbDateTimeFormat="YYYY-MM-DD HH:mm:ss",this.dbDateFormat="YYYY-MM-DD",this.dbTimeFormat="HH:mm:ss",this.$dataLocker=a("[data-datetime-value]",this.$el),this.$datePicker=a("[data-datepicker]",this.$el),this.$timePicker=a("[data-timepicker]",this.$el),this.hasDate=!!this.$datePicker.length,this.hasTime=!!this.$timePicker.length,this.initRegion(),this.hasDate&&this.initDatePicker(),this.hasTime&&this.initTimePicker(),void 0!==d&&d.resume(),this.$timePicker.on("change.oc.datepicker",function(){a.trim(a(this).val())?b.onSelectTimePicker():b.emptyValues()}),this.$datePicker.on("change.oc.datepicker",function(){a.trim(a(this).val())||b.emptyValues()}),this.$el.one("dispose-control",this.proxy(this.dispose))},d.prototype.dispose=function(){this.$timePicker.off("change.oc.datepicker"),this.$datePicker.off("change.oc.datepicker"),this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.removeData("oc.datePicker"),this.$el=null,this.options=null,c.dispose.call(this)},d.prototype.initDatePicker=function(){var b=this,c=this.getDateFormat(),d=moment().tz(this.timezone).format(c),e={yearRange:this.options.yearRange,format:c,setDefaultDate:d,onOpen:function(){var b=a(this._o.trigger);a(this.el).css({left:"auto",right:a(window).width()-b.offset().left-b.outerWidth()})},onSelect:function(){b.onSelectDatePicker.call(b,this.getMoment())}},f=this.getLang("datepicker",!1);f&&(e.i18n=f),this.$datePicker.val(this.getDataLockerValue(c)),this.options.minDate&&(e.minDate=new Date(this.options.minDate)),this.options.maxDate&&(e.maxDate=new Date(this.options.maxDate)),this.$datePicker.pikaday(e)},d.prototype.onSelectDatePicker=function(a){var b=a.format(this.dbDateFormat),c=this.getTimePickerValue(),d=moment.tz(b+" "+c,this.dbDateTimeFormat,this.timezone).tz(this.appTimezone),e=d.format(this.dbDateTimeFormat);this.$dataLocker.val(e)},d.prototype.getDatePickerValue=function(){var a=this.$datePicker.val();return this.hasDate&&a?moment(a,this.getDateFormat()).format(this.dbDateFormat):moment.tz(this.appTimezone).tz(this.timezone).format(this.dbDateFormat)},d.prototype.getDateFormat=function(){var a="YYYY-MM-DD";return this.options.format?a=this.options.format:this.locale&&(a=moment().locale(this.locale).localeData().longDateFormat("l")),a},d.prototype.initTimePicker=function(){this.$timePicker.clockpicker({autoclose:"true",placement:"bottom",align:"right",twelvehour:this.isTimeTwelveHour()}),this.$timePicker.val(this.getDataLockerValue(this.getTimeFormat()))},d.prototype.onSelectTimePicker=function(){var a=this.$timePicker.val(),b=moment(a,this.getTimeFormat()).format(this.dbTimeFormat),c=this.getDatePickerValue(),d=moment.tz(c+" "+b,this.dbDateTimeFormat,this.timezone).tz(this.appTimezone),e=d.format(this.dbDateTimeFormat);this.$dataLocker.val(e)},d.prototype.getTimePickerValue=function(){var a=this.$timePicker.val();return this.hasTime&&a?moment(a,this.getTimeFormat()).format(this.dbTimeFormat):moment.tz(this.appTimezone).tz(this.timezone).format(this.dbTimeFormat)},d.prototype.getTimeFormat=function(){return this.isTimeTwelveHour()?"hh:mm A":"HH:mm"},d.prototype.isTimeTwelveHour=function(){return!1},d.prototype.emptyValues=function(){this.$dataLocker.val(""),this.$datePicker.val(""),this.$timePicker.val("")},d.prototype.getDataLockerValue=function(a){var b=this.$dataLocker.val();return b?this.getMomentLoadValue(b,a):null},d.prototype.getMomentLoadValue=function(a,b){var c=moment.tz(a,this.appTimezone);return this.locale&&(c=c.locale(this.locale)),c=c.tz(this.timezone),c.format(b)},d.prototype.initRegion=function(){this.locale=a('meta[name="backend-locale"]').attr("content"),this.timezone=a('meta[name="backend-timezone"]').attr("content"),this.appTimezone=a('meta[name="app-timezone"]').attr("content"),this.appTimezone||(this.appTimezone="UTC"),this.timezone||(this.timezone="UTC")},d.prototype.getLang=function(a,b){return void 0===Storm||void 0===Storm.lang?b:Storm.lang.get(a,b)},d.DEFAULTS={minDate:null,maxDate:null,format:null,yearRange:10};var e=a.fn.datePicker;a.fn.datePicker=function(b){var c,e,f=Array.prototype.slice.call(arguments,1);return c=this.each(function(){var c=a(this),g=c.data("oc.datePicker"),h=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);if(g||c.data("oc.datePicker",g=new d(this,h)),"string"==typeof b&&(e=g[b].apply(g,f)),"undefined"!=typeof e)return!1}),e?e:c},a.fn.datePicker.Constructor=d,a.fn.datePicker.noConflict=function(){return a.fn.datePicker=e,this},a(document).on("render",function(){a('[data-control="datepicker"]').datePicker()})}(window.jQuery),function(a){a(document).on("render",function(){a('[data-control="tooltip"], [data-toggle="tooltip"]').tooltip()})}(jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(c,d){function e(){a(window).trigger("resize")}var f=this.$el=a(c),g=f.closest(".control-toolbar");Storm.foundation.controlUtils.markDisposable(c),this.$toolbar=g,this.options=d||{};var h=void 0!==d.noDragSupport&&d.noDragSupport;b.call(this);var i=void 0!==d.scrollClassContainer?d.scrollClassContainer:f.parent();f.dragScroll({scrollClassContainer:i,useDrag:!h}),a(".form-control.growable",g).on("focus.toolbar",function(){e()}),a(".form-control.growable",g).on("blur.toolbar",function(){e()}),this.$el.one("dispose-control",this.proxy(this.dispose))};d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype.dispose=function(){this.$el.off("dispose-control",this.proxy(this.dispose)),a(".form-control.growable",this.$toolbar).off(".toolbar"),this.$el.dragScroll("dispose"),this.$el.removeData("oc.toolbar"),this.$el=null,c.dispose.call(this)},d.DEFAULTS={};var e=a.fn.toolbar;a.fn.toolbar=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=a(this),f=e.data("oc.toolbar"),g=a.extend({},d.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("oc.toolbar",f=new d(this,g)),"string"==typeof b&&f[b].apply(f,c)})},a.fn.toolbar.Constructor=d,a.fn.toolbar.noConflict=function(){return a.fn.toolbar=e,this},a(document).on("render",function(){a("[data-control=toolbar]").toolbar()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.$el=a(b),this.options=c||{},this.scopeValues={},this.$activeScope=null,this.activeScopeName=null,this.isActiveScopeDirty=!1,this.init()};b.DEFAULTS={optionsHandler:null,updateHandler:null},b.prototype.getPopoverTemplate=function(){return'                                                                                                        <form>                                                                                                      <input type="hidden" name="scopeName"  value="{{ scopeName }}" />                                       <div id="controlFilterPopover" class="control-filter-popover">                                              <div class="filter-search loading-indicator-container size-input-text">                                     <button class="close" data-dismiss="popover" type="button">&times;</button>                             <input                                                                                                      type="text"                                                                                             name="search"                                                                                           autocomplete="off"                                                                                      class="filter-search-input form-control icon search"                                                    data-request="{{ optionsHandler }}"                                                                     data-load-indicator-opaque                                                                              data-load-indicator                                                                                     data-track-input />                                                                             </div>                                                                                                  <div class="filter-items">                                                                                  <ul>                                                                                                        {{#available}}                                                                                              <li data-item-id="{{id}}"><a href="javascript:;">{{name}}</a></li>                                  {{/available}}                                                                                          {{#loading}}                                                                                                <li class="loading"><span></span></li>                                                              {{/loading}}                                                                                        </ul>                                                                                               </div>                                                                                                  <div class="filter-active-items">                                                                           <ul>                                                                                                        {{#active}}                                                                                                 <li data-item-id="{{id}}"><a href="javascript:;">{{name}}</a></li>                                  {{/active}}                                                                                         </ul>                                                                                               </div>                                                                                              </div>                                                                                              </form>                                                                                             '},b.prototype.init=function(){var b=this;this.$el.on("change",'.filter-scope input[type="checkbox"]',function(){var c=a(this).closest(".filter-scope");c.hasClass("is-indeterminate")?b.switchToggle(a(this)):b.checkboxToggle(a(this))}),a('.filter-scope input[type="checkbox"]',this.$el).each(function(){a(this).closest(".filter-scope").toggleClass("active",a(this).is(":checked"))}),this.$el.on("click","a.filter-scope",function(){var c=a(this),d=c.data("scope-name");c.hasClass("filter-scope-open")||(b.$activeScope=c,b.activeScopeName=d,b.isActiveScopeDirty=!1,b.displayPopover(c),c.addClass("filter-scope-open"))}),this.$el.on("show.oc.popover","a.filter-scope",function(){b.focusSearch()}),this.$el.on("hide.oc.popover","a.filter-scope",function(){var c=a(this);b.pushOptions(b.activeScopeName),b.activeScopeName=null,b.$activeScope=null,setTimeout(function(){c.removeClass("filter-scope-open")},200)}),a(document).on("click","#controlFilterPopover .filter-items > ul > li",function(){b.selectItem(a(this))}),a(document).on("click","#controlFilterPopover .filter-active-items > ul > li",function(){b.selectItem(a(this),!0)}),a(document).on("ajaxDone","#controlFilterPopover input.filter-search-input",function(a,c,d){b.filterAvailable(d.scopeName,d.options.available)})},b.prototype.focusSearch=function(){if(!Modernizr.touch){var b=a("#controlFilterPopover input.filter-search-input"),c=b.val().length;b.focus(),b.get(0).setSelectionRange(c,c)}},b.prototype.updateScopeSetting=function(a,b){var c=a.find(".filter-setting");b?(c.text(b),a.addClass("active")):(c.text(this.getLang("filter.group.all","all")),a.removeClass("active"))},b.prototype.selectItem=function(b,c){var d=c?b.closest(".control-filter-popover").find(".filter-items:first > ul"):b.closest(".control-filter-popover").find(".filter-active-items:first > ul");if(b.addClass("animate-enter").prependTo(d).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(this).removeClass("animate-enter")}),this.scopeValues[this.activeScopeName]){var e=b.data("item-id"),f=this.scopeValues[this.activeScopeName],g=c?f.active:f.available,h=c?f.available:f.active,i=function(a){return a.id==e},j=a.grep(g,i).pop(),k=a.grep(g,i,!0);c?this.scopeValues[this.activeScopeName].active=k:this.scopeValues[this.activeScopeName].available=k,j&&h.push(j),this.updateScopeSetting(this.$activeScope,f.active.length),this.isActiveScopeDirty=!0,this.focusSearch()}},b.prototype.displayPopover=function(a){var b=this,c=a.data("scope-name"),d=this.scopeValues[c],e=!0;d||(d={loading:!0},e=!1),d.scopeName=c,d.optionsHandler=b.options.optionsHandler,a.data("oc.popover",null),a.ocPopover({content:Mustache.render(b.getPopoverTemplate(),d),modal:!1,highlightModalTarget:!0,closeOnPageClick:!0,placement:"bottom"}),e||b.loadOptions(c)},b.prototype.loadOptions=function(a){var b=this.$el.closest("form"),c=this,d={scopeName:a},e=this.$el.data("filterScopes");return e&&e[a]?(c.fillOptions(a,e[a]),!1):b.request(this.options.optionsHandler,{data:d,success:function(b){c.fillOptions(a,b.options)}})},b.prototype.fillOptions=function(b,c){if(!this.scopeValues[b]&&(c.active||(c.active=[]),c.available||(c.available=[]),this.scopeValues[b]=c,b==this.activeScopeName)){var d=a("#controlFilterPopover .filter-items > ul").empty();this.addItemsToListElement(d,c.available);var d=a("#controlFilterPopover .filter-active-items > ul");this.addItemsToListElement(d,c.active)}},b.prototype.filterAvailable=function(b,c){if(this.activeScopeName==b&&this.scopeValues[this.activeScopeName]){var d=this,e=[],f=this.scopeValues[b];if(f.active.length){var g=[];a.each(f.active,function(a,b){g.push(b.id)}),e=a.grep(c,function(b){return a.inArray(b.id,g)===-1})}else e=c;var h=a("#controlFilterPopover .filter-items > ul").empty();d.addItemsToListElement(h,e)}},b.prototype.addItemsToListElement=function(b,c){a.each(c,function(c,d){var e=a("<li />").data({"item-id":d.id}).append(a("<a />").prop({href:"javascript:;"}).text(d.name));b.append(e)})},b.prototype.pushOptions=function(a){if(this.isActiveScopeDirty&&this.options.updateHandler){var b=this.$el.closest("form"),c={scopeName:a,options:this.scopeValues[a]};Storm.stripeLoadIndicator.show(),b.request(this.options.updateHandler,{data:c}).always(function(){Storm.stripeLoadIndicator.hide()})}},b.prototype.checkboxToggle=function(a){var b=a.is(":checked"),c=a.closest(".filter-scope"),d=c.data("scope-name");if(this.scopeValues[d]=b,this.options.updateHandler){var e=this.$el.closest("form"),f={scopeName:d,value:b};Storm.stripeLoadIndicator.show(),e.request(this.options.updateHandler,{data:f}).always(function(){Storm.stripeLoadIndicator.hide()})}c.toggleClass("active",b)},b.prototype.switchToggle=function(a){var b=a.data("checked"),c=a.closest(".filter-scope"),d=c.data("scope-name");if(this.scopeValues[d]=b,this.options.updateHandler){var e=this.$el.closest("form"),f={scopeName:d,value:b};Storm.stripeLoadIndicator.show(),e.request(this.options.updateHandler,{data:f}).always(function(){Storm.stripeLoadIndicator.hide()})}c.toggleClass("active",!!b)},b.prototype.getLang=function(a,b){return void 0===Storm||void 0===Storm.lang?b:Storm.lang.get(a,b)};var c=a.fn.filterWidget;a.fn.filterWidget=function(c){var d;return this.each(function(){var e=a(this),f=e.data("oc.filterwidget"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);if(f||e.data("oc.filterwidget",f=new b(this,g)),"string"==typeof c&&(d=f[c].call(e)),"undefined"!=typeof d)return!1}),d?d:this},a.fn.filterWidget.Constructor=b,a.fn.filterWidget.noConflict=function(){return a.fn.filterWidget=c,this},a(document).on("render",function(){a('[data-control="filterwidget"]').filterWidget()})}(window.jQuery),+function(a){"use strict";var b=a.fn.filterWidget.Constructor,c=b.prototype.init;b.prototype.init=function(){c.apply(this),this.initRegion(),this.initFilterDate()},b.prototype.initFilterDate=function(){var b=this;this.$el.on("show.oc.popover","a.filter-scope-date",function(){b.initDatePickers(a(this).hasClass("range"))}),this.$el.on("hiding.oc.popover","a.filter-scope-date",function(){b.clearDatePickers()}),this.$el.on("hide.oc.popover","a.filter-scope-date",function(){var c=a(this);b.pushOptions(b.activeScopeName),b.activeScopeName=null,b.$activeScope=null,setTimeout(function(){c.removeClass("filter-scope-open")},200)}),this.$el.on("click","a.filter-scope-date",function(){var c=a(this),d=c.data("scope-name");c.hasClass("filter-scope-open")||null===b.activeScopeName&&(b.$activeScope=c,b.activeScopeName=d,b.isActiveScopeDirty=!1,c.hasClass("range")?b.displayPopoverRange(c):b.displayPopoverDate(c),c.addClass("filter-scope-open"))}),a(document).on("click",'#controlFilterPopover [data-trigger="filter"]',function(a){a.preventDefault(),a.stopPropagation(),b.filterByDate()}),a(document).on("click",'#controlFilterPopover [data-trigger="clear"]',function(a){a.preventDefault(),a.stopPropagation(),b.filterByDate(!0)})},b.prototype.getPopoverDateTemplate=function(){return'                                                                                                                        <form>                                                                                                                      <input type="hidden" name="scopeName" value="{{ scopeName }}" />                                                        <div id="controlFilterPopover" class="control-filter-popover control-filter-date-popover">                                  <div class="filter-search loading-indicator-container size-input-text">                                                     <div class="field-datepicker">                                                                                              <div class="input-with-icon right-align">                                                                                   <i class="icon icon-calendar-o"></i>                                                                                    <input                                                                                                                      type="text"                                                                                                             name="date"                                                                                                             value="{{ date }}"                                                                                                      class="form-control align-right"                                                                                        autocomplete="off"                                                                                                      placeholder="{{ date_placeholder }}" />                                                                         </div>                                                                                                              </div>                                                                                                                  <div class="filter-buttons">                                                                                                <button class="btn btn-block btn-secondary" data-trigger="clear">                                                           {{ reset_button_text }}                                                                                             </button>                                                                                                           </div>                                                                                                              </div>                                                                                                              </div>                                                                                                              </form>                                                                                                             '},b.prototype.getPopoverRangeTemplate=function(){return'                                                                                                                        <form>                                                                                                                      <input type="hidden" name="scopeName" value="{{ scopeName }}" />                                                        <div id="controlFilterPopover" class="control-filter-popover control-filter-date-popover --range">                          <div class="filter-search loading-indicator-container size-input-text">                                                     <div class="field-datepicker">                                                                                              <div class="input-with-icon right-align">                                                                                   <i class="icon icon-calendar-o"></i>                                                                                    <input                                                                                                                      type="text"                                                                                                             name="date"                                                                                                             value="{{ date }}"                                                                                                      class="form-control align-right"                                                                                        autocomplete="off"                                                                                                      placeholder="{{ after_placeholder }}" />                                                                        </div>                                                                                                              </div>                                                                                                                  <div class="field-datepicker">                                                                                              <div class="input-with-icon right-align">                                                                                   <i class="icon icon-calendar-o"></i>                                                                                    <input                                                                                                                      type="text"                                                                                                             name="date"                                                                                                             value="{{ date }}"                                                                                                      class="form-control align-right"                                                                                        autocomplete="off"                                                                                                      placeholder="{{ before_placeholder }}" />                                                                       </div>                                                                                                              </div>                                                                                                                  <div class="filter-buttons">                                                                                                <button class="btn btn-block btn-primary" data-trigger="filter">                                                            {{ filter_button_text }}                                                                                            </button>                                                                                                               <button class="btn btn-block btn-secondary" data-trigger="clear">                                                           {{ reset_button_text }}                                                                                             </button>                                                                                                           </div>                                                                                                              </div>                                                                                                              </div>                                                                                                              </form>                                                                                                             ';
},b.prototype.displayPopoverDate=function(b){var c=this,d=b.data("scope-name"),e=this.scopeValues[d];e=a.extend({},e,{filter_button_text:this.getLang("filter.dates.filter_button_text"),reset_button_text:this.getLang("filter.dates.reset_button_text"),date_placeholder:this.getLang("filter.dates.date_placeholder","Date")}),e.scopeName=d,b.data("oc.popover",null),b.ocPopover({content:Mustache.render(this.getPopoverDateTemplate(),e),modal:!1,highlightModalTarget:!0,closeOnPageClick:!0,placement:"bottom",onCheckDocumentClickTarget:function(a){return c.onCheckDocumentClickTargetDatePicker(a)}})},b.prototype.displayPopoverRange=function(b){var c=this,d=b.data("scope-name"),e=this.scopeValues[d];e=a.extend({},e,{filter_button_text:this.getLang("filter.dates.filter_button_text"),reset_button_text:this.getLang("filter.dates.reset_button_text"),after_placeholder:this.getLang("filter.dates.after_placeholder","After"),before_placeholder:this.getLang("filter.dates.before_placeholder","Before")}),e.scopeName=d,b.data("oc.popover",null),b.ocPopover({content:Mustache.render(this.getPopoverRangeTemplate(),e),modal:!1,highlightModalTarget:!0,closeOnPageClick:!0,placement:"bottom",onCheckDocumentClickTarget:function(a){return c.onCheckDocumentClickTargetDatePicker(a)}})},b.prototype.initDatePickers=function(b){var c=this,d=this.$activeScope.data("scope-data"),e=a(".field-datepicker input","#controlFilterPopover"),f=this.scopeValues[this.activeScopeName];f||(f={dates:b?d.dates?d.dates:[]:d.date?[d.date]:[]}),e.each(function(e,g){var h="",i=a(g),j={minDate:new Date(d.minDate),maxDate:new Date(d.maxDate),yearRange:10,setDefaultDate:""!==h?h.toDate():"",format:c.getDateFormat(),i18n:c.getLang("datepicker")};0<=e&&e<f.dates.length&&(h=f.dates[e]?moment.tz(f.dates[e],c.appTimezone).tz(c.timezone):""),b||(j.onSelect=function(){c.filterByDate()}),g.value=""!==h?h.format(c.getDateFormat()):"",i.pikaday(j)})},b.prototype.clearDatePickers=function(){var b=a(".field-datepicker input","#controlFilterPopover");b.each(function(b,c){var d=a(c);d.data("pikaday").destroy()})},b.prototype.updateScopeDateSetting=function(a,b){var c=a.find(".filter-setting"),d=this.getDateFormat(),e=/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}/,f=!1;if(b&&b.length)if(b[0]=b[0]&&b[0].match(e)?b[0]:null,b.length>1)if(b[1]=b[1]&&b[1].match(e)?b[1]:null,b[0]||b[1]){var g=b[0]?moment.tz(b[0],this.appTimezone).tz(this.timezone).format(d):"∞",h=b[1]?moment.tz(b[1],this.appTimezone).tz(this.timezone).format(d):"∞";c.text(g+" → "+h)}else f=!0;else b[0]?c.text(moment.tz(b[0],this.appTimezone).tz(this.timezone).format(d)):f=!0;else f=!0;f?(c.text(this.getLang("filter.dates.all","all")),a.removeClass("active")):a.addClass("active")},b.prototype.filterByDate=function(b){var c=this,d=[];if(!b){var e=a(".field-datepicker input","#controlFilterPopover");e.each(function(b,e){var f=a(e).data("pikaday").toString("YYYY-MM-DD");f.match(/\d{4}-\d{2}-\d{2}/)?(0===b?f+=" 00:00:00":1===b&&(f+=" 23:59:59"),f=moment.tz(f,c.timezone).tz(c.appTimezone).format("YYYY-MM-DD HH:mm:ss")):f=null,d.push(f)})}this.updateScopeDateSetting(this.$activeScope,d),this.scopeValues[this.activeScopeName]={dates:d},this.isActiveScopeDirty=!0,this.$activeScope.data("oc.popover").hide()},b.prototype.getDateFormat=function(){return this.locale?moment().locale(this.locale).localeData().longDateFormat("l"):"YYYY-MM-DD"},b.prototype.onCheckDocumentClickTargetDatePicker=function(b){var c=a(b);return c.hasClass("pika-next")||c.hasClass("pika-prev")||c.hasClass("pika-select")||c.hasClass("pika-button")||c.parents(".pika-table").length||c.parents(".pika-title").length},b.prototype.initRegion=function(){this.locale=a('meta[name="backend-locale"]').attr("content"),this.timezone=a('meta[name="backend-timezone"]').attr("content"),this.appTimezone=a('meta[name="app-timezone"]').attr("content"),this.appTimezone||(this.appTimezone="UTC"),this.timezone||(this.timezone="UTC")}}(window.jQuery),function(a){a(document).on("render",function(){var b=function(b){if(!b.id)return b.text;var c=a(b.element),d=c.data("icon"),e=c.data("image");return d?'<i class="select-icon '+d+'"></i> '+b.text:e?'<img class="select-image" src="'+e+'" alt="" /> '+b.text:b.text},c={templateResult:b,templateSelection:b,escapeMarkup:function(a){return a},width:"style"};a("select.custom-select").each(function(){var b=a(this),d={dropdownCssClass:"",containerCssClass:""};if(null!=b.data("select2"))return!0;b.attr("data-disposable","data-disposable"),b.one("dispose-control",function(){b.data("select2")&&b.select2("destroy")}),b.hasClass("select-no-search")&&(d.minimumResultsForSearch=1/0),b.hasClass("select-no-dropdown")&&(d.dropdownCssClass+=" select-no-dropdown",d.containerCssClass+=" select-no-dropdown"),b.hasClass("select-hide-selected")&&(d.dropdownCssClass+=" select-hide-selected");var e=b.data("token-separators");e&&(d.tags=!0,d.tokenSeparators=e.split("|"),b.hasClass("select-no-dropdown")&&(d.selectOnClose=!0,d.closeOnSelect=!1,b.on("select2:closing",function(){a(".select2-dropdown.select-no-dropdown:first .select2-results__option--highlighted").removeClass("select2-results__option--highlighted"),a(".select2-dropdown.select-no-dropdown:first .select2-results__option:first").addClass("select2-results__option--highlighted")})));var f=b.data("placeholder");f&&(d.placeholder=f),b.select2(a.extend({},c,d))})}),a(document).on("disable","select.custom-select",function(b,c){null!=a(this).data("select2")&&a(this).select2("enable",!c)})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$el=a(b),this.options=c||{},this.tally=0,this.show()};b.prototype.hide=function(){this.tally--,this.tally<=0&&(a("div.loading-indicator",this.$el).remove(),this.$el.removeClass("in-progress"))},b.prototype.show=function(b){b&&(this.options=b),this.hide();var c=a('<div class="loading-indicator"></div>');c.append(a("<div></div>").text(this.options.text)),c.append(a("<span></span>")),void 0!==this.options.opaque&&c.addClass("is-opaque"),this.$el.prepend(c),this.$el.addClass("in-progress"),this.tally++},b.prototype.destroy=function(){this.$el.removeData("oc.loadIndicator"),this.$el=null},b.DEFAULTS={text:""};var c=a.fn.loadIndicator;a.fn.loadIndicator=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("oc.loadIndicator"),g=a.extend({},b.DEFAULTS,"object"==typeof c&&c);if(f)if("string"!=typeof c)f.show(g);else{for(var h=[],i=1;i<d.length;i++)h.push(d[i]);f[c].apply(f,h)}else{if("string"==typeof c)return;e.data("oc.loadIndicator",f=new b(this,g))}})},a.fn.loadIndicator.Constructor=b,a.fn.loadIndicator.noConflict=function(){return a.fn.loadIndicator=c,this},a(document).on("ajaxPromise","[data-load-indicator]",function(){var b=a(this).closest(".loading-indicator-container"),c=a(this).data("load-indicator"),d={opaque:a(this).data("load-indicator-opaque")};c&&(d.text=c),b.loadIndicator(d)}).on("ajaxFail ajaxDone","[data-load-indicator]",function(){a(this).closest(".loading-indicator-container").loadIndicator("hide")})}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={});var b=function(){Modernizr.touch||(this.counter=0,this.indicator=a("<div/>").addClass("cursor-loading-indicator").addClass("hide"),a(document.body).append(this.indicator))};b.prototype.show=function(b){if(!(Modernizr.touch||(this.counter++,this.counter>1))){var c=this;void 0!==b&&void 0!==b.clientY&&c.indicator.css({left:b.clientX+15,top:b.clientY+15}),this.indicator.removeClass("hide"),a(window).on("mousemove.cursorLoadIndicator",function(a){c.indicator.css({left:a.clientX+15,top:a.clientY+15})})}},b.prototype.hide=function(b){Modernizr.touch||(this.counter--,void 0!==b&&b&&(this.counter=0),this.counter<=0&&(this.indicator.addClass("hide"),a(window).off(".cursorLoadIndicator")))},a(document).ready(function(){Storm.cursorLoadIndicator=new b}),a(document).on("ajaxPromise","[data-cursor-load-indicator]",function(){Storm.cursorLoadIndicator.show()}).on("ajaxFail ajaxDone","[data-cursor-load-indicator]",function(){Storm.cursorLoadIndicator.hide()})}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={});var b=function(){var b=this;this.counter=0,this.indicator=this.makeIndicator(),this.stripe=this.indicator.find(".stripe"),this.animationTimer=null,a(document).ready(function(){a(document.body).append(b.indicator)})};b.prototype.makeIndicator=function(){return a("<div/>").addClass("stripe-loading-indicator loaded").append(a("<div />").addClass("stripe")).append(a("<div />").addClass("stripe-loaded"))},b.prototype.show=function(){window.clearTimeout(this.animationTimer),this.indicator.show(),this.counter++,this.stripe.after(this.stripe=this.stripe.clone()).remove(),this.counter>1||(this.indicator.removeClass("loaded"),a(document.body).addClass("loading"))},b.prototype.hide=function(b){if(this.counter--,void 0!==b&&b&&(this.counter=0),this.counter<=0){this.indicator.addClass("loaded"),a(document.body).removeClass("loading");var c=this;this.animationTimer=window.setTimeout(function(){c.indicator.hide()},1e3)}},Storm.stripeLoadIndicator=new b,a(document).on("ajaxPromise","[data-stripe-load-indicator]",function(b){b.stopPropagation(),Storm.stripeLoadIndicator.show();var c=a(this);a(window).one("ajaxUpdateComplete",function(){0===c.closest("html").length&&Storm.stripeLoadIndicator.hide()})}).on("ajaxFail ajaxDone","[data-stripe-load-indicator]",function(a){a.stopPropagation(),Storm.stripeLoadIndicator.hide()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.$el=a(b);this.options=c||{},this.arrowSize=15,this.docClickHandler=null,this.show()};b.prototype.hide=function(){var b=a.Event("hiding.oc.popover",{relatedTarget:this.$el});this.$el.trigger(b,this),b.isDefaultPrevented()||(this.$container.removeClass("in"),this.$overlay&&this.$overlay.removeClass("in"),this.disposeControls(),a.support.transition&&this.$container.hasClass("fade")?this.$container.one(a.support.transition.end,a.proxy(this.hidePopover,this)).emulateTransitionEnd(300):this.hidePopover())},b.prototype.disposeControls=function(){this.$container&&Storm.foundation.controlUtils.disposeControls(this.$container.get(0))},b.prototype.hidePopover=function(){this.$container.remove(),this.$overlay&&this.$overlay.remove(),this.$el.removeClass("popover-highlight"),this.$el.trigger("hide.oc.popover"),this.$overlay=!1,this.$container=!1,this.$el.data("oc.popover",null),a(document.body).removeClass("popover-open"),a(document).unbind("mousedown",this.docClickHandler),a(document).off(".oc.popover"),this.docClickHandler=null,this.options.onCheckDocumentClickTarget=null},b.prototype.show=function(b){var c=this,d=a.Event("showing.oc.popover",{relatedTarget:this.$el});if(this.$el.trigger(d,this),!d.isDefaultPrevented()){this.$container=a("<div />").addClass("control-popover"),this.options.containerClass&&this.$container.addClass(this.options.containerClass),this.options.useAnimation&&this.$container.addClass("fade");var e=a("<div />").html(this.getContent());this.$container.append(e),this.options.width&&this.$container.width(this.options.width),this.options.modal?(this.$overlay=a("<div />").addClass("popover-overlay"),a(document.body).append(this.$overlay),this.options.highlightModalTarget&&(this.$el.addClass("popover-highlight"),this.$el.blur())):this.$overlay=!1,this.options.container?a(this.options.container).append(this.$container):a(document.body).append(this.$container),this.reposition(),this.$container.addClass("in"),this.$overlay&&this.$overlay.addClass("in"),a(document.body).addClass("popover-open");var f=jQuery.Event("show.oc.popover",{relatedTarget:this.$container.get(0)});this.$el.trigger(f),this.$container.on("close.oc.popover",function(a){c.hide()}),this.$container.on("click","[data-dismiss=popover]",function(a){return c.hide(),!1}),this.docClickHandler=a.proxy(this.onDocumentClick,this),a(document).bind("mousedown",this.docClickHandler),this.options.closeOnEsc&&a(document).on("keyup.oc.popover",function(b){return!a(b.target).hasClass("select2-offscreen")&&(!!c.options.closeOnEsc&&(27==b.keyCode?(c.hide(),!1):void 0))})}},b.prototype.reposition=function(){var a=this.calcPlacement(),b=this.calcPosition(a);this.$container.removeClass("placement-center placement-bottom placement-top placement-left placement-right"),this.$container.css({left:b.x,top:b.y}).addClass("placement-"+a)},b.prototype.getContent=function(){return"function"==typeof this.options.content?this.options.content.call(this.$el[0],this):this.options.content},b.prototype.calcDimensions=function(){var b=a(document).width(),c=a(document).height(),d=this.$el.offset(),e=this.$el.outerWidth(),f=this.$el.outerHeight();return{containerWidth:this.$container.outerWidth()+this.arrowSize,containerHeight:this.$container.outerHeight()+this.arrowSize,targetOffset:d,targetHeight:f,targetWidth:e,spaceLeft:d.left,spaceRight:b-(e+d.left),spaceTop:d.top,spaceBottom:c-(f+d.top),spaceHorizontalBottom:c-d.top,spaceVerticalRight:b-d.left,documentWidth:b}},b.prototype.fitsLeft=function(a){return a.spaceLeft>=a.containerWidth&&a.spaceHorizontalBottom>=a.containerHeight},b.prototype.fitsRight=function(a){return a.spaceRight>=a.containerWidth&&a.spaceHorizontalBottom>=a.containerHeight},b.prototype.fitsBottom=function(a){return a.spaceBottom>=a.containerHeight&&a.spaceVerticalRight>=a.containerWidth},b.prototype.fitsTop=function(a){return a.spaceTop>=a.containerHeight&&a.spaceVerticalRight>=a.containerWidth},b.prototype.calcPlacement=function(){var a=this.options.placement,b=this.calcDimensions();if("center"==a)return a;"bottom"!=a&&"top"!=a&&"left"!=a&&"right"!=a&&(a="bottom");var c={top:this.fitsTop,bottom:this.fitsBottom,left:this.fitsLeft,right:this.fitsRight};if(c[a](b))return a;for(var d in c)if(c[d](b))return d;return this.options.fallbackPlacement},b.prototype.calcPosition=function(b){var c,d=this.calcDimensions();switch(b){case"left":var e=void 0===this.options.offsetY?this.options.offset:this.options.offsetY;c={x:d.targetOffset.left-d.containerWidth,y:d.targetOffset.top+e};break;case"top":var e=void 0===this.options.offsetX?this.options.offset:this.options.offsetX;c={x:d.targetOffset.left+e,y:d.targetOffset.top-d.containerHeight};break;case"bottom":var e=void 0===this.options.offsetX?this.options.offset:this.options.offsetX;c={x:d.targetOffset.left+e,y:d.targetOffset.top+d.targetHeight+this.arrowSize};break;case"right":var e=void 0===this.options.offsetY?this.options.offset:this.options.offsetY;c={x:d.targetOffset.left+d.targetWidth+this.arrowSize,y:d.targetOffset.top+e};break;case"center":var f=a(window).height();c={x:d.documentWidth/2-d.containerWidth/2,y:f/2-d.containerHeight/2},c.y<40&&(c.y=40)}if(!this.options.container)return c;var g=a(this.options.container),h=g.offset();return c.x-=h.left,c.y-=h.top,c},b.prototype.onDocumentClick=function(b){this.options.closeOnPageClick&&(this.options.onCheckDocumentClickTarget&&this.options.onCheckDocumentClickTarget(b.target)||a.contains(this.$container.get(0),b.target)||this.hide())},b.DEFAULTS={placement:"bottom",fallbackPlacement:"bottom",content:"<p>Popover content<p>",width:!1,modal:!1,highlightModalTarget:!1,closeOnPageClick:!0,closeOnEsc:!0,container:!1,containerClass:null,offset:15,useAnimation:!1,onCheckDocumentClickTarget:null};var c=a.fn.ocPopover;a.fn.ocPopover=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("oc.popover"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);if(f){if("string"!=typeof c)return;for(var h=[],i=1;i<d.length;i++)h.push(d[i]);f[c].apply(f,h)}else{if("string"==typeof c)return;e.data("oc.popover",f=new b(this,g))}})},a.fn.ocPopover.Constructor=b,a.fn.ocPopover.noConflict=function(){return a.fn.ocPopover=c,this},a(document).on("click","[data-control=popover]",function(b){return a(this).ocPopover(),!1})}(window.jQuery),+function($){"use strict";function paramToObj(name,value){if(void 0===value&&(value=""),"object"==typeof value)return value;try{return JSON.parse(JSON.stringify(eval("({"+value+"})")))}catch(e){throw new Error("Error parsing the "+name+" attribute value. "+e)}}var Base=Storm.foundation.base,BaseProto=Base.prototype,Popup=function(a,b){this.options=b,this.$el=$(a),this.$container=null,this.$modal=null,this.$backdrop=null,this.isOpen=!1,this.firstDiv=null,this.allowHide=!0,this.$container=this.createPopupContainer(),this.$content=this.$container.find(".modal-content:first"),this.$dialog=this.$container.find(".modal-dialog:first"),this.$modal=this.$container.modal({show:!1,backdrop:!1,keyboard:this.options.keyboard}),Storm.foundation.controlUtils.markDisposable(a),Base.call(this),this.initEvents(),this.init()};Popup.prototype=Object.create(BaseProto),Popup.prototype.constructor=Popup,Popup.DEFAULTS={ajax:null,handler:null,keyboard:!0,extraData:{},content:null,size:null,adaptiveHeight:!1,zIndex:null},Popup.prototype.init=function(){var a=this;if(!a.isOpen)if(this.setBackdrop(!0),this.options.content||this.setLoading(!0),this.options.handler)this.$el.request(this.options.handler,{data:paramToObj("data-extra-data",this.options.extraData),success:function(b,c,d){this.success(b,c,d).done(function(){a.setContent(b.result),$(window).trigger("ajaxUpdateComplete",[this,b,c,d]),a.triggerEvent("popupComplete"),a.triggerEvent("complete.oc.popup")})},error:function(b,c,d){this.error(b,c,d).done(function(){a.hide(),a.triggerEvent("popupError"),a.triggerEvent("error.oc.popup")})}});else if(this.options.ajax)$.ajax({url:this.options.ajax,data:paramToObj("data-extra-data",this.options.extraData),success:function(b){a.setContent(b)},cache:!1});else if(this.options.content){var b="function"==typeof this.options.content?this.options.content.call(this.$el[0],this):this.options.content;this.setContent(b)}},Popup.prototype.initEvents=function(){var a=this;this.$container.data("oc.popup",this),this.$modal.on("hide.bs.modal",function(){a.triggerEvent("hide.oc.popup"),a.isOpen=!1,a.setBackdrop(!1)}),this.$modal.on("hidden.bs.modal",function(){a.triggerEvent("hidden.oc.popup"),a.$container.remove(),$(document.body).removeClass("modal-open"),a.dispose()}),this.$modal.on("show.bs.modal",function(){a.isOpen=!0,a.setBackdrop(!0),$(document.body).addClass("modal-open")}),this.$modal.on("shown.bs.modal",function(){a.triggerEvent("shown.oc.popup")}),this.$modal.on("close.oc.popup",function(){return a.hide(),!1})},Popup.prototype.dispose=function(){this.$modal.off("hide.bs.modal"),this.$modal.off("hidden.bs.modal"),this.$modal.off("show.bs.modal"),this.$modal.off("shown.bs.modal"),this.$modal.off("close.oc.popup"),this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.removeData("oc.popup"),this.$container.removeData("oc.popup"),this.$container=null,this.$content=null,this.$dialog=null,this.$modal=null,this.$el=null,this.options=null,BaseProto.dispose.call(this)},Popup.prototype.createPopupContainer=function(){var a=$("<div />").prop({"class":"control-popup modal fade",role:"dialog",tabindex:-1}),b=$("<div />").addClass("modal-dialog"),c=$("<div />").addClass("modal-content");return this.options.size&&b.addClass("size-"+this.options.size),this.options.adaptiveHeight&&b.addClass("adaptive-height"),null!==this.options.zIndex&&a.css("z-index",this.options.zIndex+20),a.append(b.append(c))},Popup.prototype.setContent=function(a){this.$content.html(a),this.setLoading(!1),this.show(),this.firstDiv=this.$content.find(">div:first"),this.firstDiv.length>0&&this.firstDiv.data("oc.popup",this);var b=$("[default-focus]",this.$content);b.is(":visible")&&window.setTimeout(function(){b.focus(),b=null},300)},Popup.prototype.setBackdrop=function(a){a&&!this.$backdrop?(this.$backdrop=$('<div class="popup-backdrop fade" />'),null!==this.options.zIndex&&this.$backdrop.css("z-index",this.options.zIndex),this.$backdrop.appendTo(document.body),this.$backdrop.addClass("in"),this.$backdrop.append($('<div class="modal-content popup-loading-indicator" />'))):!a&&this.$backdrop&&(this.$backdrop.remove(),this.$backdrop=null)},Popup.prototype.setLoading=function(a){if(this.$backdrop){var b=this;a?setTimeout(function(){b.$backdrop.addClass("loading")},100):this.$backdrop.removeClass("loading")}},Popup.prototype.setShake=function(){var a=this;this.$content.addClass("popup-shaking"),setTimeout(function(){a.$content.removeClass("popup-shaking")},1e3)},Popup.prototype.hideLoading=function(a){this.setLoading(!1);var b=this;setTimeout(function(){b.setBackdrop(!1)},250),setTimeout(function(){b.hide()},500)},Popup.prototype.triggerEvent=function(a,b){b||(b=[this.$el,this.$modal]);var c=jQuery.Event(a,{relatedTarget:this.$container.get(0)});this.$el.trigger(c,b),this.firstDiv&&this.firstDiv.trigger(c,b)},Popup.prototype.reload=function(){this.init()},Popup.prototype.show=function(){this.$modal.modal("show"),this.$modal.on("click.dismiss.popup",'[data-dismiss="popup"]',$.proxy(this.hide,this)),this.triggerEvent("popupShow"),this.triggerEvent("show.oc.popup"),this.$dialog.css("transform","inherit")},Popup.prototype.hide=function(){this.triggerEvent("popupHide"),this.triggerEvent("hide.oc.popup"),this.allowHide&&this.$modal.modal("hide"),this.$dialog.css("transform","")},Popup.prototype.visible=function(a){a?this.$modal.addClass("in"):this.$modal.removeClass("in"),this.setBackdrop(a)},Popup.prototype.toggle=function(){this.triggerEvent("popupToggle",[this.$modal]),this.triggerEvent("toggle.oc.popup",[this.$modal]),this.$modal.modal("toggle")},Popup.prototype.lock=function(a){this.allowHide=!a};var old=$.fn.popup;$.fn.popup=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=$(this),d=c.data("oc.popup"),e=$.extend({},Popup.DEFAULTS,c.data(),"object"==typeof a&&a);d?"string"==typeof a?d[a].apply(d,b):d.reload():c.data("oc.popup",d=new Popup(this,e))})},$.fn.popup.Constructor=Popup,$.popup=function(a){return $("<a />").popup(a)},$.fn.popup.noConflict=function(){return $.fn.popup=old,this},$(document).on("click.oc.popup",'[data-control="popup"]',function(a){a.preventDefault(),$(this).popup()}),$(document).on("ajaxPromise","[data-popup-load-indicator]",function(a,b){$(this).data("request")==b.handler&&$(this).closest(".control-popup").removeClass("in").popup("setLoading",!0)}).on("ajaxFail","[data-popup-load-indicator]",function(a,b){$(this).data("request")==b.handler&&$(this).closest(".control-popup").addClass("in").popup("setLoading",!1).popup("setShake")}).on("ajaxDone","[data-popup-load-indicator]",function(a,b){$(this).data("request")==b.handler&&$(this).closest(".control-popup").popup("hideLoading")})}(window.jQuery),+function(a){"use strict";var b=function(){};b.prototype.defaultValueColor="#b8b8b8",b.prototype.getColor=function(a){var b=["#95b753","#cc3300","#e5a91a","#3366ff","#ff0f00","#ff6600","#ff9e01","#fcd202","#f8ff01","#b0de09","#04d215","#0d8ecf","#0d52d1","#2a0cd0","#8a0ccf","#cd0d74","#754deb","#dddddd","#999999","#333333","#000000","#57032a","#ca9726","#990000","#4b0c25"],c=a%(b.length-1);return b[c]},b.prototype.loadListValues=function(b){var c={values:[],total:0,max:0};return a("> li",b).each(function(){var b=a(this).data("value")?parseFloat(a(this).data("value")):parseFloat(a("span",this).text());c.total+=b,c.values.push({value:b,color:a(this).data("color")}),c.max=Math.max(c.max,b)}),c},b.prototype.getLegendLabel=function(b,c){return a("tr:eq("+c+") td:eq(1)",b).html()},b.prototype.initLegendColorIndicators=function(b){var c=[];return a("tr > td:first-child",b).each(function(){var b=a("<i></i>");a(this).prepend(b),c.push(b)}),c},b.prototype.createLegend=function(b){var c=a("<div>").addClass("chart-legend"),d=a("<table>");return c.append(d),a("> li",b).each(function(){var b=a(this).clone().children().remove().end().html();d.append(a("<tr>").append(a('<td class="indicator">')).append(a("<td>").html(b)).append(a("<td>").addClass("value").html(a("span",this).html())))}),c.insertAfter(b),b.remove(),c},b.prototype.showTooltip=function(b,c,d){var e=a("#chart-tooltip");e.length&&e.remove(),e=a('<div id="chart-tooltip">').html(d).css("visibility","hidden"),b+=10,c+=10,a(document.body).append(e);var f=e.outerWidth();b+f>a(window).width()&&(b=a(window).width()-f-10),e.css({top:c,left:b,visibility:"visible"})},b.prototype.hideTooltip=function(){a("#chart-tooltip").remove()},void 0===window.Storm&&(window.Storm={}),Storm.chartUtils=new b}(window.jQuery),+function($){"use strict";var ChartLine=function(element,options){function weekendAreas(a){var b=[],c=new Date(a.xaxis.min);c.setUTCDate(c.getUTCDate()-(c.getUTCDay()+1)%7),c.setUTCSeconds(0),c.setUTCMinutes(0),c.setUTCHours(0);var d=c.getTime();do b.push({xaxis:{from:d,to:d+1728e5}}),d+=6048e5;while(d<a.xaxis.max);return b}var self=this;this.chartOptions={xaxis:{mode:"time",tickLength:5},selection:{mode:"x"},grid:{markingsColor:"rgba(0,0,0, 0.02)",backgroundColor:{colors:["#fff","#fff"]},borderColor:"#7bafcc",borderWidth:0,color:"#ddd",hoverable:!0,clickable:!0,labelMargin:10},series:{lines:{show:!0,fill:!0},points:{show:!0}},tooltip:!0,tooltipOpts:{defaultTheme:!1,content:"%x: <strong>%y</strong>",dateFormat:"%y-%0m-%0d",shifts:{x:10,y:20}},legend:{show:!0,noColumns:2}},this.defaultDataSetOptions={shadowSize:0};var parsedOptions={};try{parsedOptions=JSON.parse(JSON.stringify(eval("({"+options.chartOptions+"})")))}catch(e){throw new Error("Error parsing the data-chart-options attribute value. "+e)}this.chartOptions=$.extend({},this.chartOptions,parsedOptions),this.options=options,this.$el=$(element),this.fullDataSet=[],this.resetZoomLink=$(options.resetZoomLink),this.$el.trigger("oc.chartLineInit",[this]),this.resetZoomLink.on("click",$.proxy(this.clearZoom,this)),this.options.zoomable&&this.$el.on("plotselected",function(a,b){var c={xaxis:{min:b.xaxis.from,max:b.xaxis.to}};$.plot(self.$el,self.fullDataSet,$.extend(!0,{},self.chartOptions,c)),self.resetZoomLink.show()}),"time"==this.chartOptions.xaxis.mode&&"weeks"==this.options.timeMode&&(this.chartOptions.markings=weekendAreas),this.initializing=!0,this.$el.find('>[data-chart="dataset"]').each(function(){var a=$(this).data(),b={};for(var c in a){var d=c.substring(3),e=a[c];d=d.charAt(0).toLowerCase()+d.slice(1),"data"==d&&(e=JSON.parse("["+e+"]")),b[d]=e}self.addDataSet($.extend({},self.defaultDataSetOptions,b))}),this.initializing=!1,this.rebuildChart()};ChartLine.DEFAULTS={chartOptions:"",timeMode:null,zoomable:!1},ChartLine.prototype.addDataSet=function(a){this.fullDataSet.push(a),this.initializing||this.rebuildChart()},ChartLine.prototype.rebuildChart=function(){this.$el.trigger("oc.beforeChartLineRender",[this]),$.plot(this.$el,this.fullDataSet,this.chartOptions)},ChartLine.prototype.clearZoom=function(){this.rebuildChart(),this.resetZoomLink.hide()};var old=$.fn.chartLine;$.fn.chartLine=function(a){return this.each(function(){var b=$(this),c=b.data("october.chartLine"),d=$.extend({},ChartLine.DEFAULTS,b.data(),"object"==typeof a&&a);c||b.data("october.chartLine",c=new ChartLine(this,d)),"string"==typeof a&&c[a].call(b)})},$.fn.chartLine.Constructor=ChartLine,$.fn.chartLine.noConflict=function(){return $.fn.chartLine=old,this},$(document).on("render",function(){$('[data-control="chart-line"]').chartLine()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c||{};var d=this.$el=a(b),e=this.size=d.height(),f=this,g=Storm.chartUtils.loadListValues(a("ul",d)),h=Storm.chartUtils.createLegend(a("ul",d)),i=Storm.chartUtils.initLegendColorIndicators(h),j=this.isFullWidth(),k=void 0!==this.options.height?this.options.height:e,l=j?this.$el.width():e,m=(l-(g.values.length-1)*this.options.gap)/g.values.length,n=a("<div/>").addClass("canvas").height(k).width(j?"100%":l);d.prepend(n),d.toggleClass("full-width",j),Raphael(n.get(0),j?"100%":l,k,function(){f.paper=this,f.bars=this.set(),f.paper.customAttributes.bar=function(a,b){return{path:[["M",a,k],["L",a,k-b],["L",a+m,k-b],["L",a+m,k],["Z"]]}};var b=0;a.each(g.values,function(c,d){var e=void 0!==d.color?d.color:Storm.chartUtils.getColor(c),g=f.paper.path().attr({"stroke-width":0}).attr({bar:[b,0]}).attr({fill:e});f.bars.push(g),i[c].css("background-color",e),b+=m+f.options.gap,g.hover(function(b){Storm.chartUtils.showTooltip(b.pageX,b.pageY,a.trim(Storm.chartUtils.getLegendLabel(h,c))+": <strong>"+d.value+"</stong>")},function(){Storm.chartUtils.hideTooltip()})}),b=0,a.each(g.values,function(a,c){var d=g.max&&c.value?k/g.max*c.value:0;f.bars[a].animate({bar:[b,d]},1e3,"bounce"),b+=m+f.options.gap}),j&&a(window).on("resize",function(){l=f.$el.width(),m=(l-(g.values.length-1)*f.options.gap)/g.values.length;var b=0;a.each(g.values,function(a,c){var d=g.max&&c.value?k/g.max*c.value:0;f.bars[a].animate({bar:[b,d]},10,"bounce"),b+=m+f.options.gap})})})};b.prototype.isFullWidth=function(){return this.options.hasOwnProperty("fullWidth")&&this.options.fullWidth},b.DEFAULTS={gap:2};var c=a.fn.barChart;a.fn.barChart=function(c){return this.each(function(){var d=a(this),e=d.data("oc.barChart"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("oc.barChart",new b(this,f))})},a.fn.barChart.Constructor=b,a.fn.barChart.noConflict=function(){return a.fn.barChart=c,this},a(document).on("render",function(){a("[data-control=chart-bar]").barChart()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c||{};var d=this.$el=a(b),e=this.size=void 0!==this.options.size?this.options.size:d.height(),f=e/2-1,g=f-f/3.5,h=Storm.chartUtils.loadListValues(a("ul",d)),i=Storm.chartUtils.createLegend(a("ul",d)),j=Storm.chartUtils.initLegendColorIndicators(i),k=this,l=a("<div/>").addClass("canvas").width(e).height(e);if(d.prepend(l),Raphael(l.get(0),e,e,function(){k.paper=this,k.segments=this.set(),k.paper.customAttributes.segment=function(a,b){var c=k.arcCoords(f,a),d=k.arcCoords(f,b),e=k.arcCoords(g,b),h=k.arcCoords(g,a),i=b-a>180,j=[["M",c.x,c.y],["A",f,f,0,+i,0,d.x,d.y],["L",e.x,e.y],["A",g,g,0,+i,1,h.x,h.y],["Z"]];return{path:j}},k.paper.circle(e/2,e/2,g+(f-g)/2).attr({"stroke-width":f-g-.5}).attr({stroke:Storm.chartUtils.defaultValueColor}),a.each(h.values,function(b,c){var d=void 0!==c.color?c.color:Storm.chartUtils.getColor(b),e=k.paper.path().attr({"stroke-width":0}).attr({segment:[0,0]}).attr({fill:d});k.segments.push(e),j[b].css("background-color",d),e.hover(function(d){Storm.chartUtils.showTooltip(d.pageX,d.pageY,a.trim(Storm.chartUtils.getLegendLabel(i,b))+": <strong>"+c.value+"</stong>")},function(){Storm.chartUtils.hideTooltip()})});var b=k.options.startAngle;a.each(h.values,function(a,c){var d=h.total&&c.value?360/h.total*c.value:0;360==d&&d--,k.segments[a].animate({segment:[b,b+d]},1e3,"bounce"),b+=d})}),this.options.hasOwnProperty("centerText")){var m=a("<span>").addClass("center").html(this.options.centerText);l.append(m)}};b.prototype.arcCoords=function(a,b){var c=Raphael.rad(b),d=this.size/2+a*Math.cos(c),e=this.size/2-a*Math.sin(c);return{x:d,y:e}},b.DEFAULTS={startAngle:45};var c=a.fn.pieChart;a.fn.pieChart=function(c){return this.each(function(){var d=a(this),e=d.data("oc.pieChart"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("oc.pieChart",new b(this,f))})},a.fn.pieChart.Constructor=b,a.fn.pieChart.noConflict=function(){return a.fn.pieChart=c,this},a(document).on("render",function(){a("[data-control=chart-pie]").pieChart()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){var d=(this.$el=a(b),this);this.options=c||{},this.$indicatorBar=a("<span/>").text(this.options.value+"%"),this.$indicatorOuter=a("<span/>").addClass("goal-meter-indicator").append(this.$indicatorBar),a("p",this.$el).first().before(this.$indicatorOuter),window.setTimeout(function(){d.update(d.options.value)},200)};b.prototype.update=function(a){this.$indicatorBar.css("height",a+"%")},b.DEFAULTS={value:50};var c=a.fn.goalMeter;a.fn.goalMeter=function(c){return this.each(function(){var d=a(this),e=d.data("oc.goalMeter"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e?e.update(c):d.data("oc.goalMeter",e=new b(this,f))})},a.fn.goalMeter.Constructor=b,a.fn.goalMeter.noConflict=function(){return a.fn.goalMeter=c,
this},a(document).on("render",function(){a("[data-control=goal-meter]").goalMeter()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$el=a(b);var d="TR"==this.$el.prop("tagName")?this.$el:this.$el.find("tr:has(td)");d.each(function(){var b=a(this).find(c.target).filter(function(){return!a(this).closest("td").hasClass(c.excludeClass)&&!a(this).hasClass(c.excludeClass)}).first();if(b.length){var d=b.attr("href"),e="function"==typeof b.get(0).onclick?b.get(0).onclick:null,f=b.is("[data-control=popup]"),g=b.is("[data-request]");a(this).find("td").not("."+c.excludeClass).click(function(c){a(document.body).hasClass("drag")||(e?e.apply(b.get(0)):g?b.request():f?b.popup():c.ctrlKey?window.open(d):window.location=d)}),a(this).addClass(c.linkedClass),b.hide().after(b.html())}})};b.DEFAULTS={target:"a",excludeClass:"nolink",linkedClass:"rowlink"};var c=a.fn.rowLink;a.fn.rowLink=function(c){var d=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=a(this),f=e.data("oc.rowlink"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f?"string"==typeof c&&f[c].apply(f,d):e.data("oc.rowlink",f=new b(this,g))})},a.fn.rowLink.Constructor=b,a.fn.rowLink.noConflict=function(){return a.fn.rowLink=c,this},a(document).on("render",function(){a('[data-control="rowlink"]').rowLink()})}(window.jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(c,d){this.$el=a(c),this.paused=!1,this.options=d||{},Storm.foundation.controlUtils.markDisposable(c),b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype.init=function(){this.$el.on("change",this.proxy(this.change)),this.$el.on("unchange.oc.changeMonitor",this.proxy(this.unchange)),this.$el.on("pause.oc.changeMonitor",this.proxy(this.pause)),this.$el.on("resume.oc.changeMonitor",this.proxy(this.resume)),this.$el.on("keyup input paste","input, textarea:not(.ace_text-input)",this.proxy(this.onInputChange)),a("input:not([type=hidden]), textarea:not(.ace_text-input)",this.$el).each(function(){a(this).data("oldval.oc.changeMonitor",a(this).val())}),this.options.windowCloseConfirm&&a(window).on("beforeunload",this.proxy(this.onBeforeUnload)),this.$el.one("dispose-control",this.proxy(this.dispose)),this.$el.trigger("ready.oc.changeMonitor")},d.prototype.dispose=function(){null!==this.$el&&(this.unregisterHandlers(),this.$el.removeData("oc.changeMonitor"),this.$el=null,this.options=null,c.dispose.call(this))},d.prototype.unregisterHandlers=function(){this.$el.off("change",this.proxy(this.change)),this.$el.off("unchange.oc.changeMonitor",this.proxy(this.unchange)),this.$el.off("pause.oc.changeMonitor ",this.proxy(this.pause)),this.$el.off("resume.oc.changeMonitor ",this.proxy(this.resume)),this.$el.off("keyup input paste","input, textarea:not(.ace_text-input)",this.proxy(this.onInputChange)),this.$el.off("dispose-control",this.proxy(this.dispose)),this.options.windowCloseConfirm&&a(window).off("beforeunload",this.proxy(this.onBeforeUnload))},d.prototype.change=function(b,c){if(!this.paused){if(!c){var d=a(b.target).attr("type");if("text"==d||"password"==d)return}this.$el.hasClass("oc-data-changed")||(this.$el.trigger("changed.oc.changeMonitor"),this.$el.addClass("oc-data-changed"))}},d.prototype.unchange=function(){this.paused||this.$el.hasClass("oc-data-changed")&&(this.$el.trigger("unchanged.oc.changeMonitor"),this.$el.removeClass("oc-data-changed"))},d.prototype.onInputChange=function(b){if(!this.paused){var c=a(b.target);c.data("oldval.oc.changeMonitor")!=c.val()&&(c.data("oldval.oc.changeMonitor",c.val()),this.change(b,!0))}},d.prototype.pause=function(){this.paused=!0},d.prototype.resume=function(){this.paused=!1},d.prototype.onBeforeUnload=function(){if(a.contains(document.documentElement,this.$el.get(0))&&this.$el.hasClass("oc-data-changed"))return this.options.windowCloseConfirm},d.DEFAULTS={windowCloseConfirm:!1};var e=a.fn.changeMonitor;a.fn.changeMonitor=function(b){return this.each(function(){var c=a(this),e=c.data("oc.changeMonitor"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);e||c.data("oc.changeMonitor",e=new d(this,f))})},a.fn.changeMonitor.Constructor=d,a.fn.changeMonitor.noConflict=function(){return a.fn.changeMonitor=e,this},a(document).on("render",function(){a("[data-change-monitor]").changeMonitor()})}(window.jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(c,d){if(!d.hotkey)throw new Error("No hotkey has been defined.");this.$el=a(c),this.$target=a(d.hotkeyTarget),this.options=d||{},this.keyConditions=[],this.keyMap=null,Storm.foundation.controlUtils.markDisposable(c),b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype.dispose=function(){null!==this.$el&&(this.unregisterHandlers(),this.$el.removeData("oc.hotkey"),this.$target=null,this.$el=null,this.keyConditions=null,this.keyMap=null,this.options=null,c.dispose.call(this))},d.prototype.init=function(){this.initKeyMap();for(var a=this.options.hotkey.toLowerCase().split(","),b=0,c=a.length;b<c;b++){var d=this.trim(a[b]);this.keyConditions.push(this.makeCondition(d))}this.$target.on("keydown",this.proxy(this.onKeyDown)),this.$el.one("dispose-control",this.proxy(this.dispose))},d.prototype.unregisterHandlers=function(){this.$target.off("keydown",this.proxy(this.onKeyDown)),this.$el.off("dispose-control",this.proxy(this.dispose))},d.prototype.makeCondition=function(a){for(var b={shift:!1,ctrl:!1,cmd:!1,alt:!1,specific:-1},c=a.split("+"),d=0,e=c.length;d<e;d++)switch(c[d]){case"shift":b.shift=!0;break;case"ctrl":b.ctrl=!0;break;case"command":case"cmd":case"meta":b.cmd=!0;break;case"alt":b.alt=!0}return b.specific=this.keyMap[c[c.length-1]],"undefined"==typeof b.specific&&(b.specific=c[c.length-1].toUpperCase().charCodeAt()),b},d.prototype.initKeyMap=function(){this.keyMap={esc:27,tab:9,space:32,"return":13,enter:13,backspace:8,scroll:145,capslock:20,numlock:144,pause:19,"break":19,insert:45,home:36,"delete":46,suppr:46,end:35,pageup:33,pagedown:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}},d.prototype.trim=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},d.prototype.testConditions=function(a){for(var b=0,c=this.keyConditions.length;b<c;b++){var d=this.keyConditions[b];if(a.which==d.specific&&a.originalEvent.shiftKey==d.shift&&a.originalEvent.ctrlKey==d.ctrl&&a.originalEvent.metaKey==d.cmd&&a.originalEvent.altKey==d.alt)return!0}return!1},d.prototype.onKeyDown=function(a){if(this.testConditions(a)){if(this.options.hotkeyVisible&&!this.$el.is(":visible"))return;if(this.options.callback)return this.options.callback(this.$el,a.currentTarget)}},d.DEFAULTS={hotkey:null,hotkeyTarget:"html",hotkeyVisible:!0,callback:function(a){return a.trigger("click"),!1}};var e=a.fn.hotKey;a.fn.hotKey=function(b){var c=arguments;return this.each(function(){var e=a(this),f=e.data("oc.hotkey"),g=a.extend({},d.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("oc.hotkey",f=new d(this,g)),"string"==typeof b&&f[b].apply(f,c)})},a.fn.hotKey.Constructor=d,a.fn.hotKey.noConflict=function(){return a.fn.hotKey=e,this},a(document).on("render",function(){a("[data-hotkey]").hotKey()})}(window.jQuery),+function(a){"use strict";function b(a,b){x.Initialize(),a=a.replace(x.regex,function(a){return x.map[a]});var c=new RegExp("\\b("+v.join("|")+")\\b","gi");return a=a.replace(c,""),a=a.toLowerCase(),a=a.replace(/(\b|-)\w/g,function(a){return a.toUpperCase()}),a=a.replace(/[^-\w\s]/g,""),a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/[-\s]+/g,""),a=a.substr(0,1).toLowerCase()+a.substr(1),a.substring(0,b)}function c(a,b){x.Initialize(),a=a.replace(x.regex,function(a){return x.map[a]});var c=new RegExp("\\b("+v.join("|")+")\\b","gi");return a=a.replace(c,""),a=a.replace(/[^-\w\s]/g,""),a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/[-\s]+/g,"-"),a=a.toLowerCase(),a.substring(0,b)}var d={"Á":"A","À":"A","Ã":"A","Ả":"A","Ạ":"A","Ắ":"A","Ằ":"A","Ẵ":"A","Ẳ":"A","Ặ":"A","Ấ":"A","Ầ":"A","Ẫ":"A","Ẩ":"A","Ậ":"A","Đ":"D","É":"E","È":"E","Ẽ":"E","Ẻ":"E","Ẹ":"E","Ế":"E","Ề":"E","Ễ":"E","Ể":"E","Ệ":"E","Ó":"O","Ò":"O","Ỏ":"O","Õ":"O","Ọ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Í":"I","Ì":"I","Ỉ":"I","Ĩ":"I","Ị":"I","Ú":"U","Ù":"U","Ủ":"U","Ũ":"U","Ụ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ý":"Y","Ỳ":"Y","Ỷ":"Y","Ỹ":"Y","Ỵ":"Y","á":"a","à":"a","ã":"a","ả":"a","ạ":"a","ắ":"a","ằ":"a","ẵ":"a","ẳ":"a","ặ":"a","ấ":"a","ầ":"a","ẫ":"a","ẩ":"a","ậ":"a","đ":"d","é":"e","è":"e","ẽ":"e","ẻ":"e","ẹ":"e","ế":"e","ề":"e","ễ":"e","ể":"e","ệ":"e","ó":"o","ò":"o","ỏ":"o","õ":"o","ọ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","í":"i","ì":"i","ỉ":"i","ĩ":"i","ị":"i","ú":"u","ù":"u","ủ":"u","ũ":"u","ụ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ý":"y","ỳ":"y","ỷ":"y","ỹ":"y","ỵ":"y"},e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","Ÿ":"Y","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ō":"o","œ":"oe","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y"},f={"©":"(c)"},g={"α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y"},h={"ş":"s","Ş":"S","ı":"i","İ":"I","ç":"c","Ç":"C","ü":"u","Ü":"U","ö":"o","Ö":"O","ğ":"g","Ğ":"G"},i={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya"},j={"Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g"},k={"č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z"},l={"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ó":"O","Ś":"S","Ź":"Z","Ż":"Z"},m={"ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"I","Ķ":"K","Ļ":"L","Ņ":"N","Š":"S","Ū":"U","Ž":"Z"},n={"أ":"a","ب":"b","ت":"t","ث":"th","ج":"g","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"d","ط":"t","ظ":"th","ع":"aa","غ":"gh","ف":"f","ق":"k","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"o","ي":"y"},o={"آ":"a","ا":"a","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"gh","ی":"y"},p={"ą":"a","č":"c","ę":"e","ė":"e","į":"i","š":"s","ų":"u","ū":"u","ž":"z","Ą":"A","Č":"C","Ę":"E","Ė":"E","Į":"I","Š":"S","Ų":"U","Ū":"U","Ž":"Z"},q={"ђ":"dj","ј":"j","љ":"lj","њ":"nj","ћ":"c","џ":"dz","đ":"dj","Ђ":"Dj","Ј":"j","Љ":"Lj","Њ":"Nj","Ћ":"C","Џ":"Dz","Đ":"Dj"},r={"ç":"c","ə":"e","ğ":"g","ı":"i","ö":"o","ş":"s","ü":"u","Ç":"C","Ə":"E","Ğ":"G","İ":"I","Ö":"O","Ş":"S","Ü":"U"},s={"ă":"a","â":"a","î":"i","ș":"s","ț":"t","Ă":"A","Â":"A","Î":"I","Ș":"S","Ț":"T"},t={de:{"Ä":"AE","Ö":"OE","Ü":"UE","ä":"ae","ö":"oe","ü":"ue"}},u=[d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s],v=["a","an","as","at","before","but","by","for","from","is","in","into","like","of","off","on","onto","per","since","than","the","this","that","to","up","via","with"],w=a('meta[name="backend-locale"]').attr("content"),x={Initialize:function(){if(!x.map){x.map={},x.chars=[],"object"==typeof t[w]&&u.push(t[w]);for(var a=0;a<u.length;a++){var b=u[a];for(var c in b)b.hasOwnProperty(c)&&(x.map[c]=b[c])}for(var d in x.map)x.map.hasOwnProperty(d)&&x.chars.push(d);x.regex=new RegExp(x.chars.join("|"),"g")}}},y=function(b,c){var d=this.$el=a(b);this.options=c||{},this.cancelled=!1;var e=void 0!==c.inputPresetClosestParent?d.closest(c.inputPresetClosestParent):void 0,f=this,g="";void 0!==c.inputPresetPrefixInput&&(g=a(c.inputPresetPrefixInput,e).val()),void 0===g&&(g=""),d.val().length&&d.val()!=g||(d.val(g).trigger("oc.inputPreset.afterUpdate"),this.$src=a(c.inputPreset,e),this.$src.on("keyup",function(){f.cancelled||d.val(g+f.formatValue()).trigger("oc.inputPreset.afterUpdate")}),this.$el.on("change",function(){f.cancelled=!0}))};y.prototype.formatNamespace=function(){var a=b(this.$src.val());return a.substr(0,1).toUpperCase()+a.substr(1)},y.prototype.formatValue=function(){if("exact"==this.options.inputPresetType)return this.$src.val();if("namespace"==this.options.inputPresetType)return this.formatNamespace();if("camel"==this.options.inputPresetType)var a=b(this.$src.val());else var a=c(this.$src.val());return"url"==this.options.inputPresetType&&(a="/"+a),a.replace(/\s/gi,"-")},y.DEFAULTS={inputPreset:"",inputPresetType:"slug",inputPresetClosestParent:void 0,inputPresetPrefixInput:void 0};var z=a.fn.inputPreset;a.fn.inputPreset=function(b){return this.each(function(){var c=a(this),d=c.data("oc.inputPreset"),e=a.extend({},y.DEFAULTS,c.data(),"object"==typeof b&&b);d||c.data("oc.inputPreset",d=new y(this,e))})},a.fn.inputPreset.Constructor=y,a.fn.inputPreset.noConflict=function(){return a.fn.inputPreset=z,this},a(document).on("render",function(){a("[data-input-preset]").inputPreset()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){var d=this.$el=a(b);if(this.options=c||{},this.options.triggerCondition===!1)throw new Error("Trigger condition is not specified.");if(this.options.trigger===!1)throw new Error("Trigger selector is not specified.");if(this.options.triggerAction===!1)throw new Error("Trigger action is not specified.");if(this.triggerCondition=this.options.triggerCondition,0==this.options.triggerCondition.indexOf("value")){var e=this.options.triggerCondition.match(/[^[\]]+(?=])/g);this.triggerCondition="value",this.triggerConditionValue=e?e:[""]}this.triggerParent=void 0!==this.options.triggerClosestParent?d.closest(this.options.triggerClosestParent):void 0,"checked"!=this.triggerCondition&&"unchecked"!=this.triggerCondition&&"value"!=this.triggerCondition||a(document).on("change",this.options.trigger,a.proxy(this.onConditionChanged,this));var f=this;d.on("oc.triggerOn.update",function(a){a.stopPropagation(),f.onConditionChanged()}),f.onConditionChanged()};b.prototype.onConditionChanged=function(){if("checked"==this.triggerCondition)this.updateTarget(!!a(this.options.trigger+":checked",this.triggerParent).length);else if("unchecked"==this.triggerCondition)this.updateTarget(!a(this.options.trigger+":checked",this.triggerParent).length);else if("value"==this.triggerCondition){var b,c="";b=a(this.options.trigger,this.triggerParent).not("input[type=checkbox], input[type=radio], input[type=button], input[type=submit]"),b.length||(b=a(this.options.trigger,this.triggerParent).not(":not(input[type=checkbox]:checked, input[type=radio]:checked)")),b.length&&(c=b.val()),this.updateTarget(a.inArray(c,this.triggerConditionValue)!=-1)}},b.prototype.updateTarget=function(b){var c=this,d=this.options.triggerAction.split("|");a.each(d,function(a,d){c.updateTargetAction(d,b)}),a(window).trigger("resize"),this.$el.trigger("oc.triggerOn.afterUpdate",b)},b.prototype.updateTargetAction=function(a,b){"show"==a?this.$el.toggleClass("hide",!b).trigger("hide.oc.triggerapi",[!b]):"hide"==a?this.$el.toggleClass("hide",b).trigger("hide.oc.triggerapi",[b]):"enable"==a?this.$el.prop("disabled",!b).toggleClass("control-disabled",!b).trigger("disable.oc.triggerapi",[!b]):"disable"==a?this.$el.prop("disabled",b).toggleClass("control-disabled",b).trigger("disable.oc.triggerapi",[b]):"empty"==a&&b&&(this.$el.not("input[type=checkbox], input[type=radio], input[type=button], input[type=submit]").val(""),this.$el.not(":not(input[type=checkbox], input[type=radio])").prop("checked",!1),this.$el.trigger("empty.oc.triggerapi").trigger("change")),"show"!=a&&"hide"!=a||this.fixButtonClasses()},b.prototype.fixButtonClasses=function(){var a=this.$el.closest(".btn-group");a.length>0&&this.$el.is(":last-child")&&this.$el.prev().toggleClass("last",this.$el.hasClass("hide"))},b.DEFAULTS={triggerAction:!1,triggerCondition:!1,triggerClosestParent:void 0,trigger:!1};var c=a.fn.triggerOn;a.fn.triggerOn=function(c){return this.each(function(){var d=a(this),e=d.data("oc.triggerOn"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("oc.triggerOn",e=new b(this,f))})},a.fn.triggerOn.Constructor=b,a.fn.triggerOn.noConflict=function(){return a.fn.triggerOn=c,this},a(document).on("render",function(){a("[data-trigger]").triggerOn()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$el=a(b),this.init()};b.DEFAULTS={dragClick:!1},b.prototype.init=function(){this.$el.prop("draggable",!0),this.textValue=this.$el.data("textValue"),this.$el.on("dragstart",a.proxy(this.handleDragStart,this)),this.$el.on("drop",a.proxy(this.handleDrop,this)),this.$el.on("dragend",a.proxy(this.handleDragEnd,this)),this.options.dragClick&&(this.$el.on("click",a.proxy(this.handleClick,this)),this.$el.on("mouseover",a.proxy(this.handleMouseOver,this)))},b.prototype.handleDragStart=function(a){var b=a.originalEvent;b.dataTransfer.effectAllowed="all",b.dataTransfer.setData("text/plain",this.textValue),this.$el.css({opacity:.5}).addClass("dragvalue-dragging")},b.prototype.handleDrop=function(a){return a.stopPropagation(),!1},b.prototype.handleDragEnd=function(a){this.$el.css({opacity:1}).removeClass("dragvalue-dragging")},b.prototype.handleMouseOver=function(a){var b=document.activeElement;b&&(b.isContentEditable||"input"==b.tagName.toLowerCase()&&"text"==b.type||"textarea"==b.tagName.toLowerCase())&&(this.lastElement=b)},b.prototype.handleClick=function(b){if(this.lastElement){var c=a(this.lastElement);return c.hasClass("ace_text-input")?this.handleClickCodeEditor(b,c):this.lastElement.isContentEditable?this.handleClickContentEditable():void this.insertAtCaret(this.lastElement,this.textValue)}},b.prototype.handleClickCodeEditor=function(a,b){var c=b.closest("[data-control=codeeditor]");c.length&&c.codeEditor("getEditorObject").insert(this.textValue)},b.prototype.handleClickContentEditable=function(){var a,b;window.getSelection?(a=window.getSelection(),a.getRangeAt&&a.rangeCount&&(b=a.getRangeAt(0),b.deleteContents(),b.insertNode(document.createTextNode(this.textValue)))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=this.textValue)},b.prototype.insertAtCaret=function(a,b){if(document.selection){a.focus();var c=document.selection.createRange();c.text=b,a.focus()}else if(a.selectionStart||"0"==a.selectionStart){var d=a.selectionStart,e=a.selectionEnd,f=a.scrollTop;a.value=a.value.substring(0,d)+b+a.value.substring(e,a.value.length),a.focus(),a.selectionStart=d+b.length,a.selectionEnd=d+b.length,a.scrollTop=f}else a.value+=b,a.focus()};var c=a.fn.dragValue;a.fn.dragValue=function(c){var d,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var f=a(this),g=f.data("oc.dragvalue"),h=a.extend({},b.DEFAULTS,f.data(),"object"==typeof c&&c);if(g||f.data("oc.dragvalue",g=new b(this,h)),"string"==typeof c&&(d=g[c].apply(g,e)),"undefined"!=typeof d)return!1}),d?d:this},a.fn.dragValue.Constructor=b,a.fn.dragValue.noConflict=function(){return a.fn.dragValue=c,this},a(document).on("render",function(){a('[data-control="dragvalue"]').dragValue()})}(window.jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(c,d){this.$el=a(c),this.options=d||{},this.cursorAdjustment=null,Storm.foundation.controlUtils.markDisposable(c),b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype.init=function(){this.$el.one("dispose-control",this.proxy(this.dispose));var b=this,c={},d={onDragStart:this.proxy(this.onDragStart),onDrag:this.proxy(this.onDrag),onDrop:this.proxy(this.onDrop)};this.options.onDragStart&&(c.onDragStart=function(a,c,e,f){b.options.onDragStart(a,c,d.onDragStart,f)}),this.options.onDrag&&(c.onDrag=function(a,c,e,f){b.options.onDrag(a,c,d.onDrag,f)}),this.options.onDrop&&(c.onDrop=function(a,c,e,f){b.options.onDrop(a,c,d.onDrop,f)}),this.$el.jqSortable(a.extend({},d,this.options,c))},d.prototype.dispose=function(){this.$el.jqSortable("destroy"),this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.removeData("oc.sortable"),this.$el=null,this.options=null,this.cursorAdjustment=null,c.dispose.call(this)},d.prototype.onDragStart=function(b,c,d,e){var f=b.offset(),g=c.rootGroup.pointer;g?this.cursorAdjustment={left:g.left-f.left,top:g.top-f.top}:this.cursorAdjustment=null,this.options.tweakCursorAdjustment&&(this.cursorAdjustment=this.options.tweakCursorAdjustment(this.cursorAdjustment)),b.css({height:b.height(),width:b.width()}),b.addClass("dragged"),a("body").addClass("dragging"),this.$el.addClass("dragging"),this.options.useAnimation&&b.data("oc.animated",!0),this.options.usePlaceholderClone&&a(c.rootGroup.placeholder).html(b.html()),this.options.useDraggingClone||b.hide()},d.prototype.onDrag=function(a,b,c,d){this.cursorAdjustment?a.css({left:b.left-this.cursorAdjustment.left,top:b.top-this.cursorAdjustment.top}):a.css(b)},d.prototype.onDrop=function(b,c,d,e){b.removeClass("dragged").removeAttr("style"),a("body").removeClass("dragging"),this.$el.removeClass("dragging"),b.data("oc.animated")&&b.hide().slideDown(200)},d.prototype.enable=function(){this.$el.jqSortable("enable")},d.prototype.disable=function(){this.$el.jqSortable("disable")},d.prototype.refresh=function(){this.$el.jqSortable("refresh")},d.prototype.serialize=function(){this.$el.jqSortable("serialize")},d.prototype.destroy=function(){this.dispose()},d.prototype.destroyGroup=function(){var a=this.$el.data("jqSortable");a.group&&a.group._destroy()},d.DEFAULTS={useAnimation:!1,usePlaceholderClone:!1,useDraggingClone:!0,tweakCursorAdjustment:null};var e=a.fn.sortable;a.fn.sortable=function(b){var c=arguments;return this.each(function(){var e=a(this),f=e.data("oc.sortable"),g=a.extend({},d.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("oc.sortable",f=new d(this,g)),"string"==typeof b&&f[b].apply(f,c)})},a.fn.sortable.Constructor=d,a.fn.sortable.noConflict=function(){return a.fn.sortable=e,this}}(window.jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(c,e){function f(b){l=b[p],m=n.options.vertical?j.scrollTop():j.scrollLeft(),Modernizr.touch?(a(window).on("touchmove.dragScroll",function(a){var b=a.originalEvent;g(b.touches[0]),a.preventDefault()}),a(window).on("touchend.dragScroll",function(a){h()})):(a(window).on("mousemove.dragScroll",function(a){return g(a),!1}),a(window).on("mouseup.dragScroll",function(a){var c=b.pageX==a.pageX&&b.pageY==a.pageY;return h(c),!1}))}function g(b){var c=b[p],d=l-c;Math.abs(d)>3&&(o||(o=!0,j.trigger("start.oc.dragScroll"),n.options.start(),a(document.body).addClass(n.options.dragClass)),n.options.vertical?j.scrollTop(m+d):j.scrollLeft(m+d),j.trigger("drag.oc.dragScroll"),n.options.drag())}function h(b){a(window).off(".dragScroll"),o=!1,b?a(document.body).removeClass(n.options.dragClass):n.fixScrollClasses(),window.setTimeout(function(){b||(a(document.body).removeClass(n.options.dragClass),j.trigger("stop.oc.dragScroll"),n.options.stop(),n.fixScrollClasses())},100)}function i(a){m=n.options.vertical?k.scrollTop:k.scrollLeft,n.options.vertical?j.scrollTop(m+a):j.scrollLeft(m+a);var b=n.options.vertical?k.scrollTop!=m:k.scrollLeft!=m;return j.trigger("drag.oc.dragScroll"),n.options.drag(),b&&(void 0!==n.wheelUpdateTimer&&n.wheelUpdateTimer!==!1&&window.clearInterval(n.wheelUpdateTimer),n.wheelUpdateTimer=window.setTimeout(function(){n.wheelUpdateTimer=!1,n.fixScrollClasses()},100)),b}this.options=a.extend({},d.DEFAULTS,e);var j=a(c),k=j.get(0),l=0,m=0,n=this,o=!1,p=this.options.vertical?"pageY":"pageX";this.el=j,this.scrollClassContainer=this.options.scrollClassContainer?a(this.options.scrollClassContainer):j,this.isScrollable=!0,b.call(this),this.options.scrollMarkerContainer&&a(this.options.scrollMarkerContainer).append(a('<span class="before scroll-marker"></span><span class="after scroll-marker"></span>'));var q=this.options.scrollSelector?a(this.options.scrollSelector,j):j;q.mousewheel(function(a){if(n.options.useScroll){var b,c=a.deltaFactor*a.deltaX,d=a.deltaFactor*a.deltaY;return b=!c&&n.options.useComboScroll?d*-1:!d&&n.options.useComboScroll?c:n.options.vertical?d*-1:c,!i(b)}}),this.options.useDrag&&j.on("mousedown.dragScroll",this.options.dragSelector,function(a){if((!a.target||"INPUT"!==a.target.tagName)&&n.isScrollable)return f(a),!1}),j.on("touchstart.dragScroll",this.options.dragSelector,function(a){var b=a.originalEvent;1==b.touches.length&&(f(b.touches[0]),a.stopPropagation())}),j.on("click.dragScroll",function(){if(a(document.body).hasClass(n.options.dragClass))return!1}),a(document).on("ready",this.proxy(this.fixScrollClasses)),a(window).on("resize",this.proxy(this.fixScrollClasses)),this.fixScrollClasses()};d.prototype=Object.create(c),d.prototype.constructor=d,d.DEFAULTS={vertical:!1,useDrag:!0,useScroll:!0,useComboScroll:!0,scrollClassContainer:!1,scrollMarkerContainer:!1,scrollSelector:null,dragSelector:null,dragClass:"drag",start:function(){},drag:function(){},stop:function(){}},d.prototype.fixScrollClasses=function(){var a=this.isStart(),b=this.isEnd();this.scrollClassContainer.toggleClass("scroll-before",!a),this.scrollClassContainer.toggleClass("scroll-after",!b),this.scrollClassContainer.toggleClass("scroll-active-before",this.isActiveBefore()),this.scrollClassContainer.toggleClass("scroll-active-after",this.isActiveAfter()),this.isScrollable=!a||!b},d.prototype.isStart=function(){return this.options.vertical?this.el.scrollTop()<=0:this.el.scrollLeft()<=0},d.prototype.isEnd=function(){return this.options.vertical?this.el[0].scrollHeight-(this.el.scrollTop()+this.el.height())<=0:this.el[0].scrollWidth-(this.el.scrollLeft()+this.el.width())<=0},d.prototype.goToStart=function(){return this.options.vertical?this.el.scrollTop(0):this.el.scrollLeft(0)},d.prototype.isActiveAfter=function(){var b=a(".active",this.el);return 0!=b.length&&(this.options.vertical?b.get(0).offsetTop>this.el.scrollTop()+this.el.height():b.get(0).offsetLeft>this.el.scrollLeft()+this.el.width())},d.prototype.isActiveBefore=function(){var b=a(".active",this.el);return 0!=b.length&&(this.options.vertical?b.get(0).offsetTop+b.height()<this.el.scrollTop():b.get(0).offsetLeft+b.width()<this.el.scrollLeft())},d.prototype.goToElement=function(b,c,d){var e=a(b);if(e.length){var f=this,g={duration:300,queue:!1,complete:function(){f.fixScrollClasses(),void 0!==c&&c()}};g=a.extend(g,d||{});var h=0,i=!1;this.options.vertical?(h=e.get(0).offsetTop-this.el.scrollTop(),h<0?(this.el.animate({scrollTop:e.get(0).offsetTop},g),i=!0):(h=e.get(0).offsetTop-(this.el.scrollTop()+this.el.height()),h>0&&(this.el.animate({scrollTop:e.get(0).offsetTop+e.height()-this.el.height()},g),i=!0))):(h=e.get(0).offsetLeft-this.el.scrollLeft(),h<0?(this.el.animate({scrollLeft:e.get(0).offsetLeft},g),i=!0):(h=e.get(0).offsetLeft+e.width()-(this.el.scrollLeft()+this.el.width()),h>0&&(this.el.animate({scrollLeft:e.get(0).offsetLeft+e.width()-this.el.width()},g),i=!0))),i||void 0===c||c()}},d.prototype.dispose=function(){this.scrollClassContainer=null,a(document).off("ready",this.proxy(this.fixScrollClasses)),a(window).off("resize",this.proxy(this.fixScrollClasses)),this.el.off(".dragScroll"),this.el.removeData("oc.dragScroll"),this.el=null,c.dispose.call(this)};var e=a.fn.dragScroll;a.fn.dragScroll=function(b){var c=arguments;return this.each(function(){var e=a(this),f=e.data("oc.dragScroll"),g="object"==typeof b&&b;if(f||e.data("oc.dragScroll",f=new d(this,g)),"string"==typeof b){for(var h=[],i=1;i<c.length;i++)h.push(c[i]);f[b].apply(f,h)}})},a.fn.dragScroll.Constructor=d,a.fn.dragScroll.noConflict=function(){return a.fn.dragScroll=e,this}}(window.jQuery),+function(a){"use strict";var b=function(b,c){var d=this.$el=a(b);this.options=c||{},this.$tabsContainer=a(".nav-tabs:first",d),this.$pagesContainer=a(".tab-content:first",d),this.tabId="tabs"+d.parents().length+Math.round(1e3*Math.random()),void 0!==this.options.closable&&this.options.closable!==!1&&d.attr("data-closable",""),this.init()};b.prototype.init=function(){var b=this;this.options.slidable=void 0!==this.options.slidable&&this.options.slidable!==!1,a("> li",this.$tabsContainer).each(function(a){b.initTab(this)}),this.$el.on("close.oc.tab",function(c,d){c.preventDefault();var e=void 0!==d&&void 0!==d.force&&d.force;b.closeTab(a(c.target).closest("ul.nav-tabs > li, div.tab-content > div"),e)}),this.$el.on("toggleCollapse.oc.tab",function(b,c){b.preventDefault(),a(b.target).closest("div.tab-content > div").toggleClass("collapsed")}),this.$el.on("modified.oc.tab",function(c){c.preventDefault(),b.modifyTab(a(c.target).closest("ul.nav-tabs > li, div.tab-content > div"))}),this.$el.on("unmodified.oc.tab",function(c){c.preventDefault(),b.unmodifyTab(a(c.target).closest("ul.nav-tabs > li, div.tab-content > div"))}),this.$tabsContainer.on("shown.bs.tab","li",function(){a(window).trigger("oc.updateUi");var b=a("> a",this).data("tabUrl");b&&window.history.replaceState({},"Tab link reference",b)}),this.options.slidable&&this.$pagesContainer.touchwipe({wipeRight:function(){b.prev()},wipeLeft:function(){b.next()},preventDefaultEvents:!1,min_move_x:60}),this.$tabsContainer.toolbar({scrollClassContainer:this.$el}),this.updateClasses()},b.prototype.initTab=function(b){var c=a(">li",this.$tabsContainer),d=c.index(b),e=(new Date).getTime(),f=this.tabId+"-tab-"+d+e,g=a("a",b);g.data("target","#"+f).attr("data-target","#"+f).attr("data-toggle","tab"),g.attr("title")||g.attr("title",g.text());var h=g.html();g.html(""),g.append(a('<span class="title"></span>').append(a("<span></span>").html(h)));var i=a("> .tab-pane",this.$pagesContainer).eq(d).attr("id",f);a("span.tab-close",b).length||a(b).append(a('<span class="tab-close"><i>&times;</i></span>').click(function(){return a(this).trigger("close.oc.tab"),!1})),i.data("tab",b),this.$el.trigger("initTab.oc.tab",[{pane:i,tab:b}])},b.prototype.addTab=function(b,c,d,e){var f=this.generateTitleText(b,-1),g=a("<a/>").attr("href","javascript:;").text(f),h=a("<li/>"),i=a("<div>").html(c).addClass("tab-pane");g.attr("title",b),h.append(g),this.$tabsContainer.append(h),this.$pagesContainer.append(i),void 0!==e&&g.addClass(e),void 0!==d&&h.attr("data-tab-id",d),void 0!==this.options.paneClasses&&i.addClass(this.options.paneClasses),this.initTab(h),g.tab("show"),a(window).trigger("resize"),this.$tabsContainer.dragScroll("goToElement",h);var j=a("[default-focus]",i);j.is(":visible")&&j.focus(),this.updateClasses()},b.prototype.updateTab=function(b,c,d){var e=this.findTabIndex(b);if(e!=-1){var f=this.generateTitleText(c,-1),g=a("> li",this.$tabsContainer).eq(e),h=a("> div",this.$pagesContainer).eq(e),i=a("a",g);i.text(f).attr("title",c),h.html(d),this.initTab(g),this.updateClasses()}},b.prototype.generateTitleText=function(a,b){var c=a;return this.options.titleAsFileNames&&(c=a.replace(/^.*[\\\/]/,"")),this.options.maxTitleSymbols&&c.length>this.options.maxTitleSymbols&&(c="..."+c.substring(c.length-this.options.maxTitleSymbols)),
c},b.prototype.closeTab=function(b,c){var d=this.findTabIndex(b);if(d!=-1){var e=a("> li",this.$tabsContainer).eq(d),f=a("> div",this.$pagesContainer).eq(d),g=e.hasClass("active"),h=void 0!==e.attr("data-modified");if(!h||void 0===this.options.closeConfirmation||c===!0||confirm(this.options.closeConfirmation)){var i=a.Event("beforeClose.oc.tab",{relatedTarget:f});this.$el.trigger(i),i.isDefaultPrevented()||(Storm.foundation.controlUtils.disposeControls(f.get(0)),f.remove(),e.remove(),g&&a("> li > a",this.$tabsContainer).eq(d-1).tab("show"),0==a("> li > a",this.$tabsContainer).length&&this.$el.trigger("afterAllClosed.oc.tab"),this.$el.trigger("closed.oc.tab",[e,f]),a(window).trigger("resize"),this.updateClasses())}}},b.prototype.updateClasses=function(){this.$tabsContainer.children().length>0?this.$el.addClass("has-tabs"):this.$el.removeClass("has-tabs")},b.prototype.modifyTab=function(b){var c=this.findTabIndex(b);c!=-1&&(a("> li",this.$tabsContainer).eq(c).attr("data-modified",""),a("> div",this.$pagesContainer).eq(c).attr("data-modified",""))},b.prototype.unmodifyTab=function(b){var c=this.findTabIndex(b);c!=-1&&(a("> li",this.$tabsContainer).eq(c).removeAttr("data-modified"),a("> div",this.$pagesContainer).eq(c).removeAttr("data-modified"))},b.prototype.findTabIndex=function(b){var c=b;void 0===b&&(c=a("li.active",this.$tabsContainer));var d=this.$pagesContainer;return a(c).parent().hasClass("nav-tabs")&&(d=this.$tabsContainer),d.children().index(a(c))},b.prototype.findTabFromPane=function(b){var c="#"+a(b).attr("id"),d=a('[data-target="'+c+'"]',this.$tabsContainer);return d},b.prototype.findPaneFromTab=function(b){var c=a(b).find("> a").data("target"),d=this.$pagesContainer.find(c);return d},b.prototype.goTo=function(b){var c=a('[data-tab-id="'+b+'" ]',this.$tabsContainer);if(0==c.length)return!1;var d=this.findTabIndex(c);return d!=-1&&(this.goToIndex(d),this.$tabsContainer.dragScroll("goToElement",c),!0)},b.prototype.goToPane=function(b){var c=a(b),d=this.findTabFromPane(c);if(0!=c.length){c.removeClass("collapsed");var e=this.findTabIndex(c);return e!=-1&&(this.goToIndex(e),d.length>0&&this.$tabsContainer.dragScroll("goToElement",d),!0)}},b.prototype.goToElement=function(a){return this.goToPane(a.closest(".tab-pane"))},b.prototype.findByIdentifier=function(b){return a('[data-tab-id="'+b+'" ]',this.$tabsContainer)},b.prototype.updateIdentifier=function(b,c){var d=this.findTabIndex(b);d!=-1&&a("> li",this.$tabsContainer).eq(d).attr("data-tab-id",c)},b.prototype.updateTitle=function(b,c){var d=this.findTabIndex(b);if(d!=-1){var e=this.generateTitleText(c,d),f=a("> li > a span.title",this.$tabsContainer).eq(d);f.attr("title",c),f.text(e)}},b.prototype.goToIndex=function(b){a("> li > a",this.$tabsContainer).eq(b).tab("show")},b.prototype.prev=function(){var a=this.findTabIndex();a<=0||this.goToIndex(a-1)},b.prototype.next=function(){var a=this.findTabIndex();a!=-1&&this.goToIndex(a+1)},b.DEFAULTS={};var c=a.fn.ocTab;a.fn.ocTab=function(c){var d=arguments;return this.each(function(){var e=a(this),f=e.data("oc.tab"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);if(f||e.data("oc.tab",f=new b(this,g)),"string"==typeof c){for(var h=[],i=1;i<d.length;i++)h.push(d[i]);f[c].apply(f,h)}})},a.fn.ocTab.Constructor=b,a.fn.ocTab.noConflict=function(){return a.fn.ocTab=c,this},a(document).on("render",function(){a("[data-control=tab]").ocTab()}),a(window).on("ajaxInvalidField",function(b,c,d,e,f){if(f){b.preventDefault();var g=a(c);g.closest("[data-control=tab]").ocTab("goToElement",g),g.focus()}})}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.inspector&&(Storm.inspector={});var b=Storm.foundation.base,c=b.prototype,d=function(c,e,f,g,h,i,j,k){if(void 0===g)throw new Error("Inspector surface unique ID should be defined.");this.options=a.extend({},d.DEFAULTS,"object"==typeof h&&h),this.rawProperties=e,this.parsedProperties=Storm.inspector.engine.processPropertyGroups(e),this.container=c,this.inspectorUniqueId=g,this.values=null!==f?f:{},this.originalValues=a.extend(!0,{},this.values),this.idCounter=1,this.popupCounter=0,this.parentSurface=i,this.propertyName=k,this.editors=[],this.externalParameterEditors=[],this.tableContainer=null,this.groupManager=null,this.group=null,void 0!==j&&(this.group=j),this.parentSurface||(this.groupManager=new Storm.inspector.groupManager(this.inspectorUniqueId)),b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype.dispose=function(){this.unregisterHandlers(),this.disposeControls(),this.disposeEditors(),this.removeElements(),this.disposeExternalParameterEditors(),this.container=null,this.tableContainer=null,this.rawProperties=null,this.parsedProperties=null,this.editors=null,this.externalParameterEditors=null,this.values=null,this.originalValues=null,this.options.onChange=null,this.options.onPopupDisplayed=null,this.options.onPopupHidden=null,this.options.onGetInspectableElement=null,this.parentSurface=null,this.groupManager=null,this.group=null,c.dispose.call(this)},d.prototype.init=function(){this.groupManager&&!this.group&&(this.group=this.groupManager.createGroup("root")),this.build(),this.parentSurface||Storm.foundation.controlUtils.markDisposable(this.tableContainer),this.registerHandlers()},d.prototype.registerHandlers=function(){this.parentSurface||(a(this.tableContainer).one("dispose-control",this.proxy(this.dispose)),a(this.tableContainer).on("click","tr.group, tr.control-group",this.proxy(this.onGroupClick)),a(this.tableContainer).on("focus-control",this.proxy(this.focusFirstEditor)))},d.prototype.unregisterHandlers=function(){this.parentSurface||(a(this.tableContainer).off("dispose-control",this.proxy(this.dispose)),a(this.tableContainer).off("click","tr.group, tr.control-group",this.proxy(this.onGroupClick)),a(this.tableContainer).off("focus-control",this.proxy(this.focusFirstEditor)))},d.prototype.build=function(){this.tableContainer=document.createElement("div");var a=document.createElement("table"),b=document.createElement("tbody");Storm.foundation.element.addClass(a,"inspector-fields"),this.parsedProperties.hasGroups&&Storm.foundation.element.addClass(a,"has-groups");for(var c=this.group,d=0,e=this.parsedProperties.properties.length;d<e;d++){var f=this.parsedProperties.properties[d];"group"==f.itemType?c=this.getGroupManager().createGroup(f.groupIndex,this.group):void 0===f.groupIndex&&(c=this.group);var g=this.buildRow(f,c);"group"==f.itemType?this.applyGroupLevelToRow(g,c.parentGroup):this.applyGroupLevelToRow(g,c),b.appendChild(g),this.buildEditor(g,f,a,c)}a.appendChild(b),this.tableContainer.appendChild(a),this.container.appendChild(this.tableContainer),this.options.enableExternalParameterEditor&&this.buildExternalParameterEditor(b),this.parentSurface||this.focusFirstEditor()},d.prototype.moveToContainer=function(a){this.container=a,this.container.appendChild(this.tableContainer)},d.prototype.buildRow=function(a,b){var c=document.createElement("tr"),d=document.createElement("th"),e=document.createElement("span"),f=this.buildPropertyDescription(a);a.property&&(c.setAttribute("data-property",a.property),c.setAttribute("data-property-path",this.getPropertyPath(a.property))),this.applyGroupIndexAttribute(a,c,b),Storm.foundation.element.addClass(c,this.getRowCssClass(a,b)),this.applyHeadColspan(d,a),e.setAttribute("class","title-element"),e.setAttribute("title",this.escapeJavascriptString(a.title)),this.buildGroupExpandControl(e,a,!1,!1,b),e.innerHTML+=this.escapeJavascriptString(a.title);var g=document.createElement("div"),h=document.createElement("div");return h.appendChild(e),f&&h.appendChild(f),g.appendChild(h),d.appendChild(g),c.appendChild(d),c},d.prototype.focusFirstEditor=function(){if(0!=this.editors.length)for(var a=(this.getGroupManager(),0),b=this.editors.length;a<b;a++){var c=this.editors[a],d=c.parentGroup;if(!d||this.groupManager.isGroupExpanded(d)){var e=this.findExternalParameterEditor(c.getPropertyName());return e&&e.isEditorVisible()?void e.focus():void c.focus()}}},d.prototype.getRowCssClass=function(a,b){var c=a.itemType;return"property"==a.itemType&&b.parentGroup&&(c+=this.getGroupManager().isGroupExpanded(b)?" expanded":" collapsed"),"property"!=a.itemType||a.showExternalParam||(c+=" no-external-parameter"),c},d.prototype.applyHeadColspan=function(a,b){"group"==b.itemType&&a.setAttribute("colspan",2)},d.prototype.buildGroupExpandControl=function(a,b,c,d,e){if("group"===b.itemType||c){var f=(this.getGroupManager().getGroupIndex(e),this.getGroupManager().isGroupExpanded(e)?"expanded":""),g=document.createElement("a");g.setAttribute("class","expandControl "+f),g.setAttribute("href","javascript:;"),g.innerHTML="<span>Expand/collapse</span>",a.appendChild(g)}},d.prototype.buildPropertyDescription=function(b){if(void 0===b.description||null===b.description)return null;var c=document.createElement("span");return c.setAttribute("title",this.escapeJavascriptString(b.description)),c.setAttribute("class","info oc-icon-info with-tooltip"),a(c).tooltip({placement:"auto right",container:"body",delay:500}),c},d.prototype.buildExternalParameterEditor=function(a){for(var b=a.children,c=0,d=b.length;c<d;c++){var e=b[c],f=e.getAttribute("data-property");if(!Storm.foundation.element.hasClass(e,"no-external-parameter")&&f){var g=this.findPropertyEditor(f);if(!g||g.supportsExternalParameterEditor()){var h=e.querySelector("td"),i=this.findPropertyDefinition(f),j=this.getPropertyValue(f);void 0===j&&(j=g.getUndefinedValue());var k=new Storm.inspector.externalParameterEditor(this,i,h,j);this.externalParameterEditors.push(k)}}}},d.prototype.applyGroupIndexAttribute=function(a,b,c,d){"group"==a.itemType||d?(b.setAttribute("data-group-index",this.getGroupManager().getGroupIndex(c)),b.setAttribute("data-parent-group-index",this.getGroupManager().getGroupIndex(c.parentGroup))):c.parentGroup&&b.setAttribute("data-parent-group-index",this.getGroupManager().getGroupIndex(c))},d.prototype.applyGroupLevelToRow=function(a,b){if(!a.hasAttribute("data-group-level")){var c=this.getRowHeadElement(a);if(null===c)throw new Error("Cannot find TH element for the Inspector row");var d=b.getLevel();a.setAttribute("data-group-level",d),c.children[0].style.marginLeft=10*d+"px"}},d.prototype.toggleGroup=function(a,b){var c=a.querySelector("a"),d=a.getAttribute("data-group-index"),e=this.getRootTable(),f=this.getGroupManager(),g=!0;Storm.foundation.element.hasClass(c,"expanded")&&!b?Storm.foundation.element.removeClass(c,"expanded"):(Storm.foundation.element.addClass(c,"expanded"),g=!1);var h=f.findGroupRows(e,d,!g),i=Math.round(50/h.length);this.expandOrCollapseRows(h,g,i,b),f.setGroupStatus(d,!g)},d.prototype.expandGroupParents=function(a){for(var b=a.getGroupAndAllParents(),c=this.getRootTable(),d=b.length-1;d>=0;d--){var e=b[d].findGroupRow(c);e&&this.toggleGroup(e,!0)}},d.prototype.expandOrCollapseRows=function(a,b,c,d){var e=a.pop(),f=this;e&&(d?(Storm.foundation.element.toggleClass(e,"collapsed",b),Storm.foundation.element.toggleClass(e,"expanded",!b),f.expandOrCollapseRows(a,b,c,d)):setTimeout(function(){Storm.foundation.element.toggleClass(e,"collapsed",b),Storm.foundation.element.toggleClass(e,"expanded",!b),f.expandOrCollapseRows(a,b,c,d)},c))},d.prototype.getGroupManager=function(){return this.getRootSurface().groupManager},d.prototype.buildEditor=function(a,b,c,d){if("property"===b.itemType){this.validateEditorType(b.type);var e=document.createElement("td"),f=b.type;a.appendChild(e),void 0===f&&(f="string");var g=new Storm.inspector.propertyEditors[f](this,b,e,d);g.isGroupedEditor()&&(Storm.foundation.element.addClass(c,"has-groups"),Storm.foundation.element.addClass(a,"control-group"),this.applyGroupIndexAttribute(b,a,g.group,!0),this.buildGroupExpandControl(a.querySelector("span.title-element"),b,!0,g.hasChildSurface(),g.group),0==e.children.length&&(a.querySelector("th").setAttribute("colspan",2),a.removeChild(e))),this.editors.push(g)}},d.prototype.generateSequencedId=function(){return this.idCounter++,this.inspectorUniqueId+"-"+this.idCounter},d.prototype.getPropertyValue=function(a){return this.values[a]},d.prototype.setPropertyValue=function(a,b,c,d){if(void 0!==b?this.values[a]=b:void 0!==this.values[a]&&delete this.values[a],!c){void 0!==this.originalValues[a]&&this.comparePropertyValues(this.originalValues[a],b)?this.markPropertyChanged(a,!1):this.markPropertyChanged(a,!0);var e=this.getPropertyPath(a);this.getRootSurface().notifyEditorsPropertyChanged(e,b),null!==this.options.onChange&&this.options.onChange(a,b)}if(d){var f=this.findPropertyEditor(a);f&&f.updateDisplayedValue(b)}return b},d.prototype.notifyEditorsPropertyChanged=function(a,b){for(var c=0,d=this.editors.length;c<d;c++){var e=this.editors[c];e.onInspectorPropertyChanged(a,b),e.notifyChildSurfacesPropertyChanged(a,b)}},d.prototype.makeCellActive=function(a){for(var b=a.parentNode.parentNode.parentNode,c=b.querySelectorAll("tr td"),d=0,e=c.length;d<e;d++)Storm.foundation.element.removeClass(c[d],"active");Storm.foundation.element.addClass(a,"active")},d.prototype.markPropertyChanged=function(a,b){var c=this.getPropertyPath(a),d=this.tableContainer.querySelector('tr[data-property-path="'+c+'"]');b?Storm.foundation.element.addClass(d,"changed"):Storm.foundation.element.removeClass(d,"changed")},d.prototype.findPropertyEditor=function(a){for(var b=0,c=this.editors.length;b<c;b++)if(this.editors[b].getPropertyName()==a)return this.editors[b];return null},d.prototype.findExternalParameterEditor=function(a){for(var b=0,c=this.externalParameterEditors.length;b<c;b++)if(this.externalParameterEditors[b].getPropertyName()==a)return this.externalParameterEditors[b];return null},d.prototype.findPropertyDefinition=function(a){for(var b=0,c=this.parsedProperties.properties.length;b<c;b++){var d=this.parsedProperties.properties[b];if(d.property==a)return d}return null},d.prototype.validateEditorType=function(a){if(void 0===a&&(a="string"),void 0===Storm.inspector.propertyEditors[a])throw new Error('The Inspector editor class "'+a+'" is not defined in the Storm.inspector.propertyEditors namespace.')},d.prototype.popupDisplayed=function(){0===this.popupCounter&&null!==this.options.onPopupDisplayed&&this.options.onPopupDisplayed(),this.popupCounter++},d.prototype.popupHidden=function(){this.popupCounter--,this.popupCounter<0&&(this.popupCounter=0),0===this.popupCounter&&null!==this.options.onPopupHidden&&this.options.onPopupHidden()},d.prototype.getInspectableElement=function(){if(null!==this.options.onGetInspectableElement)return this.options.onGetInspectableElement()},d.prototype.getPropertyPath=function(a){var b=[],c=this;for(b.push(a);c;)c.propertyName&&b.push(c.propertyName),c=c.parentSurface;return b.reverse(),b.join(".")},d.prototype.mergeChildSurface=function(a,b){var c=a.tableContainer.querySelectorAll("table.inspector-fields > tbody > tr");a.tableContainer=this.getRootSurface().tableContainer;for(var d=c.length-1;d>=0;d--){var e=c[d];b.parentNode.insertBefore(e,b.nextSibling),this.applyGroupLevelToRow(e,a.group)}},d.prototype.getRowHeadElement=function(a){for(var b=a.children.length-1;b>=0;b--){var c=a.children[b];if("TH"===c.tagName)return c}return null},d.prototype.getInspectorUniqueId=function(){return this.inspectorUniqueId},d.prototype.getRootSurface=function(){for(var a=this;a;){if(!a.parentSurface)return a;a=a.parentSurface}},d.prototype.removeElements=function(){this.parentSurface||this.tableContainer.parentNode.removeChild(this.tableContainer)},d.prototype.disposeEditors=function(){for(var a=0,b=this.editors.length;a<b;a++){var c=this.editors[a];c.dispose()}},d.prototype.disposeExternalParameterEditors=function(){for(var a=0,b=this.externalParameterEditors.length;a<b;a++){var c=this.externalParameterEditors[a];c.dispose()}},d.prototype.disposeControls=function(){for(var b=this.tableContainer.querySelectorAll(".with-tooltip"),c=0,d=b.length;c<d;c++)a(b[c]).tooltip("destroy")},d.prototype.escapeJavascriptString=function(a){var b=document.createElement("div");return b.appendChild(document.createTextNode(a)),b.innerHTML},d.prototype.comparePropertyValues=function(a,b){return(void 0!==a||void 0===b)&&((void 0===a||void 0!==b)&&("object"==typeof a&&"object"==typeof b?JSON.stringify(a)==JSON.stringify(b):a==b))},d.prototype.getRootTable=function(){return this.getRootSurface().container.querySelector("table.inspector-fields")},d.prototype.getValues=function(){for(var a={},b=0,c=this.parsedProperties.properties.length;b<c;b++){var d=this.parsedProperties.properties[b];if("property"===d.itemType){var e=null,f=this.findExternalParameterEditor(d.property);if(f&&f.isEditorVisible())e=f.getValue(),e="{{ "+e+" }}";else{e=this.getPropertyValue(d.property);var g=this.findPropertyEditor(d.property);if(void 0===e&&(e=g?g.getUndefinedValue():d["default"]),e===Storm.inspector.removedProperty)continue;if(void 0!==d.ignoreIfEmpty&&(d.ignoreIfEmpty===!0||"true"===d.ignoreIfEmpty)&&g&&g.isEmptyValue(e))continue;if(void 0!==d.ignoreIfDefault&&(d.ignoreIfDefault===!0||"true"===d.ignoreIfDefault)&&g){if(void 0===d["default"])throw new Error("The ignoreIfDefault feature cannot be used without the default property value.");if(this.comparePropertyValues(e,d["default"]))continue}}a[d.property]=e}}return a},d.prototype.getValidValues=function(){var a=this.getValues(),b={};for(var c in a){var d=this.findPropertyEditor(c);if(!d)throw new Error("Cannot find editor for property "+c);var e=this.findExternalParameterEditor(c);e&&e.isEditorVisible()&&!e.validate(!0)?b[c]=Storm.inspector.invalidProperty:d.validate(!0)?b[c]=a[c]:b[c]=Storm.inspector.invalidProperty}return b},d.prototype.validate=function(a){this.getGroupManager().unmarkInvalidGroups(this.getRootTable());for(var b=0,c=this.editors.length;b<c;b++){var d=this.editors[b],e=this.findExternalParameterEditor(d.propertyDefinition.property);if(e&&e.isEditorVisible()){if(e.validate(a))continue;return a||d.markInvalid(),!1}if(!d.validate(a))return a||d.markInvalid(),!1}return!0},d.prototype.hasChanges=function(a){var b=void 0!==a?a:this.originalValues;return!this.comparePropertyValues(b,this.getValues())},d.prototype.onGroupClick=function(a){var b=a.currentTarget;return this.toggleGroup(b),Storm.foundation.event.stop(a),!1},d.DEFAULTS={enableExternalParameterEditor:!1,onChange:null,onPopupDisplayed:null,onPopupHidden:null,onGetInspectableElement:null},Storm.inspector.surface=d,Storm.inspector.removedProperty={removed:!0},Storm.inspector.invalidProperty={invalid:!0}}(window.jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=function(){b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.init=function(){a(document).on("click","[data-inspectable]",this.proxy(this.onInspectableClicked))},d.prototype.getContainerElement=function(a){var b=a.closest("[data-inspector-container]");if(0===b.length)return null;var c=b.find(b.data("inspector-container"));if(0===c.length)throw new Error("Inspector container "+b.data["inspector-container"]+" element is not found.");return c},d.prototype.loadElementOptions=function(a){var b={};return a.data("inspector-css-class")&&(b.inspectorCssClass=a.data("inspector-css-class")),b},d.prototype.createInspectorPopup=function(b,c){var d=a.extend(this.loadElementOptions(b),{containerSupported:c});new Storm.inspector.wrappers.popup(b,null,d)},d.prototype.createInspectorContainer=function(b,c){var d=a.extend(this.loadElementOptions(b),{containerSupported:!0,container:c});new Storm.inspector.wrappers.container(b,null,d)},d.prototype.switchToPopup=function(b){var c=a.extend(this.loadElementOptions(b.$element),{containerSupported:!0});new Storm.inspector.wrappers.popup(b.$element,b,c),b.cleanupAfterSwitch(),this.setContainerPreference(!1)},d.prototype.switchToContainer=function(b){var c=this.getContainerElement(b.$element),d=a.extend(this.loadElementOptions(b.$element),{containerSupported:!0,container:c});if(!c)throw new Error("Cannot switch to container: a container element is not found");new Storm.inspector.wrappers.container(b.$element,b,d),b.cleanupAfterSwitch(),this.setContainerPreference(!0)},d.prototype.createInspector=function(b){var c=a(b);if(c.data("oc.inspectorVisible"))return!1;var d=this.getContainerElement(c);if(d){if(!this.applyValuesFromContainer(d)||!this.containerHidingAllowed(d))return;Storm.foundation.controlUtils.disposeControls(d.get(0)),this.getContainerPreference()?this.createInspectorContainer(c,d):this.createInspectorPopup(c,!0)}else this.createInspectorPopup(c,!1)},d.prototype.getContainerPreference=function(){return!!Modernizr.localstorage&&"true"===localStorage.getItem("oc.inspectorUseContainer")},d.prototype.setContainerPreference=function(a){if(Modernizr.localstorage)return localStorage.setItem("oc.inspectorUseContainer",a?"true":"false")},d.prototype.applyValuesFromContainer=function(b){var c=a.Event("apply.oc.inspector");return b.trigger(c),!c.isDefaultPrevented()},d.prototype.containerHidingAllowed=function(b){var c=a.Event("beforeContainerHide.oc.inspector");return b.trigger(c),!c.isDefaultPrevented()},d.prototype.onInspectableClicked=function(b){var c=a(b.currentTarget);return this.createInspector(c)!==!1&&(b.stopPropagation(),!1)},Storm.inspector.manager=new d,a.fn.inspector=function(){return this.each(function(){Storm.inspector.manager.createInspector(this)})}}(window.jQuery),+function(a){"use strict";void 0===Storm.inspector&&(Storm.inspector={}),void 0===Storm.inspector.wrappers&&(Storm.inspector.wrappers={});var b=Storm.foundation.base,c=b.prototype,d=function(c,e,f){if(this.$element=c,this.options=a.extend({},d.DEFAULTS,"object"==typeof f&&f),this.switched=!1,this.configuration=null,b.call(this),e)this.surface=e.surface,this.title=e.title,this.description=e.description,e=null,this.init();else{if(!this.triggerShowingAndInit())return;this.surface=null,this.title=null,this.description=null}};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.switched||(this.$element.removeClass("inspector-open"),this.setInspectorVisibleFlag(!1),this.$element.trigger("hidden.oc.inspector")),null!==this.surface&&this.surface.options.onGetInspectableElement===this.proxy(this.onGetInspectableElement)&&(this.surface.options.onGetInspectableElement=null),this.surface=null,this.$element=null,this.title=null,this.description=null,this.configuration=null,c.dispose.call(this)},d.prototype.init=function(){this.surface?this.adoptSurface():this.loadConfiguration(),this.$element.addClass("inspector-open")},d.prototype.getElementValuesInput=function(){return this.$element.find("> input[data-inspector-values]")},d.prototype.normalizePropertyCode=function(a,b){var c=a.toLowerCase();for(var d in b){var e=b[d];if(e.property.toLowerCase()==c)return e.property}return a},d.prototype.isExternalParametersEditorEnabled=function(){return this.$element.closest("[data-inspector-external-parameters]").length>0},d.prototype.initSurface=function(a,b,c){var d=this.$element.data()||{};d.enableExternalParameterEditor=this.isExternalParametersEditorEnabled(),d.onGetInspectableElement=this.proxy(this.onGetInspectableElement),this.surface=new Storm.inspector.surface(a,b,c,Storm.inspector.helpers.generateElementUniqueId(this.$element.get(0)),d)},d.prototype.isLiveUpdateEnabled=function(){return!1},d.prototype.createSurfaceAndUi=function(a,b){},d.prototype.setInspectorVisibleFlag=function(a){this.$element.data("oc.inspectorVisible",a)},d.prototype.adoptSurface=function(){this.surface.options.onGetInspectableElement=this.proxy(this.onGetInspectableElement)},d.prototype.cleanupAfterSwitch=function(){this.switched=!0,this.dispose()},d.prototype.loadValues=function(b){var c=this.getElementValuesInput();if(c.length>0){var d=a.trim(c.val());try{return 0===d.length?{}:a.parseJSON(d)}catch(e){throw new Error("Error parsing Inspector field values. "+e)}}for(var f={},g=this.$element.get(0).attributes,h=0,i=g.length;h<i;h++){var j=g[h],k=[];if(k=j.name.match(/^data-property-(.*)$/)){var l=this.normalizePropertyCode(k[1],b);f[l]=j.value}}return f},d.prototype.applyValues=function(b){var c=this.getElementValuesInput(),d=b?this.surface.getValidValues():this.surface.getValues();if(b){var e=this.loadValues(this.configuration);for(var f in d)d[f]!==Storm.inspector.invalidProperty&&(e[f]=d[f]);var g={};for(var f in e)d.hasOwnProperty(f)&&(g[f]=e[f]);d=g}if(c.length>0)c.val(JSON.stringify(d));else for(var f in d){var h=d[f];if(a.isArray(h)||a.isPlainObject(h))throw new Error("Inspector data-property-xxx attributes do not support complex values. Property: "+f);this.$element.attr("data-property-"+f,h)}if(b)this.$element.trigger("livechange");else{var i=!1;if(this.isLiveUpdateEnabled()){var j=this.loadValues(this.configuration);i=this.surface.hasChanges(j)}else i=this.surface.hasChanges();i&&this.$element.trigger("change")}},d.prototype.loadConfiguration=function(){var a=this.$element.data("inspector-config"),b={properties:{},title:null,description:null};if(b.title=this.$element.data("inspector-title"),b.description=this.$element.data("inspector-description"),void 0!==a)return b.properties=this.parseConfiguration(a),void this.configurationLoaded(b);var c=this.$element.find("> input[data-inspector-config]");if(c.length>0)return b.properties=this.parseConfiguration(c.val()),void this.configurationLoaded(b);var d=this.$element.closest("form"),e=this.$element.data(),f=this;Storm.stripeLoadIndicator.show(),d.request("onGetInspectorConfiguration",{data:e}).done(function(a){f.onConfigurartionRequestDone(a,b)}).always(function(){Storm.stripeLoadIndicator.hide()})},d.prototype.parseConfiguration=function(b){if(a.isArray(b)||a.isPlainObject(b))return b;if(0===a.trim(b))return{};try{return a.parseJSON(b)}catch(c){throw new Error("Error parsing Inspector configuration. "+c)}},d.prototype.configurationLoaded=function(a){var b=this.loadValues(a.properties);this.title=a.title,this.description=a.description,this.configuration=a,this.createSurfaceAndUi(a.properties,b)},d.prototype.onConfigurartionRequestDone=function(a,b){b.properties=this.parseConfiguration(a.configuration.properties),void 0!==a.configuration.title&&(b.title=a.configuration.title),void 0!==a.configuration.description&&(b.description=a.configuration.description),this.configurationLoaded(b)},d.prototype.triggerShowingAndInit=function(){var b=a.Event("showing.oc.inspector");return this.$element.trigger(b,[{callback:this.proxy(this.init)}]),b.isDefaultPrevented()?(this.$element=null,!1):void(b.isPropagationStopped()||this.init())},d.prototype.triggerHiding=function(){var b=a.Event("hiding.oc.inspector"),c=this.surface.getValues();return this.$element.trigger(b,[{values:c}]),!b.isDefaultPrevented()},d.prototype.onGetInspectableElement=function(){return this.$element},d.DEFAULTS={containerSupported:!1},Storm.inspector.wrappers.base=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.wrappers.base,c=b.prototype,d=function(a,c,d){this.$popoverContainer=null,this.popoverObj=null,this.cleaningUp=!1,b.call(this,a,c,d)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.unregisterHandlers(),this.$popoverContainer=null,this.popoverObj=null,c.dispose.call(this)},d.prototype.createSurfaceAndUi=function(a,b,c,d){this.showPopover(),this.initSurface(this.$popoverContainer.find("[data-surface-container]").get(0),a,b),this.repositionPopover(),this.registerPopupHandlers()},d.prototype.adoptSurface=function(){this.showPopover(),this.surface.moveToContainer(this.$popoverContainer.find("[data-surface-container]").get(0)),this.repositionPopover(),this.registerPopupHandlers(),c.adoptSurface.call(this)},d.prototype.cleanupAfterSwitch=function(){this.cleaningUp=!0,this.switched=!0,this.forceClose()},d.prototype.getPopoverContents=function(){return'<div class="popover-head">                                              <h3 data-inspector-title></h3>                                      <p data-inspector-description></p>                                  <button type="button" class="close"                                     data-dismiss="popover"                                              aria-hidden="true">&times;</button>                         </div>                                                              <form autocomplete="off" onsubmit="return false">                       <div data-surface-container></div>                              <form>'},d.prototype.showPopover=function(){var b=this.$element.data("inspector-offset"),c=this.$element.data("inspector-offset-x"),d=this.$element.data("inspector-offset-y"),e=this.$element.data("inspector-placement"),f=this.$element.data("inspector-fallback-placement");if(void 0===b&&(b=15),void 0===e&&(e="bottom"),void 0===f&&(f="bottom"),this.$element.ocPopover({content:this.getPopoverContents(),highlightModalTarget:!0,modal:!0,placement:e,fallbackPlacement:f,containerClass:"control-inspector",container:this.$element.data("inspector-container"),offset:b,offsetX:c,offsetY:d,width:400}),this.setInspectorVisibleFlag(!0),this.popoverObj=this.$element.data("oc.popover"),this.$popoverContainer=this.popoverObj.$container,this.$popoverContainer.addClass("inspector-temporary-placement"),void 0!==this.options.inspectorCssClass&&this.$popoverContainer.addClass(this.options.inspectorCssClass),this.options.containerSupported){var g=a('<span class="inspector-move-to-container oc-icon-download">');this.$popoverContainer.find(".popover-head").append(g)}this.$popoverContainer.find("[data-inspector-title]").text(this.title),this.$popoverContainer.find("[data-inspector-description]").text(this.description)},d.prototype.repositionPopover=function(){this.popoverObj.reposition(),this.$popoverContainer.removeClass("inspector-temporary-placement"),this.$popoverContainer.find("div[data-surface-container] > div").trigger("focus-control")},d.prototype.forceClose=function(){this.$popoverContainer.trigger("close.oc.popover")},d.prototype.registerPopupHandlers=function(){this.surface.options.onPopupDisplayed=this.proxy(this.onPopupEditorDisplayed),this.surface.options.onPopupHidden=this.proxy(this.onPopupEditorHidden),this.popoverObj.options.onCheckDocumentClickTarget=this.proxy(this.onCheckDocumentClickTarget),this.$element.on("hiding.oc.popover",this.proxy(this.onBeforeHide)),this.$element.on("hide.oc.popover",this.proxy(this.onHide)),this.$popoverContainer.on("keydown",this.proxy(this.onPopoverKeyDown)),this.options.containerSupported&&this.$popoverContainer.on("click","span.inspector-move-to-container",this.proxy(this.onMoveToContainer))},d.prototype.unregisterHandlers=function(){this.popoverObj.options.onCheckDocumentClickTarget=null,this.$element.off("hiding.oc.popover",this.proxy(this.onBeforeHide)),this.$element.off("hide.oc.popover",this.proxy(this.onHide)),this.$popoverContainer.off("keydown",this.proxy(this.onPopoverKeyDown)),this.options.containerSupported&&this.$popoverContainer.off("click","span.inspector-move-to-container",this.proxy(this.onMoveToContainer)),this.surface.options.onPopupDisplayed=null,this.surface.options.onPopupHidden=null},d.prototype.onBeforeHide=function(a){if(!this.cleaningUp)return this.surface.validate()&&this.triggerHiding()?void this.applyValues():(a.preventDefault(),!1)},d.prototype.onHide=function(a){this.dispose()},d.prototype.onPopoverKeyDown=function(b){13==b.keyCode&&a(b.currentTarget).trigger("close.oc.popover")},d.prototype.onPopupEditorDisplayed=function(){this.popoverObj.options.closeOnPageClick=!1,this.popoverObj.options.closeOnEsc=!1},d.prototype.onPopupEditorHidden=function(){this.popoverObj.options.closeOnPageClick=!0,this.popoverObj.options.closeOnEsc=!0},d.prototype.onCheckDocumentClickTarget=function(b){if(a.contains(this.$element,b)||this.$element.get(0)===b)return!0},d.prototype.onMoveToContainer=function(){Storm.inspector.manager.switchToContainer(this)},Storm.inspector.wrappers.popup=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.wrappers.base,c=b.prototype,d=function(a,c,d){
if(!d.container)throw new Error("Cannot create Inspector container wrapper without a container element.");this.surfaceContainer=null,b.call(this,a,c,d)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.init=function(){this.registerHandlers(),c.init.call(this)},d.prototype.dispose=function(){this.unregisterHandlers(),this.removeControls(),this.surfaceContainer=null,c.dispose.call(this)},d.prototype.createSurfaceAndUi=function(a,b){this.buildUi(),this.initSurface(this.surfaceContainer,a,b),this.isLiveUpdateEnabled()&&(this.surface.options.onChange=this.proxy(this.onLiveUpdate))},d.prototype.adoptSurface=function(){this.buildUi(),this.surface.moveToContainer(this.surfaceContainer),this.isLiveUpdateEnabled()&&(this.surface.options.onChange=this.proxy(this.onLiveUpdate)),c.adoptSurface.call(this)},d.prototype.buildUi=function(){var b=this.isScrollable(),c=this.buildHead(),d=this.buildLayout();if(d.headContainer.appendChild(c),b){var e=this.buildScrollpad();this.surfaceContainer=e.container,d.bodyContainer.appendChild(e.scrollpad),a(e.scrollpad).scrollpad()}else this.surfaceContainer=d.bodyContainer;this.setInspectorVisibleFlag(!0)},d.prototype.buildHead=function(){var a=document.createElement("div"),b=document.createElement("h3"),c=document.createElement("p"),d=document.createElement("span"),e=document.createElement("span");return a.setAttribute("class","inspector-header"),d.setAttribute("class","oc-icon-external-link-square detach"),e.setAttribute("class","close"),b.textContent=this.title,c.textContent=this.description,e.innerHTML="&times;",a.appendChild(b),a.appendChild(c),a.appendChild(d),a.appendChild(e),a},d.prototype.buildScrollpad=function(){var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div");return a.setAttribute("class","control-scrollpad"),a.setAttribute("data-control","scrollpad"),b.setAttribute("class","scroll-wrapper inspector-wrapper"),a.appendChild(b),b.appendChild(c),{scrollpad:a,container:c}},d.prototype.buildLayout=function(){var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div");return a.setAttribute("class","flex-layout-column fill-container"),b.setAttribute("class","flex-layout-item fix"),c.setAttribute("class","flex-layout-item stretch relative"),a.appendChild(b),a.appendChild(c),this.options.container.get(0).appendChild(a),Storm.foundation.controlUtils.markDisposable(a),this.registerLayoutHandlers(a),{headContainer:b,bodyContainer:c}},d.prototype.validateAndApply=function(){return!!this.surface.validate()&&(this.applyValues(),!0)},d.prototype.isScrollable=function(){return void 0!==this.options.container.data("inspector-scrollable")},d.prototype.isLiveUpdateEnabled=function(){return void 0!==this.options.container.data("inspector-live-update")},d.prototype.getLayout=function(){return this.options.container.get(0).querySelector("div.flex-layout-column")},d.prototype.registerLayoutHandlers=function(b){var c=a(b);c.one("dispose-control",this.proxy(this.dispose)),c.on("click","span.close",this.proxy(this.onClose)),c.on("click","span.detach",this.proxy(this.onDetach))},d.prototype.registerHandlers=function(){this.options.container.on("apply.oc.inspector",this.proxy(this.onApplyValues)),this.options.container.on("beforeContainerHide.oc.inspector",this.proxy(this.onBeforeHide))},d.prototype.unregisterHandlers=function(){var b=a(this.getLayout());this.options.container.off("apply.oc.inspector",this.proxy(this.onApplyValues)),this.options.container.off("beforeContainerHide.oc.inspector",this.proxy(this.onBeforeHide)),b.off("dispose-control",this.proxy(this.dispose)),b.off("click","span.close",this.proxy(this.onClose)),b.off("click","span.detach",this.proxy(this.onDetach)),null!==this.surface&&this.surface.options.onChange===this.proxy(this.onLiveUpdate)&&(this.surface.options.onChange=null)},d.prototype.removeControls=function(){this.isScrollable()&&this.options.container.find(".control-scrollpad").scrollpad("dispose");var a=this.getLayout();a.parentNode.removeChild(a)},d.prototype.onApplyValues=function(a){if(!this.validateAndApply())return a.preventDefault(),!1},d.prototype.onBeforeHide=function(a){if(!this.triggerHiding())return a.preventDefault(),!1},d.prototype.onClose=function(a){return this.validateAndApply()&&this.triggerHiding()?(this.surface.dispose(),void this.dispose()):(a.preventDefault(),!1)},d.prototype.onLiveUpdate=function(){this.applyValues(!0)},d.prototype.onDetach=function(){Storm.inspector.manager.switchToPopup(this)},Storm.inspector.wrappers.container=d}(window.jQuery),+function(a){"use strict";function b(){var a=document.body.getAttribute("data-inspector-group-statuses");return null!==a?JSON.parse(a):{}}function c(a){document.body.setAttribute("data-inspector-group-statuses",JSON.stringify(a))}var d=function(a){this.controlId=a,this.rootGroup=null,this.cachedGroupStatuses=null};d.prototype.createGroup=function(a,b){var c=new e(a);return b?(b.groups.push(c),c.parentGroup=b):this.rootGroup=c,c},d.prototype.getGroupIndex=function(a){return a.getGroupIndex()},d.prototype.isParentGroupExpanded=function(a){return!a.parentGroup||this.isGroupExpanded(a.parentGroup)},d.prototype.isGroupExpanded=function(a){if(!a.parentGroup)return!0;var b=this.getGroupIndex(a),c=this.readGroupStatuses();return void 0!==c[b]&&c[b]},d.prototype.setGroupStatus=function(a,b){var c=this.readGroupStatuses();c[a]=b,this.writeGroupStatuses(c)},d.prototype.readGroupStatuses=function(){if(null!==this.cachedGroupStatuses)return this.cachedGroupStatuses;var a=b();return void 0!==a[this.controlId]?this.cachedGroupStatuses=a[this.controlId]:this.cachedGroupStatuses={},this.cachedGroupStatuses},d.prototype.writeGroupStatuses=function(a){var d=b();d[this.controlId]=a,c(d),this.cachedGroupStatuses=a},d.prototype.findGroupByIndex=function(a){return this.rootGroup.findGroupByIndex(a)},d.prototype.findGroupRows=function(a,b,c){var d=this.findGroupByIndex(b);if(!d)throw new Error("Cannot find the requested row group.");return d.findGroupRows(a,c,this)},d.prototype.markGroupRowInvalid=function(a,b){for(var c=a;c;){var d=c.findGroupRow(b);d&&Storm.foundation.element.addClass(d,"invalid"),c=c.parentGroup}},d.prototype.unmarkInvalidGroups=function(a){for(var b=a.querySelectorAll("tr.invalid"),c=b.length-1;c>=0;c--)Storm.foundation.element.removeClass(b[c],"invalid")},d.prototype.isRowVisible=function(a,b){var c=this.findGroupByIndex(index);if(!c)throw new Error("Cannot find the requested row group.");for(var d=c;d;){if(!this.isGroupExpanded(d))return!1;d=d.parentGroup}return!0};var e=function(a){this.groupId=a,this.parentGroup=null,this.groupIndex=null,this.groups=[]};e.prototype.getGroupIndex=function(){if(null!==this.groupIndex)return this.groupIndex;for(var a="",b=this;b;)a=a.length>0?b.groupId+"-"+a:String(b.groupId),b=b.parentGroup;return this.groupIndex=a,a},e.prototype.findGroupByIndex=function(a){if(this.getGroupIndex()==a)return this;for(var b=this.groups.length-1;b>=0;b--){var c=this.groups[b].findGroupByIndex(a);if(null!==c)return c}return null},e.prototype.getLevel=function(){for(var a=this,b=-1;a;)b++,a=a.parentGroup;return b},e.prototype.getGroupAndAllParents=function(){for(var a=this,b=[];a;)b.push(a),a=a.parentGroup;return b},e.prototype.findGroupRows=function(a,b,c){for(var d=this.getGroupIndex(),e=a.querySelectorAll('tr[data-parent-group-index="'+d+'"]'),f=Array.prototype.slice.call(e),g=0,h=this.groups.length;g<h;g++){var i=this.groups[g];if(!b||c.isGroupExpanded(i))for(var j=i.findGroupRows(a,b,c),k=0,l=j.length;k<l;k++)f.push(j[k])}return f},e.prototype.findGroupRow=function(a){return a.querySelector('tr[data-group-index="'+this.groupIndex+'"]')},Storm.inspector.groupManager=d}(window.jQuery),+function(a){"use strict";function b(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(void 0!==e.itemType&&"group"==e.itemType&&e.title==a)return e}return null}void 0===window.Storm&&(window.Storm={}),void 0===Storm.inspector&&(Storm.inspector={}),Storm.inspector.engine={},Storm.inspector.engine.processPropertyGroups=function(a){for(var c=[],d={hasGroups:!1,properties:[]},e=0,f=0,g=a.length;f<g;f++){var h=a[f];void 0===h.sortOrder&&(h.sortOrder=20*(f+1))}a.sort(function(a,b){return a.sortOrder-b.sortOrder});for(var f=0,g=a.length;f<g;f++){var h=a[f];if(h.itemType="property",void 0===h.group)c.push(h);else{var i=b(h.group,c);i||(i={itemType:"group",title:h.group,properties:[],groupIndex:e},e++,c.push(i)),h.groupIndex=i.groupIndex,i.properties.push(h)}}for(var f=0,g=c.length;f<g;f++){var h=c[f];if(d.properties.push(h),"group"==h.itemType){d.hasGroups=!0;for(var j=0,k=h.properties.length;j<k;j++)d.properties.push(h.properties[j]);delete h.properties}}return d}}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.inspector&&(Storm.inspector={}),void 0===Storm.inspector.propertyEditors&&(Storm.inspector.propertyEditors={});var b=Storm.foundation.base,c=b.prototype,d=function(a,c,d,e){this.inspector=a,this.propertyDefinition=c,this.containerCell=d,this.containerRow=d.parentNode,this.parentGroup=e,this.group=null,this.childInspector=null,this.validationSet=null,this.disposed=!1,b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.disposed=!0,this.disposeValidation(),this.childInspector&&this.childInspector.dispose(),this.inspector=null,this.propertyDefinition=null,this.containerCell=null,this.containerRow=null,this.childInspector=null,this.parentGroup=null,this.group=null,this.validationSet=null,c.dispose.call(this)},d.prototype.init=function(){this.build(),this.registerHandlers(),this.initValidation()},d.prototype.build=function(){return null},d.prototype.isDisposed=function(){return this.disposed},d.prototype.registerHandlers=function(){},d.prototype.onInspectorPropertyChanged=function(a,b){},d.prototype.notifyChildSurfacesPropertyChanged=function(a,b){this.hasChildSurface()&&this.childInspector.notifyEditorsPropertyChanged(a,b)},d.prototype.focus=function(){},d.prototype.hasChildSurface=function(){return null!==this.childInspector},d.prototype.getRootSurface=function(){return this.inspector.getRootSurface()},d.prototype.getPropertyPath=function(){return this.inspector.getPropertyPath(this.propertyDefinition.property)},d.prototype.updateDisplayedValue=function(a){},d.prototype.getPropertyName=function(){return this.propertyDefinition.property},d.prototype.getUndefinedValue=function(){return void 0===this.propertyDefinition["default"]?void 0:this.propertyDefinition["default"]},d.prototype.throwError=function(a){throw new Error(a+" Property: "+this.propertyDefinition.property)},d.prototype.getInspectableElement=function(){return this.getRootSurface().getInspectableElement()},d.prototype.isEmptyValue=function(b){return void 0===b||null===b||"object"==typeof b&&a.isEmptyObject(b)||"string"==typeof b&&0===a.trim(b).length||"[object Array]"===Object.prototype.toString.call(b)&&0===b.length},d.prototype.initValidation=function(){this.validationSet=new Storm.inspector.validationSet(this.propertyDefinition,this.propertyDefinition.property)},d.prototype.disposeValidation=function(){this.validationSet.dispose()},d.prototype.getValueToValidate=function(){return this.inspector.getPropertyValue(this.propertyDefinition.property)},d.prototype.validate=function(a){var b=this.getValueToValidate();void 0===b&&(b=this.getUndefinedValue());var c=this.validationSet.validate(b);return null===c||(a||Storm.flashMsg({text:c,"class":"error",interval:5}),!1)},d.prototype.markInvalid=function(){Storm.foundation.element.addClass(this.containerRow,"invalid"),this.inspector.getGroupManager().markGroupRowInvalid(this.parentGroup,this.inspector.getRootTable()),this.inspector.getRootSurface().expandGroupParents(this.parentGroup),this.focus()},d.prototype.supportsExternalParameterEditor=function(){return!0},d.prototype.onExternalPropertyEditorHidden=function(){},d.prototype.isGroupedEditor=function(){return!1},d.prototype.initControlGroup=function(){this.group=this.inspector.getGroupManager().createGroup(this.propertyDefinition.property,this.parentGroup)},d.prototype.createGroupedRow=function(a){var b=this.inspector.buildRow(a,this.group),c=this.inspector.getGroupManager().isGroupExpanded(this.group)?"expanded":"collapsed";return this.inspector.applyGroupLevelToRow(b,this.group),Storm.foundation.element.addClass(b,"property"),Storm.foundation.element.addClass(b,c),b},Storm.inspector.propertyEditors.base=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.unregisterHandlers(),c.dispose.call(this)},d.prototype.build=function(){var a=document.createElement("input"),b=void 0!==this.propertyDefinition.placeholder?this.propertyDefinition.placeholder:"",c=this.inspector.getPropertyValue(this.propertyDefinition.property);a.setAttribute("type","text"),a.setAttribute("class","string-editor"),a.setAttribute("placeholder",b),void 0===c&&(c=this.propertyDefinition["default"]),void 0===c&&(c=""),a.value=c,Storm.foundation.element.addClass(this.containerCell,"text"),this.containerCell.appendChild(a)},d.prototype.updateDisplayedValue=function(a){this.getInput().value=a},d.prototype.getInput=function(){return this.containerCell.querySelector("input")},d.prototype.focus=function(){this.getInput().focus(),this.onInputFocus()},d.prototype.registerHandlers=function(){var a=this.getInput();a.addEventListener("focus",this.proxy(this.onInputFocus)),a.addEventListener("keyup",this.proxy(this.onInputKeyUp))},d.prototype.unregisterHandlers=function(){var a=this.getInput();a.removeEventListener("focus",this.proxy(this.onInputFocus)),a.removeEventListener("keyup",this.proxy(this.onInputKeyUp))},d.prototype.onInputFocus=function(a){this.inspector.makeCellActive(this.containerCell)},d.prototype.onInputKeyUp=function(){var b=a.trim(this.getInput().value);this.inspector.setPropertyValue(this.propertyDefinition.property,b)},d.prototype.onExternalPropertyEditorHidden=function(){this.focus()},Storm.inspector.propertyEditors.string=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.unregisterHandlers(),c.dispose.call(this)},d.prototype.build=function(){var a=document.createElement("input"),b=document.createElement("div"),c=this.inspector.getPropertyValue(this.propertyDefinition.property),d=document.createElement("label"),e=!1,f=this.inspector.generateSequencedId();b.setAttribute("tabindex",0),b.setAttribute("class","custom-checkbox nolabel"),a.setAttribute("type","checkbox"),a.setAttribute("value","1"),a.setAttribute("placeholder","placeholder"),a.setAttribute("id",f),d.setAttribute("for",f),d.textContent=this.propertyDefinition.title,b.appendChild(a),b.appendChild(d),void 0===c?void 0!==this.propertyDefinition["default"]&&(e=this.normalizeCheckedValue(this.propertyDefinition["default"])):e=this.normalizeCheckedValue(c),a.checked=e,this.containerCell.appendChild(b)},d.prototype.normalizeCheckedValue=function(a){return"0"!=a&&"false"!=a&&a},d.prototype.getInput=function(){return this.containerCell.querySelector("input")},d.prototype.focus=function(){this.getInput().parentNode.focus()},d.prototype.updateDisplayedValue=function(a){this.getInput().checked=this.normalizeCheckedValue(a)},d.prototype.isEmptyValue=function(a){return 0===a||"0"===a||"false"===a||c.isEmptyValue.call(this,a)},d.prototype.registerHandlers=function(){var a=this.getInput();a.addEventListener("change",this.proxy(this.onInputChange))},d.prototype.unregisterHandlers=function(){var a=this.getInput();a.removeEventListener("change",this.proxy(this.onInputChange))},d.prototype.onInputChange=function(){var a=this.getInput().checked;this.inspector.setPropertyValue(this.propertyDefinition.property,a?1:0)},Storm.inspector.propertyEditors.checkbox=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){this.indicatorContainer=null,b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.init=function(){this.dynamicOptions=!this.propertyDefinition.options,this.initialization=!1,c.init.call(this)},d.prototype.dispose=function(){this.unregisterHandlers(),this.destroyCustomSelect(),this.indicatorContainer=null,c.dispose.call(this)},d.prototype.build=function(){var a=document.createElement("select");Storm.foundation.element.addClass(this.containerCell,"dropdown"),Storm.foundation.element.addClass(a,"custom-select"),this.dynamicOptions||this.loadStaticOptions(a),this.containerCell.appendChild(a),this.initCustomSelect(),this.dynamicOptions&&this.loadDynamicOptions(!0)},d.prototype.formatSelectOption=function(a){if(!a.id)return a.text;var b=a.element,c=b.getAttribute("data-icon"),d=b.getAttribute("data-image");return c?'<i class="select-icon '+c+'"></i> '+a.text:d?'<img class="select-image" src="'+d+'" alt="" /> '+a.text:a.text},d.prototype.createOption=function(b,c,d){var e=document.createElement("option");null!==c&&(a.isArray(c)?(c[1].indexOf(".")!==-1?e.setAttribute("data-image",c[1]):e.setAttribute("data-icon",c[1]),e.textContent=c[0]):e.textContent=c),null!==d&&(e.value=d),b.appendChild(e)},d.prototype.createOptions=function(a,b){for(var c in b)this.createOption(a,b[c],c)},d.prototype.initCustomSelect=function(){var b=this.getSelect();if(!Modernizr.touch){var c={dropdownCssClass:"ocInspectorDropdown"};void 0!==this.propertyDefinition.placeholder&&(c.placeholder=this.propertyDefinition.placeholder),c.templateResult=this.formatSelectOption,c.templateSelection=this.formatSelectOption,c.escapeMarkup=function(a){return a},a(b).select2(c),Modernizr.touch||(this.indicatorContainer=a(".select2-container",this.containerCell),this.indicatorContainer.addClass("loading-indicator-container size-small"))}},d.prototype.createPlaceholder=function(a){var b=this.propertyDefinition.placeholder;void 0===b||Modernizr.touch||this.createOption(a,null,null),void 0!==b&&Modernizr.touch&&this.createOption(a,b,null)},d.prototype.getSelect=function(){return this.containerCell.querySelector("select")},d.prototype.clearOptions=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},d.prototype.hasOptionValue=function(a,b){for(var c=a.children,d=0,e=c.length;d<e;d++)if(c[d].value==b)return!0;return!1},d.prototype.normalizeValue=function(a){if(!this.propertyDefinition.booleanValues)return a;var b=String(a);return 0===b.length?"":"true"===b},d.prototype.registerHandlers=function(){var b=this.getSelect();a(b).on("change",this.proxy(this.onSelectionChange))},d.prototype.onSelectionChange=function(){var a=this.getSelect();this.inspector.setPropertyValue(this.propertyDefinition.property,this.normalizeValue(a.value),this.initialization)},d.prototype.onInspectorPropertyChanged=function(a,b){if(this.propertyDefinition.depends&&this.propertyDefinition.depends.indexOf(a)!==-1){var c=this.getDependencyValues();void 0!==this.prevDependencyValues&&this.prevDependencyValues==c||this.loadDynamicOptions()}},d.prototype.onExternalPropertyEditorHidden=function(){this.dynamicOptions&&this.loadDynamicOptions(!1)},d.prototype.updateDisplayedValue=function(a){var b=this.getSelect();b.value=a},d.prototype.getUndefinedValue=function(){if(void 0!==this.propertyDefinition["default"])return this.propertyDefinition["default"];if(void 0===this.propertyDefinition.placeholder){var a=this.getSelect();return a?this.normalizeValue(a.value):void 0}},d.prototype.isEmptyValue=function(a){return this.propertyDefinition.booleanValues?""===a:c.isEmptyValue.call(this,a)},d.prototype.destroyCustomSelect=function(){var b=a(this.getSelect());null!=b.data("select2")&&b.select2("destroy")},d.prototype.unregisterHandlers=function(){var b=this.getSelect();a(b).off("change",this.proxy(this.onSelectionChange))},d.prototype.loadStaticOptions=function(a){var b=this.inspector.getPropertyValue(this.propertyDefinition.property);this.createPlaceholder(a),this.createOptions(a,this.propertyDefinition.options),void 0===b&&(b=this.propertyDefinition["default"]),a.value=b},d.prototype.loadDynamicOptions=function(b){var c=this.inspector.getPropertyValue(this.propertyDefinition.property),d=this.getRootSurface().getValues(),e=this,f=a(this.getSelect()).closest("form");void 0===c&&(c=this.propertyDefinition["default"]);var g=function(a){e.hideLoadingIndicator(),e.optionsRequestDone(a,c,!0)};this.propertyDefinition.depends&&this.saveDependencyValues(),d.inspectorProperty=this.getPropertyPath(),d.inspectorClassName=this.inspector.options.inspectorClass,this.showLoadingIndicator(),this.triggerGetOptions(d,g)!==!1&&f.request("onInspectableGetOptions",{data:d}).done(g).always(this.proxy(this.hideLoadingIndicator))},d.prototype.triggerGetOptions=function(b,c){var d=this.getInspectableElement();if(!d)return!0;var e=a.Event("dropdownoptions.oc.inspector");return d.trigger(e,[{values:b,callback:c,property:this.inspector.getPropertyPath(this.propertyDefinition.property),propertyDefinition:this.propertyDefinition}]),!e.isDefaultPrevented()},d.prototype.saveDependencyValues=function(){this.prevDependencyValues=this.getDependencyValues()},d.prototype.getDependencyValues=function(){for(var a="",b=0,c=this.propertyDefinition.depends.length;b<c;b++){var d=this.propertyDefinition.depends[b],e=this.inspector.getPropertyValue(d);void 0===e&&(e=""),a+=d+":"+e+"-"}return a},d.prototype.showLoadingIndicator=function(){Modernizr.touch||this.indicatorContainer.loadIndicator()},d.prototype.hideLoadingIndicator=function(){this.isDisposed()||Modernizr.touch||(this.indicatorContainer.loadIndicator("hide"),this.indicatorContainer.loadIndicator("destroy"))},d.prototype.optionsRequestDone=function(b,c,d){if(!this.isDisposed()){var e=this.getSelect();if(this.destroyCustomSelect(),this.clearOptions(e),this.initCustomSelect(),this.createPlaceholder(e),b.options)for(var f=0,g=b.options.length;f<g;f++)this.createOption(e,b.options[f].title,b.options[f].value);this.hasOptionValue(e,c)?e.value=c:e.selectedIndex=void 0===this.propertyDefinition.placeholder?0:-1,this.initialization=d,a(e).trigger("change"),this.initialization=!1}},Storm.inspector.propertyEditors.dropdown=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){this.popup=null,b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.unregisterHandlers(),this.popup=null,c.dispose.call(this)},d.prototype.build=function(){var a=document.createElement("a");Storm.foundation.element.addClass(a,"trigger"),a.setAttribute("href","#"),this.setLinkText(a),Storm.foundation.element.addClass(this.containerCell,"trigger-cell"),this.containerCell.appendChild(a)},d.prototype.setLinkText=function(a,b){},d.prototype.getPopupContent=function(){return'<form>                                                                                                  <div class="modal-header">                                                                                  <button type="button" class="close" data-dismiss="popup">&times;</button>                               <h4 class="modal-title">{{property}}</h4>                                                           </div>                                                                                                  <div class="modal-body">                                                                                    <div class="form-group">                                                                                </div>                                                                                              </div>                                                                                                  <div class="modal-footer">                                                                                  <button type="submit" class="btn btn-primary">OK</button>                                               <button type="button" class="btn btn-default" data-dismiss="popup">Cancel</button>                  </div>                                                                                                  </form>'},d.prototype.updateDisplayedValue=function(a){this.setLinkText(this.getLink(),a)},d.prototype.registerHandlers=function(){var b=this.getLink(),c=a(b);b.addEventListener("click",this.proxy(this.onTriggerClick)),c.on("shown.oc.popup",this.proxy(this.onPopupShown)),c.on("hidden.oc.popup",this.proxy(this.onPopupHidden))},d.prototype.unregisterHandlers=function(){var b=this.getLink(),c=a(b);b.removeEventListener("click",this.proxy(this.onTriggerClick)),c.off("shown.oc.popup",this.proxy(this.onPopupShown)),c.off("hidden.oc.popup",this.proxy(this.onPopupHidden))},d.prototype.getLink=function(){return this.containerCell.querySelector("a.trigger")},d.prototype.configurePopup=function(a){},d.prototype.handleSubmit=function(a){},d.prototype.hidePopup=function(){a(this.getLink()).popup("hide")},d.prototype.onTriggerClick=function(b){Storm.foundation.event.stop(b);var c=this.getPopupContent();return c=c.replace("{{property}}",this.propertyDefinition.title),a(b.target).popup({content:c}),!1},d.prototype.onPopupShown=function(b,c,d){a(d).on("submit.inspector","form",this.proxy(this.onSubmit)),this.popup=d.get(0),this.configurePopup(d),this.getRootSurface().popupDisplayed()},d.prototype.onPopupHidden=function(b,c,d){a(d).off(".inspector","form",this.proxy(this.onSubmit)),this.popup=null,this.getRootSurface().popupHidden()},d.prototype.onSubmit=function(b){return b.preventDefault(),this.handleSubmit(a(b.target))!==!1&&(this.setLinkText(this.getLink()),this.hidePopup(),!1)},Storm.inspector.propertyEditors.popupBase=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.popupBase,c=b.prototype,d=function(a,c,d,e){b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.setLinkText=function(b,c){var c=void 0!==c?c:this.inspector.getPropertyValue(this.propertyDefinition.property);void 0===c&&(c=this.propertyDefinition["default"]),c?Storm.foundation.element.removeClass(b,"placeholder"):(c=this.propertyDefinition.placeholder,Storm.foundation.element.addClass(b,"placeholder")),"string"==typeof c&&(c=c.replace(/(?:\r\n|\r|\n)/g," "),c=a.trim(c),c=c.substring(0,300)),b.textContent=c},d.prototype.getPopupContent=function(){return'<form>                                                                                                  <div class="modal-header">                                                                                  <button type="button" class="close" data-dismiss="popup">&times;</button>                               <h4 class="modal-title">{{property}}</h4>                                                           </div>                                                                                                  <div class="modal-body">                                                                                    <div class="form-group">                                                                                    <p class="inspector-field-comment"></p>                                                                 <textarea class="form-control size-small field-textarea" name="name"/>                     </div>                                                                                              </div>                                                                                                  <div class="modal-footer">                                                                                  <button type="submit" class="btn btn-primary">OK</button>                                               <button type="button" class="btn btn-default" data-dismiss="popup">Cancel</button>                  </div>                                                                                                  </form>'},d.prototype.configureComment=function(b){if(this.propertyDefinition.description){var c=a(b).find("p.inspector-field-comment");c.text(this.propertyDefinition.description)}},d.prototype.configurePopup=function(b){var c=a(b).find("textarea"),d=this.inspector.getPropertyValue(this.propertyDefinition.property);this.propertyDefinition.placeholder&&c.attr("placeholder",this.propertyDefinition.placeholder),void 0===d&&(d=this.propertyDefinition["default"]),c.val(d),c.focus(),this.configureComment(b)},d.prototype.handleSubmit=function(b){var c=b.find("textarea"),d=(this.getLink(),a.trim(c.val()));this.inspector.setPropertyValue(this.propertyDefinition.property,d)},Storm.inspector.propertyEditors.text=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){this.editors=[],this.loadedItems=null,b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.init=function(){this.initControlGroup(),c.init.call(this)},d.prototype.dispose=function(){this.disposeEditors(),this.disposeControls(),this.editors=null,c.dispose.call(this)},d.prototype.build=function(){var a=document.createElement("a");Storm.foundation.element.addClass(a,"trigger"),a.setAttribute("href","#"),this.setLinkText(a),Storm.foundation.element.addClass(this.containerCell,"trigger-cell"),this.containerCell.appendChild(a),void 0!==this.propertyDefinition.items?this.loadStaticItems():this.loadDynamicItems()},d.prototype.loadStaticItems=function(){var a=[];for(var b in this.propertyDefinition.items)a.push({value:b,title:this.propertyDefinition.items[b]});for(var c=a.length-1;c>=0;c--)this.buildItemEditor(a[c].value,a[c].title)},d.prototype.setLinkText=function(a,b){var b=void 0!==b&&null!==b?b:this.getNormalizedValue(),c="[ ]";if(void 0===b&&(b=this.propertyDefinition["default"]),void 0!==b&&void 0!==b.length&&b.length>0&&"string"!=typeof b){for(var d=[],e=0,f=b.length;e<f;e++)d.push(this.valueToText(b[e]));c="["+d.join(", ")+"]",Storm.foundation.element.removeClass(a,"placeholder")}else c=this.propertyDefinition.placeholder,("string"==typeof c&&0==c.length||void 0===c)&&(c="[ ]"),Storm.foundation.element.addClass(a,"placeholder");a.textContent=c},d.prototype.buildItemEditor=function(a,b){var c={title:b,itemType:"property",groupIndex:this.group.getGroupIndex()},d=this.createGroupedRow(c),e=this.containerCell.parentNode,f=this.containerCell.parentNode.parentNode,g=document.createElement("td");this.buildCheckbox(g,a,b),d.appendChild(g),f.insertBefore(d,e.nextSibling)},d.prototype.buildCheckbox=function(a,b,c){var d={property:b,title:c,"default":this.isCheckedByDefault(b)},e=new Storm.inspector.propertyEditors.checkbox(this,d,a,this.group);this.editors.push(e)},d.prototype.isCheckedByDefault=function(a){return!!this.propertyDefinition["default"]&&this.propertyDefinition["default"].indexOf(a)>-1},d.prototype.showLoadingIndicator=function(){a(this.getLink()).loadIndicator()},d.prototype.hideLoadingIndicator=function(){if(!this.isDisposed()){var b=a(this.getLink());b.loadIndicator("hide"),b.loadIndicator("destroy")}},d.prototype.loadDynamicItems=function(){var b=this.getLink(),c=this.inspector.getValues(),d=a(b).closest("form");Storm.foundation.element.addClass(b,"loading-indicator-container size-small"),this.showLoadingIndicator(),c.inspectorProperty=this.getPropertyPath(),c.inspectorClassName=this.inspector.options.inspectorClass,d.request("onInspectableGetOptions",{data:c}).done(this.proxy(this.itemsRequestDone)).always(this.proxy(this.hideLoadingIndicator))},d.prototype.itemsRequestDone=function(a,b,c){if(!this.isDisposed()){if(this.loadedItems={},a.options)for(var d=a.options.length-1;d>=0;d--)this.buildItemEditor(a.options[d].value,a.options[d].title),this.loadedItems[a.options[d].value]=a.options[d].title;
this.setLinkText(this.getLink())}},d.prototype.getLink=function(){return this.containerCell.querySelector("a.trigger")},d.prototype.getItemsSource=function(){return void 0!==this.propertyDefinition.items?this.propertyDefinition.items:this.loadedItems},d.prototype.valueToText=function(a){var b=this.getItemsSource();if(!b)return a;for(var c in b)if(c==a)return b[c];return a},d.prototype.cleanUpValue=function(a){if(!a)return a;for(var b=[],c=this.getItemsSource(),d=0,e=a.length;d<e;d++){var f=a[d];void 0!==c[f]&&b.push(f)}return b},d.prototype.getNormalizedValue=function(){var a=this.inspector.getPropertyValue(this.propertyDefinition.property);return null===a&&(a=void 0),void 0===a?a:void 0!==a.length&&"string"!=typeof a?a:void 0},d.prototype.supportsExternalParameterEditor=function(){return!1},d.prototype.isGroupedEditor=function(){return!0},d.prototype.getPropertyValue=function(a){var b=this.getNormalizedValue();return void 0===b?this.isCheckedByDefault(a):!!b&&b.indexOf(a)>-1},d.prototype.setPropertyValue=function(a,b){var c=this.getNormalizedValue();void 0===c&&(c=this.propertyDefinition["default"]),c||(c=[]);var d=[],e=this.getItemsSource();for(var f in e)f!==a?c.indexOf(f)!==-1&&d.push(f):b&&d.push(f);this.inspector.setPropertyValue(this.propertyDefinition.property,this.cleanUpValue(d)),this.setLinkText(this.getLink())},d.prototype.generateSequencedId=function(){return this.inspector.generateSequencedId()},d.prototype.disposeEditors=function(){for(var a=0,b=this.editors.length;a<b;a++){var c=this.editors[a];c.dispose()}},d.prototype.disposeControls=function(){var b=this.getLink();void 0===this.propertyDefinition.items&&a(b).loadIndicator("destroy"),b.parentNode.removeChild(b)},Storm.inspector.propertyEditors.set=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){if(this.currentRowInspector=null,this.popup=null,void 0===c.titleProperty)throw new Error("The titleProperty property should be specified in the objectList editor configuration. Property: "+c.property);if(void 0===c.itemProperties)throw new Error("The itemProperties property should be specified in the objectList editor configuration. Property: "+c.property);b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.init=function(){if(this.isKeyValueMode()){var a=this.getKeyProperty();if(!a)throw new Error("Object list key property "+this.propertyDefinition.keyProperty+" is not defined in itemProperties. Property: "+this.propertyDefinition.property)}c.init.call(this)},d.prototype.dispose=function(){this.unregisterHandlers(),this.removeControls(),this.currentRowInspector=null,this.popup=null,c.dispose.call(this)},d.prototype.supportsExternalParameterEditor=function(){return!1},d.prototype.build=function(){var a=document.createElement("a");Storm.foundation.element.addClass(a,"trigger"),a.setAttribute("href","#"),this.setLinkText(a),Storm.foundation.element.addClass(this.containerCell,"trigger-cell"),this.containerCell.appendChild(a)},d.prototype.setLinkText=function(a,b){var b=void 0!==b&&null!==b?b:this.inspector.getPropertyValue(this.propertyDefinition.property);if(null===b&&(b=void 0),void 0===b){var c=this.propertyDefinition.placeholder;void 0!==c?(Storm.foundation.element.addClass(a,"placeholder"),a.textContent=c):a.textContent="Items: 0"}else{var d=0;if(this.isKeyValueMode()){if("object"!=typeof b)throw new Error("Object list value should be an object. Property: "+this.propertyDefinition.property);d=this.getValueKeys(b).length}else{if(void 0===b.length)throw new Error("Object list value should be an array. Property: "+this.propertyDefinition.property);d=b.length}Storm.foundation.element.removeClass(a,"placeholder"),a.textContent="Items: "+d}},d.prototype.getPopupContent=function(){return'<form>                                                                                                  <div class="modal-header">                                                                                  <button type="button" class="close" data-dismiss="popup">&times;</button>                               <h4 class="modal-title">{{property}}</h4>                                                           </div>                                                                                                  <div>                                                                                                       <div class="layout inspector-columns-editor">                                                               <div class="layout-row">                                                                                    <div class="layout-cell items-column">                                                                      <div class="layout-relative">                                                                               <div class="layout">                                                                                        <div class="layout-row min-size">                                                                           <div class="control-toolbar toolbar-padded">                                                                <div class="toolbar-item">                                                                                  <div class="btn-group">                                                                                     <button type="button" class="btn btn-primary                                                                oc-icon-plus"                                                                                           data-cmd="create-item">Add</button>                                                                 <button type="button" class="btn btn-default                                                                empty oc-icon-trash-o"                                                                                  data-cmd="delete-item"></button>                                                                </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="layout-row">                                                                                    <div class="layout-cell">                                                                                   <div class="layout-relative">                                                                               <div class="layout-absolute">                                                                               <div class="control-scrollpad"                                                                              data-control="scrollpad">                                                                               <div class="scroll-wrapper">                                                                                <table class="table data                                                                                    no-offset-bottom                                                                                        inspector-table-list">                                                                              </table>                                                                                            </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="layout-cell">                                                                                   <div class="layout-relative">                                                                               <div class="layout-absolute">                                                                               <div class="control-scrollpad" data-control="scrollpad">                                                    <div class="scroll-wrapper inspector-wrapper">                                                              <div data-inspector-container>                                                                          </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="modal-footer">                                                                                  <button type="submit" class="btn btn-primary">OK</button>                                               <button type="button" class="btn btn-default" data-dismiss="popup">Cancel</button>                  </div>                                                                                                  </form>'},d.prototype.buildPopupContents=function(a){this.buildItemsTable(a)},d.prototype.buildItemsTable=function(a){var b=a.querySelector("table"),c=document.createElement("tbody"),d=this.inspector.getPropertyValue(this.propertyDefinition.property),e=this.propertyDefinition.titleProperty;if(void 0===d||0===this.getValueKeys(d).length){var f=this.buildEmptyRow();c.appendChild(f)}else{var g=void 0;for(var h in d){var i=d[h],j=this.addKeyProperty(h,i),k=i[e],f=this.buildTableRow(k,"rowlink");f.setAttribute("data-inspector-values",JSON.stringify(j)),c.appendChild(f),void 0===g&&(g=f)}}b.appendChild(c),void 0!==g&&this.selectRow(g,!0),this.updateScrollpads()},d.prototype.buildEmptyRow=function(){return this.buildTableRow("No items found","no-data","nolink")},d.prototype.removeEmptyRow=function(){var a=this.getTableBody(),b=a.querySelector("tr.no-data");b&&a.removeChild(b)},d.prototype.buildTableRow=function(a,b,c){var d=document.createElement("tr"),e=document.createElement("td");return e.textContent=a,void 0!==b&&Storm.foundation.element.addClass(d,b),void 0!==c&&Storm.foundation.element.addClass(e,c),d.appendChild(e),d},d.prototype.updateScrollpads=function(){a(".control-scrollpad",this.popup).scrollpad("update")},d.prototype.selectRow=function(a,b){var c=(a.parentNode,this.getInspectorContainer()),d=this.getSelectedRow();if(d!==a||b){if(d){if(!this.validateKeyValue())return;if(this.currentRowInspector&&!this.currentRowInspector.validate())return;this.applyDataToRow(d),Storm.foundation.element.removeClass(d,"active")}this.disposeInspector(),Storm.foundation.element.addClass(a,"active"),this.createInspectorForRow(a,c)}},d.prototype.createInspectorForRow=function(b,c){var d=b.getAttribute("data-inspector-values");if(void 0===d||"string"!=typeof d)throw new Error("Values not found for the selected row.");var e=this.propertyDefinition.itemProperties,f=a.parseJSON(d),g={enableExternalParameterEditor:!1,onChange:this.proxy(this.onInspectorDataChange),inspectorClass:this.inspector.options.inspectorClass};this.currentRowInspector=new Storm.inspector.surface(c,e,f,Storm.inspector.helpers.generateElementUniqueId(c),g)},d.prototype.disposeInspector=function(){Storm.foundation.controlUtils.disposeControls(this.popup.querySelector("[data-inspector-container]")),this.currentRowInspector=null},d.prototype.applyDataToRow=function(a){if(null!==this.currentRowInspector){var b=this.currentRowInspector.getValues();a.setAttribute("data-inspector-values",JSON.stringify(b))}},d.prototype.updateRowText=function(b,c){var d=this.getSelectedRow();if(!d)throw new Exception("A row is not found for the updated data");b===this.propertyDefinition.titleProperty&&(c=a.trim(c),0===c.length?(c="[No title]",Storm.foundation.element.addClass(d,"disabled")):Storm.foundation.element.removeClass(d,"disabled"),d.firstChild.textContent=c)},d.prototype.getSelectedRow=function(){if(!this.popup)throw new Error("Trying to get selected row without a popup reference.");for(var a=this.getTableBody().children,b=0,c=a.length;b<c;b++)if(Storm.foundation.element.hasClass(a[b],"active"))return a[b];return null},d.prototype.createItem=function(){var a=this.getSelectedRow();if(a){if(!this.validateKeyValue())return;if(this.currentRowInspector&&!this.currentRowInspector.validate())return;this.applyDataToRow(a),Storm.foundation.element.removeClass(a,"active")}this.disposeInspector();var b="New item",c=this.buildTableRow(b,"rowlink active"),d=this.getTableBody(),e={};e[this.propertyDefinition.titleProperty]=b,c.setAttribute("data-inspector-values",JSON.stringify(e)),d.appendChild(c),this.selectRow(c,!0),this.removeEmptyRow(),this.updateScrollpads()},d.prototype.deleteItem=function(){var a=this.getSelectedRow();if(a){var b=a.nextElementSibling,c=a.previousElementSibling,d=this.getTableBody();this.disposeInspector(),d.removeChild(a);var e=b?b:c;e?this.selectRow(e):d.appendChild(this.buildEmptyRow()),this.updateScrollpads()}},d.prototype.applyDataToParentInspector=function(){var b=this.getSelectedRow(),c=this.getTableBody(),d=c.querySelectorAll("tr[data-inspector-values]"),e=this.getLink(),f=this.getEmptyValue();if(b){if(!this.validateKeyValue())return;if(this.currentRowInspector&&!this.currentRowInspector.validate())return;this.applyDataToRow(b)}for(var g=0,h=d.length;g<h;g++){var i=d[g],j=a.parseJSON(i.getAttribute("data-inspector-values"));if(this.isKeyValueMode()){var k=j[this.propertyDefinition.keyProperty];f[k]=this.removeKeyProperty(j)}else f.push(j)}return this.inspector.setPropertyValue(this.propertyDefinition.property,f),this.setLinkText(e,f),a(e).popup("hide"),!1},d.prototype.validateKeyValue=function(){if(!this.isKeyValueMode())return!0;if(null===this.currentRowInspector)return!0;var b=this.currentRowInspector.getValues(),c=this.propertyDefinition.keyProperty;if(void 0===b[c])throw new Error("Key property "+c+" is not found in the Inspector data. Property: "+this.propertyDefinition.property);var d=b[c],e=this.getKeyProperty().title;if("string"!=typeof d)throw new Error("Key property ("+c+") value should be a string. Property: "+this.propertyDefinition.property);if(0===a.trim(d).length)return Storm.flashMsg({text:"The value of key property "+e+" cannot be empty.","class":"error",interval:3}),!1;for(var f=this.getSelectedRow(),g=this.getTableBody(),h=g.querySelectorAll("tr[data-inspector-values]"),i=0,j=h.length;i<j;i++){var k=h[i],l=a.parseJSON(k.getAttribute("data-inspector-values"));if(f!=k&&l[c]==d)return Storm.flashMsg({text:"The value of key property "+e+" should be unique.","class":"error",interval:3}),!1}return!0},d.prototype.getLink=function(){return this.containerCell.querySelector("a.trigger")},d.prototype.getPopupFormElement=function(){var a=this.popup.querySelector("form");return a||this.throwError("Cannot find form element in the popup window."),a},d.prototype.getInspectorContainer=function(){return this.popup.querySelector("div[data-inspector-container]")},d.prototype.getTableBody=function(){return this.popup.querySelector("table.inspector-table-list tbody")},d.prototype.isKeyValueMode=function(){return void 0!==this.propertyDefinition.keyProperty},d.prototype.getKeyProperty=function(){for(var a=0,b=this.propertyDefinition.itemProperties.length;a<b;a++){var c=this.propertyDefinition.itemProperties[a];if(c.property==this.propertyDefinition.keyProperty)return c}},d.prototype.getValueKeys=function(a){var b=[];for(var c in a)b.push(c);return b},d.prototype.addKeyProperty=function(a,b){return this.isKeyValueMode()?(b[this.propertyDefinition.keyProperty]=a,b):b},d.prototype.removeKeyProperty=function(a){if(!this.isKeyValueMode())return a;var b=a;return void 0!==b[this.propertyDefinition.keyProperty]&&delete b[this.propertyDefinition.keyProperty],b},d.prototype.getEmptyValue=function(){return this.isKeyValueMode()?{}:[]},d.prototype.registerHandlers=function(){var b=this.getLink(),c=a(b);b.addEventListener("click",this.proxy(this.onTriggerClick)),c.on("shown.oc.popup",this.proxy(this.onPopupShown)),c.on("hidden.oc.popup",this.proxy(this.onPopupHidden))},d.prototype.unregisterHandlers=function(){var b=this.getLink(),c=a(b);b.removeEventListener("click",this.proxy(this.onTriggerClick)),c.off("shown.oc.popup",this.proxy(this.onPopupShown)),c.off("hidden.oc.popup",this.proxy(this.onPopupHidden))},d.prototype.onTriggerClick=function(b){Storm.foundation.event.stop(b);var c=this.getPopupContent();return c=c.replace("{{property}}",this.propertyDefinition.title),a(b.target).popup({content:c}),!1},d.prototype.onPopupShown=function(b,c,d){a(d).on("submit.inspector","form",this.proxy(this.onSubmit)),a(d).on("click","tr.rowlink",this.proxy(this.onRowClick)),a(d).on("click.inspector","[data-cmd]",this.proxy(this.onCommand)),this.popup=d.get(0),this.buildPopupContents(this.popup),this.getRootSurface().popupDisplayed()},d.prototype.onPopupHidden=function(b,c,d){a(d).off(".inspector",this.proxy(this.onSubmit)),a(d).off("click","tr.rowlink",this.proxy(this.onRowClick)),a(d).off("click.inspector","[data-cmd]",this.proxy(this.onCommand)),this.disposeInspector(),Storm.foundation.controlUtils.disposeControls(this.popup),this.popup=null,this.getRootSurface().popupHidden()},d.prototype.onSubmit=function(a){return this.applyDataToParentInspector(),a.preventDefault(),!1},d.prototype.onRowClick=function(a){this.selectRow(a.currentTarget)},d.prototype.onInspectorDataChange=function(a,b){this.updateRowText(a,b)},d.prototype.onCommand=function(a){var b=a.currentTarget.getAttribute("data-cmd");switch(b){case"create-item":this.createItem();break;case"delete-item":this.deleteItem()}},d.prototype.removeControls=function(){this.popup&&this.disposeInspector(this.popup)},Storm.inspector.propertyEditors.objectList=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.base,c=b.prototype,d=function(a,c,d,e){void 0===c.properties&&this.throwError("The properties property should be specified in the object editor configuration."),b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.init=function(){this.initControlGroup(),c.init.call(this)},d.prototype.build=function(){var a=this.containerCell.parentNode,b=document.createElement("div"),c={enableExternalParameterEditor:!1,onChange:this.proxy(this.onInspectorDataChange),inspectorClass:this.inspector.options.inspectorClass},d=this.inspector.getPropertyValue(this.propertyDefinition.property);void 0===d&&(d={}),this.childInspector=new Storm.inspector.surface(b,this.propertyDefinition.properties,d,this.inspector.getInspectorUniqueId()+"-"+this.propertyDefinition.property,c,this.inspector,this.group,this.propertyDefinition.property),this.inspector.mergeChildSurface(this.childInspector,a)},d.prototype.cleanUpValue=function(a){if(void 0!==a&&"object"==typeof a)return void 0===this.propertyDefinition.ignoreIfPropertyEmpty?a:this.getValueOrRemove(a)},d.prototype.getValueOrRemove=function(a){if(void 0===this.propertyDefinition.ignoreIfPropertyEmpty)return a;var b=this.propertyDefinition.ignoreIfPropertyEmpty,c=a[b];return this.isEmptyValue(c)?Storm.inspector.removedProperty:a},d.prototype.supportsExternalParameterEditor=function(){return!1},d.prototype.isGroupedEditor=function(){return!0},d.prototype.getUndefinedValue=function(){for(var a={},b=0,c=this.propertyDefinition.properties.length;b<c;b++){var d=this.propertyDefinition.properties[b].property,e=this.childInspector.findPropertyEditor(d);e&&(a[d]=e.getUndefinedValue())}return this.getValueOrRemove(a)},d.prototype.validate=function(a){var b=this.childInspector.getValues();return this.cleanUpValue(b)===Storm.inspector.removedProperty||this.childInspector.validate(a)},d.prototype.onInspectorDataChange=function(a,b){var c=this.childInspector.getValues();this.inspector.setPropertyValue(this.propertyDefinition.property,this.cleanUpValue(c))},Storm.inspector.propertyEditors.object=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.text,c=b.prototype,d=function(a,c,d,e){b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.setLinkText=function(a,b){var b=void 0!==b?b:this.inspector.getPropertyValue(this.propertyDefinition.property);void 0===b&&(b=this.propertyDefinition["default"]),this.checkValueType(b),b?(Storm.foundation.element.removeClass(a,"placeholder"),a.textContent="["+b.join(", ")+"]"):(b=this.propertyDefinition.placeholder,Storm.foundation.element.addClass(a,"placeholder"),b||(b="[]"),a.textContent=b)},d.prototype.checkValueType=function(a){a&&"[object Array]"!==Object.prototype.toString.call(a)&&this.throwError("The string list value should be an array.")},d.prototype.configurePopup=function(b){var c=a(b).find("textarea"),d=this.inspector.getPropertyValue(this.propertyDefinition.property);this.propertyDefinition.placeholder&&c.attr("placeholder",this.propertyDefinition.placeholder),void 0===d&&(d=this.propertyDefinition["default"]),this.checkValueType(d),d&&d.length&&c.val(d.join("\n")),c.focus(),this.configureComment(b)},d.prototype.handleSubmit=function(b){var c=b.find("textarea"),d=(this.getLink(),a.trim(c.val())),e=[],f=[];if(d.length){d=d.replace(/\r\n/g,"\n"),e=d.split("\n");for(var g=0,h=e.length;g<h;g++){var i=a.trim(e[g]);i.length>0&&f.push(i)}}this.inspector.setPropertyValue(this.propertyDefinition.property,f)},Storm.inspector.propertyEditors.stringList=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.popupBase,c=b.prototype,d=function(a,c,d,e){this.items=null,b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){c.dispose.call(this)},d.prototype.init=function(){c.init.call(this)},d.prototype.supportsExternalParameterEditor=function(){return!1},d.prototype.setLinkText=function(a,b){var b=void 0!==b?b:this.inspector.getPropertyValue(this.propertyDefinition.property);void 0===b&&(b=this.propertyDefinition["default"]),this.checkValueType(b),b?(Storm.foundation.element.removeClass(a,"placeholder"),a.textContent="["+b.join(", ")+"]"):(b=this.propertyDefinition.placeholder,Storm.foundation.element.addClass(a,"placeholder"),b||(b="[]"),a.textContent=b)},d.prototype.checkValueType=function(a){a&&"[object Array]"!==Object.prototype.toString.call(a)&&this.throwError("The string list value should be an array.")},d.prototype.getPopupContent=function(){return'<form>                                                                                                  <div class="modal-header">                                                                                  <button type="button" class="close" data-dismiss="popup">&times;</button>                               <h4 class="modal-title">{{property}}</h4>                                                           </div>                                                                                                  <div class="modal-body">                                                                                    <div class="control-toolbar">                                                                               <div class="toolbar-item">                                                                                  <div class="btn-group">                                                                                     <button type="button" class="btn btn-primary                                                                oc-icon-plus"                                                                                           data-cmd="create-item">Add</button>                                                                 <button type="button" class="btn btn-default                                                                empty oc-icon-trash-o"                                                                                  data-cmd="delete-item"></button>                                                                </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="form-group">                                                                                    <div class="inspector-dictionary-container">                                                                <div class="values">                                                                                        <div class="control-scrollpad"                                                                              data-control="scrollpad">                                                                               <div class="scroll-wrapper">                                                                                <table class="                                                                                              no-offset-bottom                                                                                        inspector-dictionary-table">                                                                        </table>                                                                                            </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="modal-footer">                                                                                  <button type="submit" class="btn btn-primary">OK</button>                                               <button type="button" class="btn btn-default" data-dismiss="popup">Cancel</button>                   </div>                                                                                                  </form>'},d.prototype.configurePopup=function(a){this.initAutocomplete(),this.buildItemsTable(a.get(0)),this.focusFirstInput()},d.prototype.handleSubmit=function(a){return this.applyValues()},d.prototype.buildItemsTable=function(a){var b=a.querySelector("table.inspector-dictionary-table"),c=document.createElement("tbody"),d=this.inspector.getPropertyValue(this.propertyDefinition.property);if(void 0===d&&(d=this.propertyDefinition["default"]),void 0===d||0===this.getValueKeys(d).length){var e=this.buildEmptyRow();c.appendChild(e)}else for(var f in d){var e=this.buildTableRow(d[f]);c.appendChild(e)}b.appendChild(c),this.updateScrollpads()},d.prototype.buildTableRow=function(a){var b=document.createElement("tr"),c=document.createElement("td");return this.createInput(c,a),b.appendChild(c),b},d.prototype.buildEmptyRow=function(){return this.buildTableRow(null)},d.prototype.createInput=function(a,b){var c=document.createElement("input"),d=document.createElement("div");c.setAttribute("type","text"),c.setAttribute("class","form-control"),c.value=b,d.appendChild(c),a.appendChild(d)},d.prototype.setActiveCell=function(a){for(var b=this.popup.querySelectorAll("td.active"),c=b.length-1;c>=0;c--)Storm.foundation.element.removeClass(b[c],"active");var d=a.parentNode.parentNode;Storm.foundation.element.addClass(d,"active"),this.buildAutoComplete(a)},d.prototype.createItem=function(){var a=this.getActiveRow(),b=this.buildEmptyRow(),c=this.getTableBody(),d=a?a.nextElementSibling:null;c.insertBefore(b,d),this.focusAndMakeActive(b.querySelector("input")),this.updateScrollpads()},d.prototype.deleteItem=function(){var a=this.getActiveRow(),b=this.getTableBody();if(a){var c=a.nextElementSibling,d=a.previousElementSibling,e=this.getRowInputByIndex(a,0);e&&this.removeAutocomplete(e),b.removeChild(a);var f=c?c:d;f||(f=this.buildEmptyRow(),b.appendChild(f)),this.focusAndMakeActive(f.querySelector("input")),this.updateScrollpads()}},d.prototype.applyValues=function(){for(var b=this.getTableBody(),c=b.querySelectorAll("tr"),d=this.getLink(),e=[],f=0,g=c.length;f<g;f++){var h=c[f],i=this.getRowInputByIndex(h,0),j=a.trim(i.value);0!=j.length&&e.push(j)}this.inspector.setPropertyValue(this.propertyDefinition.property,e),this.setLinkText(d,e)},d.prototype.getValueKeys=function(a){var b=[];for(var c in a)b.push(c);return b},d.prototype.getActiveRow=function(){var a=this.popup.querySelector("td.active");return a?a.parentNode:null},d.prototype.getTableBody=function(){return this.popup.querySelector("table.inspector-dictionary-table tbody")},d.prototype.updateScrollpads=function(){a(".control-scrollpad",this.popup).scrollpad("update")},d.prototype.focusFirstInput=function(){var a=this.popup.querySelector("td input");a&&(a.focus(),this.setActiveCell(a))},d.prototype.getEditorCell=function(a){return a.parentNode.parentNode},d.prototype.getEditorRow=function(a){return a.parentNode.parentNode.parentNode},d.prototype.focusAndMakeActive=function(a){a.focus(),this.setActiveCell(a)},d.prototype.getRowInputByIndex=function(a,b){return a.cells[b].querySelector("input")},d.prototype.navigateDown=function(a){var b=this.getEditorCell(a.currentTarget),c=this.getEditorRow(a.currentTarget),d=c.nextElementSibling;if(d){var e=d.cells[b.cellIndex].querySelector("input");this.focusAndMakeActive(e)}},d.prototype.navigateUp=function(a){var b=this.getEditorCell(a.currentTarget),c=this.getEditorRow(a.currentTarget),d=c.previousElementSibling;if(d){var e=d.cells[b.cellIndex].querySelector("input");this.focusAndMakeActive(e)}},d.prototype.initAutocomplete=function(){void 0!==this.propertyDefinition.items?(this.items=this.prepareItems(this.propertyDefinition.items),this.initializeAutocompleteForCurrentInput()):this.loadDynamicItems()},d.prototype.initializeAutocompleteForCurrentInput=function(){var a=document.activeElement;if(a){var b=this.popup.querySelectorAll("td input.form-control");if(b)for(var c=b.length-1;c>=0;c--)if(b[c]===a)return void this.buildAutoComplete(b[c])}},d.prototype.buildAutoComplete=function(b){null!==this.items&&a(b).autocomplete({source:this.items,matchWidth:!0,menu:'<ul class="autocomplete dropdown-menu inspector-autocomplete"></ul>',bodyContainer:!0})},d.prototype.removeAutocomplete=function(b){var c=a(b);
c.data("autocomplete")&&c.autocomplete("destroy")},d.prototype.prepareItems=function(b){var c={};if(a.isArray(b))for(var d=0,e=b.length;d<e;d++)c[b[d]]=b[d];else c=b;return c},d.prototype.loadDynamicItems=function(){if(!this.isDisposed()){var b=this.getRootSurface().getValues(),c=a(this.popup).find("form");this.triggerGetItems(b)!==!1&&(b.inspectorProperty=this.getPropertyPath(),b.inspectorClassName=this.inspector.options.inspectorClass,c.request("onInspectableGetOptions",{data:b}).done(this.proxy(this.itemsRequestDone)))}},d.prototype.triggerGetItems=function(b){var c=this.getInspectableElement();if(!c)return!0;var d=a.Event("autocompleteitems.oc.inspector");return c.trigger(d,[{values:b,callback:this.proxy(this.itemsRequestDone),property:this.inspector.getPropertyPath(this.propertyDefinition.property),propertyDefinition:this.propertyDefinition}]),!d.isDefaultPrevented()},d.prototype.itemsRequestDone=function(a){if(!this.isDisposed()){var b={};if(a.options)for(var c=a.options.length-1;c>=0;c--)b[a.options[c].value]=a.options[c].title;this.items=this.prepareItems(b),this.initializeAutocompleteForCurrentInput()}},d.prototype.removeAutocompleteFromAllRows=function(){for(var a=this.popup.querySelector("td input.form-control"),b=a.length-1;b>=0;b--)this.removeAutocomplete(a[b])},d.prototype.onPopupShown=function(a,b,d){c.onPopupShown.call(this,a,b,d),d.on("focus.inspector","td input",this.proxy(this.onFocus)),d.on("blur.inspector","td input",this.proxy(this.onBlur)),d.on("keydown.inspector","td input",this.proxy(this.onKeyDown)),d.on("click.inspector","[data-cmd]",this.proxy(this.onCommand))},d.prototype.onPopupHidden=function(a,b,d){d.off(".inspector","td input"),d.off(".inspector","[data-cmd]",this.proxy(this.onCommand)),this.removeAutocompleteFromAllRows(),this.items=null,c.onPopupHidden.call(this,a,b,d)},d.prototype.onFocus=function(a){this.setActiveCell(a.currentTarget)},d.prototype.onBlur=function(b){a(b.relatedTarget).closest("ul.inspector-autocomplete").length>0||this.removeAutocomplete(b.currentTarget)},d.prototype.onCommand=function(a){var b=a.currentTarget.getAttribute("data-cmd");switch(b){case"create-item":this.createItem();break;case"delete-item":this.deleteItem()}},d.prototype.onKeyDown=function(a){return 40==a.keyCode?this.navigateDown(a):38==a.keyCode?this.navigateUp(a):void 0},Storm.inspector.propertyEditors.stringListAutocomplete=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.popupBase,c=b.prototype,d=function(a,c,d,e){this.keyValidationSet=null,this.valueValidationSet=null,b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.disposeValidators(),this.keyValidationSet=null,this.valueValidationSet=null,c.dispose.call(this)},d.prototype.init=function(){this.initValidators(),c.init.call(this)},d.prototype.supportsExternalParameterEditor=function(){return!1},d.prototype.setLinkText=function(b,c){var c=void 0!==c?c:this.inspector.getPropertyValue(this.propertyDefinition.property);if(void 0===c&&(c=this.propertyDefinition["default"]),void 0===c||a.isEmptyObject(c)){var d=this.propertyDefinition.placeholder;void 0!==d?(Storm.foundation.element.addClass(b,"placeholder"),b.textContent=d):b.textContent="Items: 0"}else{"object"!=typeof c&&this.throwError("Object list value should be an object.");var e=this.getValueKeys(c).length;Storm.foundation.element.removeClass(b,"placeholder"),b.textContent="Items: "+e}},d.prototype.getPopupContent=function(){return'<form>                                                                                                  <div class="modal-header">                                                                                  <button type="button" class="close" data-dismiss="popup">&times;</button>                               <h4 class="modal-title">{{property}}</h4>                                                           </div>                                                                                                  <div class="modal-body">                                                                                    <div class="control-toolbar">                                                                               <div class="toolbar-item">                                                                                  <div class="btn-group">                                                                                     <button type="button" class="btn btn-primary                                                                oc-icon-plus"                                                                                           data-cmd="create-item">Add</button>                                                                 <button type="button" class="btn btn-default                                                                empty oc-icon-trash-o"                                                                                  data-cmd="delete-item"></button>                                                                </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="form-group">                                                                                    <div class="inspector-dictionary-container">                                                                <table class="headers">                                                                                     <thead>                                                                                                     <tr>                                                                                                        <td>Key</td>                                                                                            <td>Value</td>                                                                                      </tr>                                                                                               </thead>                                                                                            </table>                                                                                                <div class="values">                                                                                        <div class="control-scrollpad"                                                                              data-control="scrollpad">                                                                               <div class="scroll-wrapper">                                                                                <table class="                                                                                              no-offset-bottom                                                                                        inspector-dictionary-table">                                                                        </table>                                                                                            </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                              </div>                                                                                                  <div class="modal-footer">                                                                                  <button type="submit" class="btn btn-primary">OK</button>                                               <button type="button" class="btn btn-default" data-dismiss="popup">Cancel</button>                  </div>                                                                                                  </form>'},d.prototype.configurePopup=function(a){this.buildItemsTable(a.get(0)),this.focusFirstInput()},d.prototype.handleSubmit=function(a){return this.applyValues()},d.prototype.buildItemsTable=function(a){var b=a.querySelector("table.inspector-dictionary-table"),c=document.createElement("tbody"),d=this.inspector.getPropertyValue(this.propertyDefinition.property);this.propertyDefinition.titleProperty;if(void 0===d&&(d=this.propertyDefinition["default"]),void 0===d||0===this.getValueKeys(d).length){var e=this.buildEmptyRow();c.appendChild(e)}else for(var f in d){var e=this.buildTableRow(f,d[f]);c.appendChild(e)}b.appendChild(c),this.updateScrollpads()},d.prototype.buildTableRow=function(a,b){var c=document.createElement("tr"),d=document.createElement("td"),e=document.createElement("td");return this.createInput(d,a),this.createInput(e,b),c.appendChild(d),c.appendChild(e),c},d.prototype.buildEmptyRow=function(){return this.buildTableRow(null,null)},d.prototype.createInput=function(a,b){var c=document.createElement("input"),d=document.createElement("div");c.setAttribute("type","text"),c.setAttribute("class","form-control"),c.value=b,d.appendChild(c),a.appendChild(d)},d.prototype.setActiveCell=function(a){for(var b=this.popup.querySelectorAll("td.active"),c=b.length-1;c>=0;c--)Storm.foundation.element.removeClass(b[c],"active");var d=a.parentNode.parentNode;Storm.foundation.element.addClass(d,"active")},d.prototype.createItem=function(){var a=this.getActiveRow(),b=this.buildEmptyRow(),c=this.getTableBody(),d=a?a.nextElementSibling:null;c.insertBefore(b,d),this.focusAndMakeActive(b.querySelector("input")),this.updateScrollpads()},d.prototype.deleteItem=function(){var a=this.getActiveRow(),b=this.getTableBody();if(a){var c=a.nextElementSibling,d=a.previousElementSibling;b.removeChild(a);var e=c?c:d;e||(e=this.buildEmptyRow(),b.appendChild(e)),this.focusAndMakeActive(e.querySelector("input")),this.updateScrollpads()}},d.prototype.applyValues=function(){for(var b=this.getTableBody(),c=b.querySelectorAll("tr"),d=this.getLink(),e={},f=0,g=c.length;f<g;f++){var h=c[f],i=this.getRowInputByIndex(h,0),j=this.getRowInputByIndex(h,1),k=a.trim(i.value),l=a.trim(j.value);if(0!=k.length||0!=l.length){if(0==k.length)return Storm.flashMsg({text:"The key cannot be empty.","class":"error",interval:3}),this.focusAndMakeActive(i),!1;if(0==l.length)return Storm.flashMsg({text:"The value cannot be empty.","class":"error",interval:3}),this.focusAndMakeActive(j),!1;if(void 0!==e[k])return Storm.flashMsg({text:"Keys should be unique.","class":"error",interval:3}),this.focusAndMakeActive(i),!1;var m=this.keyValidationSet.validate(k);if(null!==m)return Storm.flashMsg({text:m,"class":"error",interval:5}),!1;if(m=this.valueValidationSet.validate(l),null!==m)return Storm.flashMsg({text:m,"class":"error",interval:5}),!1;e[k]=l}}this.inspector.setPropertyValue(this.propertyDefinition.property,e),this.setLinkText(d,e)},d.prototype.getValueKeys=function(a){var b=[];for(var c in a)b.push(c);return b},d.prototype.getActiveRow=function(){var a=this.popup.querySelector("td.active");return a?a.parentNode:null},d.prototype.getTableBody=function(){return this.popup.querySelector("table.inspector-dictionary-table tbody")},d.prototype.updateScrollpads=function(){a(".control-scrollpad",this.popup).scrollpad("update")},d.prototype.focusFirstInput=function(){var a=this.popup.querySelector("td input");a&&(a.focus(),this.setActiveCell(a))},d.prototype.getEditorCell=function(a){return a.parentNode.parentNode},d.prototype.getEditorRow=function(a){return a.parentNode.parentNode.parentNode},d.prototype.focusAndMakeActive=function(a){a.focus(),this.setActiveCell(a)},d.prototype.getRowInputByIndex=function(a,b){return a.cells[b].querySelector("input")},d.prototype.navigateDown=function(a){var b=this.getEditorCell(a.currentTarget),c=this.getEditorRow(a.currentTarget),d=c.nextElementSibling;if(d){var e=d.cells[b.cellIndex].querySelector("input");this.focusAndMakeActive(e)}},d.prototype.navigateUp=function(a){var b=this.getEditorCell(a.currentTarget),c=this.getEditorRow(a.currentTarget),d=c.previousElementSibling;if(d){var e=d.cells[b.cellIndex].querySelector("input");this.focusAndMakeActive(e)}},d.prototype.initValidators=function(){this.keyValidationSet=new Storm.inspector.validationSet({validation:this.propertyDefinition.validationKey},this.propertyDefinition.property+".validationKey"),this.valueValidationSet=new Storm.inspector.validationSet({validation:this.propertyDefinition.validationValue},this.propertyDefinition.property+".validationValue")},d.prototype.disposeValidators=function(){this.keyValidationSet.dispose(),this.valueValidationSet.dispose()},d.prototype.onPopupShown=function(a,b,d){c.onPopupShown.call(this,a,b,d),d.on("focus.inspector","td input",this.proxy(this.onFocus)),d.on("keydown.inspector","td input",this.proxy(this.onKeyDown)),d.on("click.inspector","[data-cmd]",this.proxy(this.onCommand))},d.prototype.onPopupHidden=function(a,b,d){d.off(".inspector","td input"),d.off(".inspector","[data-cmd]",this.proxy(this.onCommand)),c.onPopupHidden.call(this,a,b,d)},d.prototype.onFocus=function(a){this.setActiveCell(a.currentTarget)},d.prototype.onCommand=function(a){var b=a.currentTarget.getAttribute("data-cmd");switch(b){case"create-item":this.createItem();break;case"delete-item":this.deleteItem()}},d.prototype.onKeyDown=function(a){return 40==a.keyCode?this.navigateDown(a):38==a.keyCode?this.navigateUp(a):void 0},Storm.inspector.propertyEditors.dictionary=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.propertyEditors.string,c=b.prototype,d=function(a,c,d,e){this.autoUpdateTimeout=null,b.call(this,a,c,d,e)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.clearAutoUpdateTimeout(),this.removeAutocomplete(),c.dispose.call(this)},d.prototype.build=function(){var a=document.createElement("div"),b=document.createElement("input"),c=void 0!==this.propertyDefinition.placeholder?this.propertyDefinition.placeholder:"",d=this.inspector.getPropertyValue(this.propertyDefinition.property);b.setAttribute("type","text"),b.setAttribute("class","string-editor"),b.setAttribute("placeholder",c),a.setAttribute("class","autocomplete-container"),void 0===d&&(d=this.propertyDefinition["default"]),void 0===d&&(d=""),b.value=d,Storm.foundation.element.addClass(this.containerCell,"text autocomplete"),a.appendChild(b),this.containerCell.appendChild(a),void 0!==this.propertyDefinition.items?this.buildAutoComplete(this.propertyDefinition.items):this.loadDynamicItems()},d.prototype.buildAutoComplete=function(b){var c=this.getInput();void 0===b&&(b=[]);var d=a(c),e=d.data("autocomplete");e?e.source=this.prepareItems(b):d.autocomplete({source:this.prepareItems(b),matchWidth:!0})},d.prototype.removeAutocomplete=function(){var b=this.getInput();a(b).autocomplete("destroy")},d.prototype.prepareItems=function(b){var c={};if(a.isArray(b))for(var d=0,e=b.length;d<e;d++)c[b[d]]=b[d];else c=b;return c},d.prototype.supportsExternalParameterEditor=function(){return!1},d.prototype.getContainer=function(){return this.getInput().parentNode},d.prototype.registerHandlers=function(){c.registerHandlers.call(this),a(this.getInput()).on("change",this.proxy(this.onInputKeyUp))},d.prototype.unregisterHandlers=function(){c.unregisterHandlers.call(this),a(this.getInput()).off("change",this.proxy(this.onInputKeyUp))},d.prototype.saveDependencyValues=function(){this.prevDependencyValues=this.getDependencyValues()},d.prototype.getDependencyValues=function(){for(var a="",b=0,c=this.propertyDefinition.depends.length;b<c;b++){var d=this.propertyDefinition.depends[b],e=this.inspector.getPropertyValue(d);void 0===e&&(e=""),a+=d+":"+e+"-"}return a},d.prototype.onInspectorPropertyChanged=function(a,b){this.propertyDefinition.depends&&this.propertyDefinition.depends.indexOf(a)!==-1&&(this.clearAutoUpdateTimeout(),void 0!==this.prevDependencyValues&&this.prevDependencyValues==dependencyValues||(this.autoUpdateTimeout=setTimeout(this.proxy(this.loadDynamicItems),200)))},d.prototype.clearAutoUpdateTimeout=function(){null!==this.autoUpdateTimeout&&(clearTimeout(this.autoUpdateTimeout),this.autoUpdateTimeout=null)},d.prototype.showLoadingIndicator=function(){a(this.getContainer()).loadIndicator()},d.prototype.hideLoadingIndicator=function(){if(!this.isDisposed()){var b=a(this.getContainer());b.loadIndicator("hide"),b.loadIndicator("destroy"),b.removeClass("loading-indicator-container")}},d.prototype.loadDynamicItems=function(){if(!this.isDisposed()){this.clearAutoUpdateTimeout();var b=this.getContainer(),c=this.getRootSurface().getValues(),d=a(b).closest("form");Storm.foundation.element.addClass(b,"loading-indicator-container size-small"),this.showLoadingIndicator(),this.triggerGetItems(c)!==!1&&(c.inspectorProperty=this.getPropertyPath(),c.inspectorClassName=this.inspector.options.inspectorClass,d.request("onInspectableGetOptions",{data:c}).done(this.proxy(this.itemsRequestDone)).always(this.proxy(this.hideLoadingIndicator)))}},d.prototype.triggerGetItems=function(b){var c=this.getInspectableElement();if(!c)return!0;var d=a.Event("autocompleteitems.oc.inspector");return c.trigger(d,[{values:b,callback:this.proxy(this.itemsRequestDone),property:this.inspector.getPropertyPath(this.propertyDefinition.property),propertyDefinition:this.propertyDefinition}]),!d.isDefaultPrevented()},d.prototype.itemsRequestDone=function(a){if(!this.isDisposed()){this.hideLoadingIndicator();var b={};if(a.options)for(var c=a.options.length-1;c>=0;c--)b[a.options[c].value]=a.options[c].title;this.buildAutoComplete(b)}},Storm.inspector.propertyEditors.autocomplete=d}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.inspector&&(Storm.inspector={}),Storm.inspector.helpers={},Storm.inspector.helpers.generateElementUniqueId=function(a){if(a.hasAttribute("data-inspector-id"))return a.getAttribute("data-inspector-id");var b=Storm.inspector.helpers.generateUniqueId();return a.setAttribute("data-inspector-id",b),b},Storm.inspector.helpers.generateUniqueId=function(){return"inspectorid-"+Math.floor(Math.random()*(new Date).getTime())}}(window.jQuery),+function(a){"use strict";void 0===Storm.inspector.validators&&(Storm.inspector.validators={});var b=Storm.foundation.base,c=b.prototype,d=function(a,c){this.validators=[],this.options=a,this.propertyName=c,b.call(this),this.createValidators()};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.disposeValidators(),this.validators=null,c.dispose.call(this)},d.prototype.disposeValidators=function(){for(var a=0,b=this.validators.length;a<b;a++)this.validators[a].dispose()},d.prototype.throwError=function(a){throw new Error(a+" Property: "+this.propertyName)},d.prototype.createValidators=function(){if(void 0===this.options.required&&void 0===this.options.validationPattern&&void 0===this.options.validationMessage||void 0===this.options.validation||this.throwError("Legacy and new validation syntax should not be mixed."),void 0!==this.options.required){var a=new Storm.inspector.validators.required({message:this.options.validationMessage});this.validators.push(a)}if(void 0!==this.options.validationPattern){var a=new Storm.inspector.validators.regex({message:this.options.validationMessage,pattern:this.options.validationPattern});this.validators.push(a)}if(void 0!==this.options.validation)for(var b in this.options.validation){void 0==Storm.inspector.validators[b]&&this.throwError('Inspector validator "'+b+'" is not found in the Storm.inspector.validators namespace.');var a=new Storm.inspector.validators[b](this.options.validation[b]);this.validators.push(a)}},d.prototype.validate=function(a){try{for(var b=0,c=this.validators.length;b<c;b++){var d=this.validators[b],e=d.isValid(a);if("string"==typeof e)return e}return null}catch(f){this.throwError(f)}},Storm.inspector.validationSet=d}(window.jQuery),+function(a){"use strict";void 0===Storm.inspector.validators&&(Storm.inspector.validators={});var b=Storm.foundation.base,c=b.prototype,d=function(a){this.options=a,this.defaultMessage="Invalid property value.",b.call(this)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.defaultMessage=null,c.dispose.call(this)},d.prototype.getMessage=function(a){return void 0!==this.options.message?this.options.message:void 0!==a?a:this.defaultMessage},d.prototype.isScalar=function(a){return void 0===a||null===a||!("string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a)},d.prototype.isValid=function(a){return null},Storm.inspector.validators.base=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.validators.base,c=b.prototype,d=function(a){b.call(this,a)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.doCommonChecks=function(a){if(void 0!==this.options.min||void 0!==this.options.max){if(void 0!==this.options.min){if(void 0===this.options.min.value)throw new Error("The min.value parameter is not defined in the Inspector validator configuration");if(a<this.options.min.value)return void 0!==this.options.min.message?this.options.min.message:"The value should not be less than "+this.options.min.value}if(void 0!==this.options.max){if(void 0===this.options.max.value)throw new Error("The max.value parameter is not defined in the table Inspector validator configuration");if(a>this.options.max.value)return void 0!==this.options.max.message?this.options.max.message:"The value should not be greater than "+this.options.max.value}}},Storm.inspector.validators.baseNumber=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.validators.base,c=b.prototype,d=function(a){b.call(this,a),this.defaultMessage="The property is required."};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.isValid=function(b){return void 0===b||null===b?this.getMessage():"boolean"==typeof b?b?null:this.getMessage():"object"==typeof b?a.isEmptyObject(b)?this.getMessage():null:a.trim(String(b)).length>0?null:this.getMessage()},Storm.inspector.validators.required=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.validators.base,c=b.prototype,d=function(a){b.call(this,a)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.isValid=function(b){if(void 0===this.options.pattern&&this.throwError("The pattern parameter is not defined in the Regex Inspector validator configuration."),this.isScalar(b)||this.throwError("The Regex Inspector validator can only be used with string values."),void 0===b||null===b)return null;var c=a.trim(String(b));if(0===c.length)return null;var d=new RegExp(this.options.pattern,this.options.modifiers);return d.test(c)?null:this.getMessage()},Storm.inspector.validators.regex=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.validators.baseNumber,c=b.prototype,d=function(a){b.call(this,a)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.isValid=function(b){if(this.isScalar(b)&&"boolean"!=typeof b||this.throwError("The Integer Inspector validator can only be used with string values."),void 0===b||null===b)return null;var c=a.trim(String(b));if(0===c.length)return null;var d=this.options.allowNegative?/^\-?[0-9]*$/.test(c):/^[0-9]*$/.test(c);if(!d){var e=this.options.allowNegative?"The value should be an integer.":"The value should be a positive integer.";return this.getMessage(e)}return this.doCommonChecks(parseInt(c))},Storm.inspector.validators.integer=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.validators.baseNumber,c=b.prototype,d=function(a){b.call(this,a)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.isValid=function(b){if(this.isScalar(b)&&"boolean"!=typeof b||this.throwError("The Float Inspector validator can only be used with string values."),void 0===b||null===b)return null;var c=a.trim(String(b));if(0===c.length)return null;var d=this.options.allowNegative?/^[-]?([0-9]+\.[0-9]+|[0-9]+)$/.test(c):/^([0-9]+\.[0-9]+|[0-9]+)$/.test(c);if(!d){var e=this.options.allowNegative?"The value should be a floating point number.":"The value should be a positive floating point number.";return this.getMessage(e)}return this.doCommonChecks(parseFloat(c))},Storm.inspector.validators["float"]=d}(window.jQuery),+function(a){"use strict";var b=Storm.inspector.validators.base,c=b.prototype,d=function(a){b.call(this,a)};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.isValid=function(a){if(void 0===a||null===a)return null;"boolean"==typeof a&&this.throwError("The Length Inspector validator cannot work with Boolean values.");var b=null;if("[object Array]"===Object.prototype.toString.call(a)||"string"==typeof a?b=a.length:"object"==typeof a&&(b=this.getObjectLength(a)),void 0!==this.options.min||void 0!==this.options.max){if(void 0!==this.options.min){if(void 0===this.options.min.value)throw new Error("The min.value parameter is not defined in the Length Inspector validator configuration.");if(b<this.options.min.value)return void 0!==this.options.min.message?this.options.min.message:"The value should not be shorter than "+this.options.min.value}if(void 0!==this.options.max){if(void 0===this.options.max.value)throw new Error("The max.value parameter is not defined in the Length Inspector validator configuration.");if(b>this.options.max.value)return void 0!==this.options.max.message?this.options.max.message:"The value should not be longer than "+this.options.max.value}}},d.prototype.getObjectLength=function(a){var b=0;for(var c in a)b++;return b},Storm.inspector.validators.length=d}(window.jQuery),+function(a){"use strict";void 0===window.Storm&&(window.Storm={}),void 0===Storm.inspector&&(Storm.inspector={});var b=Storm.foundation.base,c=b.prototype,d=function(a,c,d,e){this.inspector=a,this.propertyDefinition=c,this.containerCell=d,this.initialValue=e,b.call(this),this.init()};d.prototype=Object.create(c),d.prototype.constructor=b,d.prototype.dispose=function(){this.disposeControls(),this.unregisterHandlers(),this.inspector=null,this.propertyDefinition=null,this.containerCell=null,this.initialValue=null,c.dispose.call(this)},d.prototype.init=function(){this.tooltipText="Click to enter the external parameter name to load the property value from",this.build(),this.registerHandlers(),this.setInitialValue()},d.prototype.build=function(){var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("input"),f=document.createElement("a"),g=document.createElement("i");for(b.setAttribute("class","external-param-editor-container"),c.setAttribute("class","external-editor"),d.setAttribute("class","controls"),e.setAttribute("type","text"),e.setAttribute("tabindex","-1"),f.setAttribute("href","#"),f.setAttribute("class","external-editor-link"),f.setAttribute("tabindex","-1"),f.setAttribute("title",this.tooltipText),a(f).tooltip({container:"body",delay:500}),g.setAttribute("class","oc-icon-terminal"),f.appendChild(g),d.appendChild(e),d.appendChild(f),c.appendChild(d);this.containerCell.firstChild;){var h=this.containerCell.firstChild;b.appendChild(h)}b.appendChild(c),this.containerCell.appendChild(b)},d.prototype.setInitialValue=function(){if(this.initialValue&&"string"==typeof this.initialValue){var b=[];if(b=this.initialValue.match(/^\{\{([^\}]+)\}\}$/)){var c=a.trim(b[1]);c.length>0&&(this.showEditor(!0),this.getInput().value=c,this.inspector.setPropertyValue(this.propertyDefinition.property,null,!0,!0))}}},d.prototype.showEditor=function(b){var c=this.getEditor(),d=this.getInput(),e=this.getContainer(),f=this.getLink(),g=a(c).position();b?c.style.right=0:(c.style.right=0,c.style.left=g.left+"px"),setTimeout(this.proxy(this.repositionEditor),0),Storm.foundation.element.addClass(e,"editor-visible"),f.setAttribute("data-original-title","Click to enter the property value"),this.toggleEditorVisibility(!1),d.setAttribute("tabindex",0),b||d.focus()},d.prototype.repositionEditor=function(){this.getEditor().style.left=0,this.containerCell.scrollTop=0},d.prototype.hideEditor=function(){var a=this.getEditor(),b=this.getContainer();a.style.left="auto",a.style.right="30px",Storm.foundation.element.removeClass(b,"editor-visible"),Storm.foundation.element.removeClass(this.containerCell,"active");var c=this.inspector.findPropertyEditor(this.propertyDefinition.property);c&&c.onExternalPropertyEditorHidden()},d.prototype.toggleEditor=function(b){Storm.foundation.event.stop(b);var c=this.getLink(),d=this.getContainer(),e=this.getEditor();if(a(c).tooltip("hide"),!this.isEditorVisible())return void this.showEditor();var f=d.offsetWidth;e.style.left=f+"px",c.setAttribute("data-original-title",this.tooltipText),this.getInput().setAttribute("tabindex","-1"),this.toggleEditorVisibility(!0),setTimeout(this.proxy(this.hideEditor),200)},d.prototype.toggleEditorVisibility=function(b){var c=this.getContainer(),d=c.children,e=0;b||(e=this.containerCell.getAttribute("data-inspector-cell-height"),e||(e=a(this.containerCell).height(),this.containerCell.setAttribute("data-inspector-cell-height",e))),e=Math.max(e,19);for(var f=0,g=d.length;f<g;f++){var h=d[f];Storm.foundation.element.hasClass(h,"external-editor")||(b?Storm.foundation.element.removeClass(h,"hide"):(c.style.height=e+"px",Storm.foundation.element.addClass(h,"hide")))}},d.prototype.focus=function(){this.getInput().focus()},d.prototype.validate=function(b){var c=a.trim(this.getValue());return 0!==c.length||(b||(Storm.flashMsg({text:"Please enter the external parameter name.","class":"error",interval:5}),this.focus()),!1)},d.prototype.registerHandlers=function(){var a=this.getInput();this.getLink().addEventListener("click",this.proxy(this.toggleEditor)),a.addEventListener("focus",this.proxy(this.onInputFocus)),a.addEventListener("change",this.proxy(this.onInputChange))},d.prototype.onInputFocus=function(){this.inspector.makeCellActive(this.containerCell)},d.prototype.onInputChange=function(){this.inspector.markPropertyChanged(this.propertyDefinition.property,!0)},d.prototype.unregisterHandlers=function(){var a=this.getInput();this.getLink().removeEventListener("click",this.proxy(this.toggleEditor)),a.removeEventListener("focus",this.proxy(this.onInputFocus)),a.removeEventListener("change",this.proxy(this.onInputChange))},d.prototype.disposeControls=function(){a(this.getLink()).tooltip("destroy")},d.prototype.getInput=function(){return this.containerCell.querySelector("div.external-editor input")},d.prototype.getValue=function(){return this.getInput().value},d.prototype.getLink=function(){return this.containerCell.querySelector("a.external-editor-link")},d.prototype.getContainer=function(){return this.containerCell.querySelector("div.external-param-editor-container")},d.prototype.getEditor=function(){return this.containerCell.querySelector("div.external-editor")},d.prototype.getPropertyName=function(){return this.propertyDefinition.property},d.prototype.isEditorVisible=function(){return Storm.foundation.element.hasClass(this.getContainer(),"editor-visible")},Storm.inspector.externalParameterEditor=d}(window.jQuery),+function(a){"use strict";var b=Storm.foundation.base,c=b.prototype,d=0,e=0,f=function(a,c){this.lists=[],this.options=c,this.listSortableId=null,this.lastMousePosition=null,b.call(this),Storm.foundation.controlUtils.markDisposable(a),this.init(),this.addList(a)};f.prototype=Object.create(c),f.prototype.constructor=f,f.prototype.init=function(){d++,this.listSortableId="listsortable/id/"+d},f.prototype.addList=function(b){this.lists.push(b),this.registerListHandlers(b),1==this.lists.length&&a(b).one("dispose-control",this.proxy(this.dispose))},f.prototype.registerListHandlers=function(b){
var c=a(b);c.on("dragstart","> li",this.proxy(this.onDragStart)),c.on("dragover","> li",this.proxy(this.onDragOver)),c.on("dragenter","> li",this.proxy(this.onDragEnter)),c.on("dragleave","> li",this.proxy(this.onDragLeave)),c.on("drop","> li",this.proxy(this.onDragDrop)),c.on("dragend","> li",this.proxy(this.onDragEnd))},f.prototype.unregisterListHandlers=function(b){var c=a(b);c.off("dragstart","> li",this.proxy(this.onDragStart)),c.off("dragover","> li",this.proxy(this.onDragOver)),c.off("dragenter","> li",this.proxy(this.onDragEnter)),c.off("dragleave","> li",this.proxy(this.onDragLeave)),c.off("drop","> li",this.proxy(this.onDragDrop)),c.off("dragend","> li",this.proxy(this.onDragEnd))},f.prototype.unregisterHandlers=function(){a(document).off("dragover",this.proxy(this.onDocumentDragOver)),a(document).off("mousemove",this.proxy(this.onDocumentMouseMove)),a(this.lists[0]).off("dispose-control",this.proxy(this.dispose))},f.prototype.unbindLists=function(){for(var b=this.lists.length-1;b>0;b--){var c=this.lists[b];this.unregisterListHandlers(this.lists[b]),a(c).removeData("oc.listSortable")}},f.prototype.dispose=function(){this.unbindLists(),this.unregisterHandlers(),this.options=null,this.lists=[],c.dispose.call(this)},f.prototype.elementBelongsToManagedList=function(a){for(var b=this.lists.length-1;b>=0;b--){var c=this.lists[b],d=[].slice.call(c.children);if(d.indexOf(a)!==-1)return!0}return!1},f.prototype.isDragStartAllowed=function(a){return!0},f.prototype.elementIsPlaceholder=function(a){return"list-sortable-placeholder"===a.getAttribute("class")},f.prototype.getElementSortableId=function(a){if(a.hasAttribute("data-list-sortable-element-id"))return a.getAttribute("data-list-sortable-element-id");e++;return a.setAttribute("data-list-sortable-element-id",e),e},f.prototype.dataTransferContains=function(a,b){return void 0!==a.dataTransfer.types.indexOf?a.dataTransfer.types.indexOf(b)>=0:a.dataTransfer.types.contains(b)},f.prototype.isSourceManagedList=function(a){return this.dataTransferContains(a,this.listSortableId)},f.prototype.removePlaceholders=function(){for(var a=this.lists.length-1;a>=0;a--)for(var b=this.lists[a],c=b.querySelectorAll(".list-sortable-placeholder"),d=c.length-1;d>=0;d--)b.removeChild(c[d])},f.prototype.createPlaceholder=function(a,b){var c=document.createElement("li"),d=this.getPlaceholderPlacement(a,b);this.removePlaceholders(),c.setAttribute("class","list-sortable-placeholder"),c.setAttribute("draggable",!0),"before"==d?a.parentNode.insertBefore(c,a):a.parentNode.insertBefore(c,a.nextSibling)},f.prototype.moveElement=function(b,c){var d=b.parentNode,e=d.querySelector(".list-sortable-placeholder");if(e){var f=c.dataTransfer.getData("listsortable/elementid");if(f){var g=this.findDraggedItem(f);g&&(e.parentNode.insertBefore(g,e),a(g).trigger("dragged.list.sortable"))}}},f.prototype.findDraggedItem=function(a){for(var b=this.lists.length-1;b>=0;b--){var c=this.lists[b],d=c.querySelector('[data-list-sortable-element-id="'+a+'"]');if(d)return d}return null},f.prototype.getPlaceholderPlacement=function(a,b){var c=Storm.foundation.event.pageCoordinates(b),d=Storm.foundation.element.absolutePosition(a);if("vertical"==this.options.direction){var e=d.top+a.offsetHeight/2;return c.y<=e?"before":"after"}var e=d.left+a.offsetWidth/2;return c.x<=e?"before":"after"},f.prototype.lastMousePositionChanged=function(a){var b=Storm.foundation.event.pageCoordinates(a.originalEvent);return(null===this.lastMousePosition||this.lastMousePosition.x!=b.x||this.lastMousePosition.y!=b.y)&&(this.lastMousePosition=b,!0)},f.prototype.mouseOutsideLists=function(a){for(var b=Storm.foundation.event.pageCoordinates(a),c=this.lists.length-1;c>=0;c--)if(Storm.foundation.element.elementContainsPoint(this.lists[c],b))return!1;return!0},f.prototype.getClosestDraggableParent=function(a){for(var b=a;b;){if("LI"===b.tagName&&b.hasAttribute("draggable"))return b;b=b.parentNode}return null},f.prototype.onDragStart=function(b){this.isDragStartAllowed(b.target)&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("listsortable/elementid",this.getElementSortableId(b.target)),b.originalEvent.dataTransfer.setData(this.listSortableId,this.listSortableId),a(document).on("mousemove",this.proxy(this.onDocumentMouseMove)),a(document).on("dragover",this.proxy(this.onDocumentDragOver)))},f.prototype.onDragOver=function(a){if(this.isSourceManagedList(a.originalEvent)){var b=this.getClosestDraggableParent(a.target);b&&(!this.elementIsPlaceholder(b)&&this.lastMousePositionChanged(a)&&this.createPlaceholder(b,a.originalEvent),a.stopPropagation(),a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="move")}},f.prototype.onDragEnter=function(a){if(this.isSourceManagedList(a.originalEvent)){var b=this.getClosestDraggableParent(a.target);b&&(this.elementIsPlaceholder(b)||(this.createPlaceholder(b,a.originalEvent),a.stopPropagation(),a.preventDefault()))}},f.prototype.onDragLeave=function(a){this.isSourceManagedList(a.originalEvent)&&(a.stopPropagation(),a.preventDefault())},f.prototype.onDragDrop=function(a){if(this.isSourceManagedList(a.originalEvent)){var b=this.getClosestDraggableParent(a.target);b&&(this.moveElement(b,a.originalEvent),this.removePlaceholders())}},f.prototype.onDragEnd=function(b){a(document).off("dragover",this.proxy(this.onDocumentDragOver))},f.prototype.onDocumentDragOver=function(a){this.isSourceManagedList(a.originalEvent)&&this.mouseOutsideLists(a.originalEvent)&&this.removePlaceholders()},f.prototype.onDocumentMouseMove=function(b){a(document).off("mousemove",this.proxy(this.onDocumentMouseMove)),this.removePlaceholders()},f.DEFAULTS={handle:null,direction:"vertical"};var g=a.fn.listSortable;a.fn.listSortable=function(b){var c=arguments;return this.each(function(){var d=a(this),e=d.data("oc.listSortable"),g=a.extend({},f.DEFAULTS,d.data(),"object"==typeof b&&b);if(e||d.data("oc.listSortable",e=new f(this,g)),"string"==typeof b&&e&&e[b]){var h=Array.prototype.slice.call(c);h.shift(),e[b].apply(e,h)}})},a.fn.listSortable.Constructor=f,a.fn.listSortable.noConflict=function(){return a.fn.listSortable=g,this},a(document).on("render",function(){a("[data-control=list-sortable]").listSortable()})}(window.jQuery);
//# sourceMappingURL=storm.min.js.map